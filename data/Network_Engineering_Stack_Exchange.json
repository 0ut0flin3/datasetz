{"ipsec - What's the difference between IKE and ISAKMP?": "\nISAKMP is part of IKE. (IKE has ISAKMP, SKEME and OAKLEY). IKE establishs the shared security policy and authenticated keys. ISAKMP is the protocol that specifies the mechanics of the key exchange.\nThe confusion, (for me,) is that in the Cisco IOS ISAKMP/IKE are used to refer to the same thing. By which I mean, my understanding is that Cisco's IKE only implements/uses ISAKMP. So one configures IKE, and then conceptually inside that, one configures ISAKMP.\n", "qos - Quality of Service based on Layer 7 traffic": "\nI think this depends heavily on the platform on which you want to accomplish this. For example, IOS uses NBAR to classify transit traffic, primarily for QoS and security mechanisms. But as far as I know, NBAR QoS configurations are entirely static.\nFor centralized monitoring, NetFlow is probably your best bet.\n", "cisco catalyst - Troubleshooting \"Down BGP\" connections": "\n172259: May  6 14:43:06: %BGP-3-NOTIFICATION: sent to neighbor xxx.xxx.12.34 4/0 (hold time expired) 0 bytes\nThat generally means the other side of the connection did not respond to any keepalives within the hold timer (default 180 seconds). There are a variety of issues that could have caused this. Usually its a layer3 reachability issue. If it happens again, you should rule out layer3 issue by testing to the peer via ping and telnet (telnet to port 179, see if it responds).\nIf its not a layer3 reachability issue, then there was a problem with one end of the neighborship (more likely the far side in this case).\n", "security - Securing OSPF with only passive interfaces": "\nOne issue is that authentication ensures that only trusted devices are capable of exchanging routes on the network.  Without authentication, you could introduce a non-trusted device and cause significant routing issues.  For example:\nIf area 0 is not authenticated, attach a router in area 0 with bogus routes to null0.  You could even create a default route and inject it into the topology leading to the bad router to black hole traffic.  Or the route could force traffic toward a bogus gateway designed to sniff connections and pull out insecure data before sending it on the right path.\nAuthentication ensures that only routers you know about and trust are exchanging information.\n", "policing - Aggregate Family Rate Limits on Juniper EX": "\nYou are looking for the \"Logical Interface (Aggregate) Policer\":\nhttp://www.juniper.net/techpubs/en_US/junos11.4/topics/concept/policer-logical-interface-aggregate-overview.html\nUnfortunately they are only available on EX9200 (which is a castrated MX) if the information on the EX feature page is correct:\nhttp://www.juniper.net/techpubs/en_US/release-independent/junos/topics/concept/ex-series-software-features-overview.html#routing-policy-packet-filtering-features-by-platform-table\n", "cisco asa - Migrating pre-8.3 ASA config to 8.3+": "\nGive a short enough config set, reconfiguring by hand should be an acceptable option.  You could even take your existing config and try to implement it again via the ASDM to see what the new GUI returns.\nIf your config is multiple pages or has a large number of objects, it might be best to implement it on a test box to see what comes back as an error message before putting it into production.\nUnlike the PIX-to-ASA migration, Cisco never released a sanity check tool.\n", "wireless - Does Windows support PEAPv1/EAP-GTC?": "\nNaitvely, Windows does not support PEAP-GTC, however there are supplicants available to support PEAP-GTC authentication on Windows.\n", "What type of fiber do I need for a WS-G5484": "\nThe WS-G5484 is a multimode fiber connector.  If you're using standard multimode fiber (62.5 micron), you should be about to get around 300m distance out of them.  With 50 micron fiber, that number should go up to around 500m.\n", "How can I force VTP clients to update their VLAN database from the VTP server, on Cisco devices?": "\nYou can't manually force updates because VTP configs are pushed based on the highest current VLAN database revision number. Normally, after every change to your VTP config the configuration revision number should be incremented. The only way to force update this is by actually doing a VTP database change.\n", "security - I want to perform monitoring of my network infrastructure, can this safely be done with SNMPv2?": "\nIf SNMPv3 is not an option you can do some things to help secure SNMPv2 better.\n\nDon't enable the Read-Write string. There are very few reasons to enabled it.\nChoose community strings that are more complex and remove any that are 'private' or 'public'.\nUse an access-list on the community string to restrict what IP addresses can poll the device.\nDo not enable 'system-shutdown' option.\nUse a different community string for SNMP traps vs the polling SNMP string.\n\n", "byod - Can I use Cisco Anyconnect with mobile devices?": "\nCisco provides a special application for iphone devices or for android devices. Unfortunately Windows Phone isn't supported yet.\n", "cisco - What is Dec MOP and how to disable it?": "\nDecnet Maintenance Operation Protocol (MOP) is an ancient protocol that was used to administrate remote systems, and provided tools such as remote console or network bootstrap.  \nHowever, as of now this is still enabled by default on all Cisco IOS Releases from 9.0 to recent 15.x. \nTo disable MOP on the router it has to be done on a per-interface basis:\nrouter# conf t\nrouter(configure)# interface fastethernet0/0\nrouter(configure-if)# no mop enabled\n\nrouter# sh run int f0/0 | include mop\n no mop enabled\n\nMOP will be disabled even though the router still shows MOP as protocol on the interface:\nrouter# show int f0/0 count prot status \nProtocols allocated:\n FastEthernet0/0: Other, IP, DEC MOP, ARP, CDP, IPv6\n\n", "cisco asa - How do you get an ASA to announce NAT'd 'outside' addresses in to an OSPF zone?": "\nTypically you would install a static route on the upstream device (the Juniper MX5 in this example) pointing to the NAT outside network, rather than trying to advertise the network from the ASA. At least, that's how I always go about it.\n", "qos - Weather map and monitoring for network usage": "\nThere are a few examples that can do this.\nCacti is one. It has a weather-map plugin that can be leveraged to produce output such as the following\nGigaPop Illinois \nWisconsin University\nThese are examples of what the weather map plugin can do. When configured correctly you can see minute, hourly, daily, weekly and monthly traffic stats.\nYou can download Cacti from the website listed above, weather-map here or a nice script hosted by Brent Salisbury here.\nIt is worth reading up on Cacti as there is a lot of features and devices that it can look after. Email alerts based on thresholds, events, lack of information and more can be delivered. This can be utilized via SNMP.\n", "UDLD in VSS configurations - Ntwork Enginring Stack Exchang": "\nIf you are referring the the VSL between the to VSS switches, I don't think it makes sense to enable UDLD because LMP will detect a unidirectional link.\n\nLMP is designed to run on each VSL member link to maintain multiple state machines with the same peer over different ports. In a case in which a unidirectional condition on a port is detected, LMP marks it as down and attempts to restart VSLP negotiation\u2014instead of err-disabling the port.\n\nFor this and more LMP and VSS info: http://www.cisco.com/en/US/docs/solutions/Enterprise/Campus/VSS30dg/VSS-dg_ch2.html#wp1055977\n", "juniper - MPLS auto-bandwidth balancing": "\nYou certainly want to ECMP LSP's, how many to use depends on traffic levels relative to link bandwidths (critically you want to avoid LSP's being unsignalable due to being larger then a choke point).\nFor auto-bandwidth intervals it depends on what your aiming for, a few times an hour isn't a bad number, but less frequent may be better if you have fewer flows.\n", "Are CoS and QoS ever interchangeable?": "\nQoS is an umbrella term which covers the use of features such as policing, shaping, traffic classification, and advanced queuing mechanisms.\nCoS is a form of QoS limited to layer-2 Ethernet and it uses 3-bits (8 values) of the 802.1Q tag to differentiate your traffic. Therefore no trunking, no CoS.\nDSCP is the most commonly acted upon value at layer-3 and it is found in 6-bits (64 values) of the IP header.  Typically only 14 of the values are used and are referred to using the notations of best effort, expedited forwarding (EF), and assured forwarding (AF).  AF values are in the form AFxy, where x is 1-4 and refers to the precedence and y is 1-3 and refers to the drop probability.\nTelco vendors (such as AT&T specifically) use the term CoS to define the bandwidth allocation classes that they support in their MPLS offerings.  Basically they turned CoS into a marketing term.  Typically a Telco uses DSCP to know which of their CoS classes your traffic is supposed to be a part of.\nAnother important point for configuring these features is that in a Cisco switch or router you \nneed to use a command such as 'mls qos trust dscp' or 'mls qos trust cos' or else the device will reset the QoS marking to zero.  There are some exceptions based on model, configuration, and IOS version but this has been true for everything within the last few years in my experience.  This configuration is required because the device needs to know which marking you want it to act upon since it cannot use both.  I like using DSCP. I haven't found a solid reason to use CoS over it but I'm sure someone has one.\n", "Does it make sense to deploy OSPF across Metro Ethernet?": "\nThis is kind of a complex question, as the two different products are very different.  A MPLS L3VPN circuit inherently is a full mesh between all locations that participate, while a MetroE connection is generally a point to point link between two specific sites.  \nIn my experience, a MetroE circuit is a directly provisioned path, with no protect services, unless contracted with a protect path.  This means that failure of an interface or router along the specific path would be traffic interrupting between the two sites that are directly linked by the MetroE service.  The MPLS L3VPN will heal around interface/routing failures to keep you with a full mesh between your sites.  This generally accounts for the price difference between the two.\nThere is nothing wrong with building your own services on top of a MetroE platform -- you just need to work with customer requirements to determine what type of routing is appropriate.  If you are working with a small office network, OSPF/IS-IS/EIGRP could be a wonderful way to exchange routing information between the directly connected sites that you have established.  If you're more of an NSP/ISP/*SP, separating infrastructure and customer routes between IGP and EGP becomes much more important as you scale.\nAs an ISP engineer, we extensively use MetroE and EWAN links to build our backbone, and utilize our knowledge of the physical links to design our iBGP/eBGP environment.  In many cases, we use route reflectors, and dual route reflectors (route-reflector-client on both sides of the peering) to reduce our iBGP peer count.  However, unless you're dealing with 6+ routers in a POP, iBGP scales pretty well.\nIn short -- if it's for a single client, that is not offering network services to clients of their own -- stick with an IGP.  If external connectivity needs to be shared between sites, with failover/redundancy/etc, closely examine the physical paths you have, and design your eBGP/iBGP to reflect that.  No point in having a router in a remote location with only 1 link outside the site to iBGP peer with all other routers in the AS -- use a dual route reflector.\n", "Cisco ASA site-to-site VPN failover": "\nI have been migrating sites away from policy-based VPNs for just this reason. Policy-based VPNs are too unpredictable when it comes to failover behavior. I much prefer route-based IPsec tunnels, either point-to-point or DMVPN. Unfortunately, to my knowledge the ASA platform still doesn't support route-based tunnels.\n", "cisco - Nexus 2000 pinning best practice": "\nI believe this is considered best practice. Frankly, there's no reason not to. Given that the 2K is essentially just a line card that can be moved around arbitrarily, this is the only way to ensure that it always shows up in the same \"slot\" of the parent switch.\n", "Should i run UDLD with spanning tree?": "\nUDLD is generally run on fibre media, it is not required on UTP due to the use of Fast Link Pulse which is already monitoring link status.\nThis page has a very good explanation of the various L2 protections available. Here is an excerpt specifically regarding UDLD:\n\nUDLD is used to detect if a link is only available in one direction,\n  for example half the fibre is disconnected. UDLD performs this check\n  faster than STP will bring the port in to a fowarding state. That\n  means if you have UDLD and STP enabled then UDLD will prevent STP from\n  bringing a port in to a state where it will forward traffic to\n  nowhere.\nA unidirectional link occurs when traffic is transmitted between\n  neighbors in one direction only. Unidirectional Link Detection is a\n  Layer 2 protocol. UDLD performs tasks that Layer 1  mechanisms, such\n  as auto negotiation, cannot perform. When UDLD and auto-negotiation\n  are enabled, both Layer 1 and Layer 2 detections work together to\n  prevent physical and logical unidirectional connections and the\n  malfunctioning of other protocols. Unidirectional links can cause \n  spanning-tree topology loops. UDLD enables devices to detect when a\n  unidirectional link exists and also to shut down the affected\n  interface. UDLD is useful on a fiber ports to prevent  network issues\n  resulting in miswiring at the patch panel causing the link to be in\n  up/up status but the BPDUs are lost.\nWith UDLD enabled, the switch periodically sends UDLD protocol packets\n  to its neighbor and expects the packets to be echoed back before a\n  predetermined timer expires. If the timer  expires, the switch\n  determines the link to be unidirectional and shuts down the port. If\n  messages are not received within the timeout interval (45 seconds),\n  the port is disabled. The messages are sent out every default\n  interval, which is 15 seconds.\nThe 45 seconds it takes to detect a unidirectional link and errdisable\n  the port is less than the 50 seconds it would take for STP to\n  transition the port to a Forwarding state, which is based on 20\n  seconds for Max Age + 30 seconds for Listening and Learning. This\n  prevents a loop that would otherwise be caused if STP transitioned the\n  port into the Forwarding state because of a lack of received BPDUs.\n\nSo in summary, yes they can be run together and on fibre links they should be run together.\n", "documentation - Documenting Knowledge": "\nWe use the following tools for different types of documentation:\n\nRackTables - Holds physical rack layouts, cabling, asset tracking, IPAM (IP address management), and change logs.\nRancid - Automatically backs up all configuration changes in to SVN from all of our switches, routers and firewalls. This provides automatic documentation and tracking on changes.\nMediaWiki - All code snippets, procedures, and detailed customer information is logged in wiki form as it's easy to edit for all while providing good version history.\nGitHub - All large configuration sets (eg for Nagios or Bacula) are stored in private repositories in GitHub. We moved to Git from SVN around a year ago as it provides far superior tracking and delegated maintainership.\n\n", "bgp - Better Enterprise Multihoming": "\nYes, you did hit the nail on the head.\nYou will get asymmetry in the improved design, but asymmetry is a fact of life on the Internet, and there's really no good reason to expect symmetric routing of traffic to/from.  Shoot, the whole concept of packet routing is that separate packets are routed independently of each other and may take different paths, even packets going in the same direction.\nPersonally, I loath PBR.  Its one of those technologies that when I decide that its the best solution to the problem, I stop and take a step back to see if I really understand the real nature of the problem, even back to figuring out what the business problem to be solved is.  When I do so, I almost always find that there is a way to solve the problem without using a technology like that.\nHaving full Internet routes in your routers will take some getting used to, but once you get used to it, it is indeed very easy to understand and troubleshoot.  Certainly there are fewer \"moving parts\" of different protocols to worry about.\nYou don't want to have full Internet routes in your OSPF database, so you'll want to advertise a default via OSPF into the interior of your network (or perhaps static default...personally I prefer default in OSPF).  That will move traffic towards the BGP speaking Internet routers which can make the more fully informed decision of having the full Internet routes.\nThat will give you close to \"destination based best path\".  There will still be cases where the traffic will do things you don't quite expect, so you'll want to get familiar with the BGP route selection process.\n", "VPN's in cloud hosting/dedicated server environments, IPSec tunnels vs tinc": "\nNot sure about tinc but IPSEC is almost mandatory. No serious business would trust PPTP. \nNot sure how IPSEC affects routing. A tunnel is a tunnel is a tunnel regardless of the encryption. You'll be running into the same issues re: split tunnel or not, getting customers to understand the concept / oh look a particular customer's LAN IP clashes with the VPN pool you've picked, etc.\nSounds like you're aiming at SME market (individual servers, direct login etc.) so that rules out more sophisticated solutions, but I'll list two possible approaches anyway\n\nsome kind of VPN concentrator that allows profiles. All customers login to VPN concentrator then depending on their profile/group/whatever vendor teminology, get permissions to use protocol X to IP Y (ie their own server). \nCisco ASR1000V virtual routers - each customer gets one, you can then run direct IPSEC tunnels (with VTIs so makes routing appear easy)  or even direct MPLS back to the customers so the router appears as just another branch in their topology, then allocate your VNICs VLANs etc. on the inside so they get a nice virtual 'branch'. \na smaller scale version of the above, we've used monowall to great effect for this purpose (i.e. each customer gets a layer 3 virtual device that acts as a router/firewall, they VPN into this device and get access to their VLANs only), however then each router/firewall needs their own public IP address. \n\nRe: your current approach, you do realise then each server needs a public IP or you have a complicated and convoluted system of NATs where each customer's VPN path gets allocated a single port or similar.\nI'd recommend getting a full time networker in to look over any design / proposal you have, it sounds like you're coming at it from a server background.\n", "What is the purpose of BGP TTL security?": "\nBGP TTL security makes your router only accept packets that have a very high TTL number, typically 254. Since TTL is decremented every time a packet is routed, configuring this feature on both neighbors ensures that only a directly connected neighbor router could have sent you this packet.\n", "juniper - Can I see the pending (commit at) changes on a JunOS box?": "\nI think, you can use show | compare from configuration mode.\n", "cisco - Wireless Probe Request Forwarding Best Practices?": "\nFrom my own experience, there are no caveats in disabling the filters.\nTo be honest, if there were an alarming amount of probe data coming from unknown/unassociated SSIDs, I'd be more concerned about the rogue SSIDs popping up in the vicinity of your WLAN, and the interference they would cause, as a posed to the increase in probe data.\nIt will definitely increase accuracy on location, but don't expect it to magically turn a low density location deployment into a <5 meter accurate one. (although, I don't know the physics behind this yet, or the actual gains from doing this) If you're particularly worried, just keep an eye on the bandwidth of the tunnels going back to the controller. (unless you have a 3850 already)\n", "cisco - Mac-flap due to roaming clients on wireless": "\nIf your APs are just bridging clients from the wireless right onto your wired network, then you're going to see this from time to time. Clients will appear from different ports as they re-associate to other APs/cells in the ESSID.\nI'm presuming you're talking about Cisco IOS here, based on the term \"MACFLAP\", which appears in their log messages when this happens.\nFor example: \"%SW_MATM-4-MACFLAP_NOTIF: Host 0011.2233.4455 in vlan 123 is flapping between port Gi1/1 and port Gi1/2\"\nWhat this means is that the switch is having to \"re-learn\" an Ethernet MAC address out of a different port than what is cached in the hardware forwarding table. This takes a little CPU time for each event, and having it happen more than couple times in a row will cause that MACFLAP message to get logged as more and more CPU time is consumed.\nHowever, this should not cause the entire table to be flushed or cleared. Just the entries for the flapping source MAC address should be getting affected.\nNow, in your case, if this is an infrequent message and it's just wireless clients moving from place to place, I wouldn't worry about this too much.\nTo prevent this, some centralized wireless client termination would be needed. This way, frames would pop out onto the wired VLAN in a consistent place.\nHowever, if this is happening frequently for many MAC addresses, it could be indicative of a Layer 2 loop which will definitely need some investigation. :p\n", "ethernet - When to choose fiber instead of twisted pair (copper)": "\nThere are a fairly large number of factors to consider and it is also important to accept that not all fiber is the same just like not all twisted pair is the same.  Here are a few things that occur to me.  Of course these may vary depending on environment.\nFiber:  Much longer max distances, depending on specification and throughput.  No electromagnetic interference. Note however that fiber comes in a large number of grades and planning for the future may be somewhat more complex.\nCopper: Shorter max distances per link.  Susceptible to electromagnetic interference.  Fewer number of grades/variations (but still mind these!) meaning fewer accidents when the rollout team grabs the wrong spool (see below for a funny story).  Supports power over ethernet.\nFunny story:  A particular county in a Western state runs a fiber network that began as a control system for their hydroelectric dams.  As time went on they found they didn't need nearly as much fiber as was laid for this and so they separated out many of the strands and used it to build a county-wide network linking homes and businesses to ISP's and telco's.  Of course single mode fiber was used for longer transmissions and multi-mode for short runs.\nSo when they were running the longer runs to connect towns and cities with this new network, the team that ran the fiber grabbed the wrong spool, and ran multi-mode fiber on all these long distance links.  The team was quite unhappy when they found out they would have to re-run all the fiber again!  Moral of the story:  be very careful about ensuring that everyone knows which grades of fiber go where....\n", "multicast - OSPF over vPC on Nexus7k": "\nAs the firewalls aren't part of a vPC they won't be part of the normal vPC loop prevention.\nThe loop prevention only states that a packet cannot ingress on the peer link if it is destined to go out another vPC enabled port.\nNot too sure on the multicast front as we don't use it in our environment and I haven't really looked into its behaviour on the 7K's.\nUsually if you are running a routing protocol down on the switch stack the recommended design would be to not have it as a member of a vPC and just use OSPF to give you the same advantages that vPC gives you at L2.\n", "ethernet - How is the root bridge elected in STP?": "\nNot sure how much you know about switching and spanning tree but basically when starting out all switches claim that they are the root. All switches send BPDUs (Bridge Protocol Data Unit) which contain a priority and the BID (Bridge ID). \nThe BID is 8 bytes long. 6 bytes is used for the MAC address of the bridge. 12 bits is used to indicate the VLAN, this is called extended system ID. 4 bits are used to set the priority. Lower priority means it is preferred compared to a higher. The priority is set in multiples of 4096.\nIf there is a tie in priority then the lowest MAC address will determine which bridge becomes the root.\nTo select the path to the root the cost to the root is calculated. As the BPDU travels from the root downstream the cost is increased INBOUND. 802.1D-1998 (legacy STP) had a cost of 19 for a FastEthernet interface. The newer standard 802.1D-2004 defines a cost of 200000 for FastEthernet.\nIf there is a tie in cost then choose the BPDU that came from the switch with lowest BID. If that is a tie as well (multiple links to same switch) port ID comes into play. The port ID is from the upstream switch as well and consists of a port priority and port ID which identifies the interface. The default port priority is 128.\nThere is a lot to spanning tree but these are the basic steps.\n", "IPv6 address space layout best practices": "\nThe layout that we are using for our rollout is:\n\n/48 per customer\n/56 per customer site (as a subnet of the other /48)\n/126 for all point-to-point links in the core, these are all subnets of a /48 used for all core links\n\nThese sizes are mostly taken from the RIPE advisory here.\n", "security - How do you prevent rogue wireless access points on a network?": "\nLucas's answer above is a bit of a starting point.    There are however two or three other things that must be considered.  These end up being somewhat outside the scope of network engineering, but certainly have impacts for network engineering and security so here they go.\n\nYou probably want some way of preventing wireless cards in company laptops from being switched into ad hoc mode.  Assuming the laptops are running Windows, you probably want to use a GPO to set to infrastructure mode only.  For Linux, it is harder to fully restrict, but there are ways to do this too.\nEnforcing IPSec is also a good idea, particularly with good key management and trusted enforcement.  For example if you can go to X509 certs for key management this can keep unauthorized devices from communicating with the rest of your network directly.  Consider key management as a core part of the infrastructure here.  If you use a proxy server you may even be able to block unauthorized devices from accessing the internet.\nNote the limitations of your efforts.  None of these prevents a person from setting up an unsecured wireless access point connected to a USB NIC, for sole purposes of communicating with their computer, especially if the SSID is hidden (i.e. not broadcast).\n\nNot sure how to further contain problems or if further paranoia is well past the point of insufficient returns.....\n", "ipv6 - Why is fe80::/10 reserved for link local addresses when fe80::/64 is actually used?": "\nI think the link-local scope was set to /10 simply to \"fit in\" better with the other scopes, e.g. site-local (before it was replaced with unique local).\nInitially I had thought maybe it was to allow the use of many link-local networks on the same link, but RFC 4291 explicitly states that only fe80::/64 may be used.\n", "fiber - Raman amplifier vs EDFA, what is the tradeoff?": "\nI think another reason someone might use one over the other is just cost.\nEDFA is usually cheaper from what I've seen, in comparison to RAMAN.\nFrom MRV website: \"They [RAMAN] also have a better optical signal-to-noise ratio than EDFA amplifiers.\" http://www.mrv.com/product/MRV-FD-OARM/\n", "Can I use a Catalyst 2960-S for iSCSI?": "\nGiven that the Cat2960-S is a desktop/access switch, with very, very small buffers, you would likely experience a lot of output drops.  A datacenter switch, such as a 4948E, would be a better choice for an iSCSI application.  \nTo understand the reasoning behind this, you have to remember that an ethernet switch is either transmitting, or not transmitting on a specific port.  If traffic arrives on port 1 for port 2, and port 3 is already sending traffic to port 2, the traffic from port 1 has to be buffered until there's a gap in the traffic from 3 to 2.  If the buffer fills, additional traffic will be dropped.  The term \"microburst\" is used to reference traffic that, over time, is well below the limit for the interface, but occasionally bursts to cause output drops.\nI am not as familiar with the 2960-S platform, but enabling QoS (without extensive tuning, see comments below) on it would probably be a bad idea; that would actually increase the number of output drops.  Enabling QoS splits your very small buffers into 4 even smaller buffers, and most traffic will hit only one of them.\n", "cisco catalyst - What is the difference between all the switching modes on 6500/7600?": "\n\"Bus\" is connection to 16Gbit/s bus that is common to legacy 6500 architecture.\nCrossbar and dCEF mean the connection from the LC (line card) is using switch fabric (separate SFM module for Sup2, integrated switch fabric chip on Sup720 and Sup2T).\nCrossbar means the connection is from the line card that doesn't have distributed processing capabilities (no DFC on it, CFC is installed), while dCEF means there's distributed CEF mode running on line card using DFC.\n", "cisco - Protocols: EIGRP vs OSPF": "\nEIGRP is now an IETF draft so it's no longer proprietary. See https://datatracker.ietf.org/doc/html/draft-savage-eigrp-01\nIf we look at EIGRP with default settings and OSPF with default settings and there are multiple loop free paths to a destination then EIGRP will converge much faster because it keeps what are called feasible successors in it's topology database. These are basically loop free alternatives to the best path. EIGRP also has summarization at any point in the network. It also has stub feature which is useful when you don't want to use a router for transit. Commonly deployed in DMVPNS. EIGRP is also less confusing than OSPF because it does not have different network types and EIGRP is easier to deploy in hub and spoke scenarios.\nEIGRP uses a flat network without areas, this can both be an advantage and disadvantage.\nOSPF is obviously an open standard so it's the logical choice if you have multiple vendors. It can perform well but it requires that you tweak SPF timers because by default in IOS there is a 5 second wait before running the SPF algorithm. OSPF uses areas which means you can segment the network more logically. OSPF can only summarize between areas. OSPF is link state so it has a better view of the entire network than EIGRP before it runs the SPF algorithm. Network administrators will usually be more comfortable with OSPF because it's more commonly deployed.\nBoth protocols have advantages and disadvantages. But the common answer that EIGRP should be discarded because being proprietary is not entirely true any longer.\n", "cisco - Why does this router fail to use multiple, equal-cost routes from OSPF?": "\nMy first thought would be that OSPF is thinking it's the same LSA instead of simply the same prefix. I don't know much about brocade, but with the LSA outputs from the Cisco box I could probably tell you more. \nIn general, for Cisco, if the routes are equal in the protocol they will both be presented to the routing table. The routing table, will, by default, install both paths and do ECMP. If the metrics or protocols differ, they will not ECMP. This would also apply to different LSAs for the same prefix.\n", "chapr 40gb optics/uplinks? - Ntwork Enginring Stack Exchang": "\nFluxLight also has a fairly wide selection of SFP, SFP+ and QSFP optical transceivers. We have used them for about 5 years now and have only encountered one bad module. We contacted FluxLight and they cross-shipped a new module for free. I highly recommend them. Their modules also identify properly in various vendor chassis, so HP and Cisco equipment should see the module without it complaining or shutting down the interface.\n", "How is the payload distributed across Multilink PPP connections": "\nOi...lemme dredge up those long-unused neurons to remember how Multilink PPP works.\nDuring the LCP phase when the first link is brought up during a non-multilink PPP session, the two sides negotiate the MRU (Maximum Receive Unit) for each direction of the link...basically each side tells the other how big of a packet it can handle being sent to it.\nWith Multilink PPP, they negotiate that, but they also negotiate, when the first link is brought up, an MRRU, or Maximum Reconstructed Receive Unit.\nBecause Multilink PPP added extra frame header space, the creators were concerned about Path MTU problems, so they decided that Multilink would be able to fragment and reassemble packets on either end of the Multilink PPP session.\nSo, yes, unlike Ethernet bonding, its not just a matter of balancing frames across the multiple links...the frames can actually be fragmented and reassembled.  This can cause a jump in latency and jitter.\nOn T-1's you should be able to configure each side with a significantly larger MRU and MRRU than any packets that would likely need to cross the link, and if the MRU is as large as, or larger than the MRRU, then you shouldn't see any fragmentation and reassembly occuring.  Hopefully this will get the latency and jitter under control and help out your VoIP behavior.  You will likely need to adjust this configuration on both sides of the links, though, as each direction is negotiated independently.\nIn general, I wouldn't expect VoIP packets to need to be fragmented, though...they tend to not be big enough to need that.  Worth a shot to check your MRU and MRRU sizes on the links and the Multilink session, maybe they're way out of whack and causing problems.\n", "How can I verify QoS DSCP marking on a Cisco Catalyst 4500E?": "\nTry this:\nshow platform hardware interface ten1/1/31 statistics\nThat should show you input bytes by CoS.\nThe 4500 is a very different beast than the 3560/3750 for qos config and monitoring.  Some other useful verification commands are:\nshow platform hardware qos interface foo X/Y\nshows queue lengths and flow counts\nshow interface foo X/Y counter detail\nshows interface egress packets by queue, queue drops and DBL drops.\nshow policy-map interface foo X/Y\nMostly useful if you are doing custom policy maps \nshow interface foo X/Y capabilities\nIf you want to know what the number and type of queues are available on a particular interface\nshow qos maps\nTo show the DSCP-CoS mappings\n", "bgp - Only One Path in the Looking Glass": "\nBGP always only advertises the best path onward to its peers.  This is true for eBGP, iBGP, route reflection (which is merely a special case of iBGP), and any other way you might use BGP.\nBut, yes, you are correct, if you are sending advertisements to providers A and B, and I have connections and BGP sessions also with providers A and B, then I should see both paths in my BGP tables.  I may not see multiple routes created in my routing tables...that's a question of the configuration of my devices and whether I allow multiple routes of equal AS Path lengths to be inserted into the routing table...typically BGP will only install a single route.  The BGP tables, though, should show advertisements from both providers.\nActually...even if I'm peering with providers B and C, or even C and D, I should still see multiple paths in my BGP tables as long as you are reachable through B, C, and D.  All other things being equal, my devices should pick B because that should be the shortest AS PATH, but I would still see the paths with the longer AS PATHs from C and D.  Now, perhaps C and D have both decided that the path through A is better than the path through B, then the paths that I would see would have AS PATHs of \"A C\" and \"A D\", so it would appear as if you weren't connected to B at all, but if the path through A went away, then the path through B would get propagated onward through C and D.\nIf you can give some specifics...maybe even your blocks that you're advertising if you're willing to share that....others can take a look at what we're seeing and perhaps give some more specific guidance.\n", "cos - QoS on HP Procurve 2520 and 3800 switches": "\nIf my memory serves, the older Procurve switches used to accept and forward any CoS/DSCP markings they received.  You couldn't modify them unless you were on a 5400xl or better switch.\nIt looks like the 2520 and the 3800 allow you to modify whether or not you're using CoS or DiffServ TOS for classification.  The top level command you want is qos type-of-service.  The rest of the commands should be contained under that.  If they aren't available, you may not be able to modify the QoS settings on that specific platform.\n", "ethernet - How sensitive is TDMoE to BER?": "\nTake a look at https://www.rfc-editor.org/rfc/rfc4553, generally speaking while the transport should provide error information, you'll loose information, there's no way to retransmit something that was sent. The transport itself (CEoIP in Cisco speak, or more generally - L2VPN with TDM transport over it) will be fine as long signalization will work between end nodes, your application however, running it's data over the TDM may encounter errors.\nThat's why it's critical for the nodes to be able to properly time the transport. If you'll be providing the transport yourself this is also different discussion that if you're asking for transport - for typical ME service, you'll get typical Ethernet BER assurance.\n", "cos - TDMoE and QoS considerations": "\nCan you provide some more information on the equipment used and how much bandwidth you have?\nWill your voice equipment mark packets itself or do you need to take care of it? Usually CoS 5 and/or DSCP EF is used to carry voice payload. Voice should be sent in some form of LLQ (Low Latency Queue).\nIf you give us some more specifics we could help with providing a policy for you.\n", "In a multi-tenant environment what should be done to make your switchports silent on Cisco and Juniper switches?": "\nYou can check the Amsterdam Internet Exchange's Config Guide for hints on how to silence switches from a variety of vendors.\nIn my experience there are vendors whose software is so bad that their equipment is never silent, for example they ARP out every interface when they boot, or send out some upon a link up event on a port. Juniper, Cisco, Brocade can be muffled with varying degrees of persuasion, Extreme loops everything during EAPS transitions.\nSome things to disable/consider:\n\nDiscovery protocols (LLDP, CDP, FDP, 'dynamic-vlan-discovery')\nVTP, DTP\nSTP (disable for the VLAN a port is in)\nEthernet keepalives or loop frames (useless on full-duplex media)\nWeird stuff like DECnet MOP (topic of another question a few days ago)\nHave a separate management VLAN for the switch's own IP address\nYou'll want to disable PIM snooping on a Cisco as this breaks IPv6.\n\n", "juniper ex - Migrating from VLANs to MPLS on JunOS": "\nThis looks like a simple layer two domain. MPLS is typically used only as backbone or distribution transit, that is, among routers. To implement MPLS, you would need to push the VLAN interfaces down to the access switches (and thus split Host5 into a new network or move it to switch 2) and run MPLS among the multilayer switches. Although, this wouldn't bring much benefit to the topology shown.\n", "juniper mx - Sub-interfaces vs. Interfaces": "\nIf you mean using a switch to break out your 10g router port into individual VLANs and then using subinterfaces to route each port individually, I don't see how that is really wrong. Yes you'll lose the immediate failover when the physical port goes down, but as they say that's the \"cost of doing business\". Router ports are expensive compared to switch ports so I assume that is a business decision.\n", "cisco nexus 1000v - Extending MPLS in to vSwitches": "\nAt this moment you cannot terminate MPLS VPNs on vSwith/Nexus1000V, so the best options are vlans. Somewhere on PE you must have interfaces in separated VRFs. VRFs will be mapped to VLANs on PE. Use trunks to connect to N1k.\nWith VPLS idea is the same, but you can move virtual machines between PEs.\nThere is one great article about implementation of MPLS VPN in enterprise (practice) done by Himawan Narugho (without vSwithes, but the idea is the same). http://www.himawan.nu/2006/06/enterprise-mpls-vpn-howto.html \n", "How can I generate traffic on a Cisco ASA?": "\n(Just noticed your comment about Raspberrys, and I want to follow up)\nWe have a large MPLS network where we need to measure bandwith and jitter across sites to make sure that our most sensitive applications isn't hurting.\nOne great way of doing this is, like you mentioned, deploying Raspberrys. They are small enough, so you can install them nearly anywhere. One great toolf for testing bandwith/jitter is iperf, which you then can set up to run as a (filtered!) daemon on each PI. Then just initiate tests from a central management station.\n", "What causes total output drops on a cisco switch interface?": "\nUnless someone is clearing counters you should never see any odometer-type counters (those that increment based on a packet action) decrease, they should always increase.  That part sounds like a bug.\nAs far as what causes output drops in particular, there are so many different causes that it's very difficult to pinpoint it exactly.  Sometimes there is congestion inside the switch's backplane and those might show up as output drops on the outgoing interface.  In rare circumstances you can also get microbursts that don't show up when polled at 1 minute intervals that quickly overload the interface, but then drop back down very quickly.  I would suggest grabbing the SNMP OID for output drops and then graphing that and see how it corresponds to the CLI counter.\nGenerally speaking, you don't want any output drops as they indicate a packet that did not make it to its destination.  But, if you're running your links hot (which you say you're not) they're unavoidable to an extent, mostly due to interior switch buffering, etc.\n", "cisco - Routing with seperate WAN link for backups": "\nAssuming the two NICs on the servers are used to separate production and backup traffic, use VRFs. That's the best traffic separation technique there is. For more scalability (not sure you need it based on the diagram), throw full-blown MPLS/VPN in the mix, it runs on both Cat 6500 and ASRs.\n", "ber - Emulate Ethernet frame loss for testing purposes": "\nThere are tools like WANem which allow you to simulate WAN links by artificially causing arbitrary delay and loss rates on a link. WANem works at a relatively high-level; you won't see physical errors on the link but packets will be dropped. It can be deployed on commodity hardware.\nI know there are a few other tools which serve similar purposes but I can't recall the names of any at the moment.\n", "cisco - What are the alternatives to OTV for stretching a layer 2 network across 2 datacenters?": "\nVPLS, AToM, and L2TP are also additional ways to glue ports together that land on distant routers.  Some of them require MPLS on all the in-between routers, but L2TP(v3 in particular) does not require anything besides ip routing on the intermediary routers.  Basically, they glue together two remote router ports, and can usually pass spanning tree, etc, since they're not acting as switches in this regard.\n", "What is the proper way to config a Site to Site IPSEC VPN and a Remote Access VLAN on the same external interface? Cisco 891 ISR": "\nTaking a shot in the dark here because there are a lot of variables you didn't mention.  Please update the question to include the specific technologies you are using, your currnet config, and the error you are getting.  But if you are using for instance, DMVPN + EZVPN, you will probably have to use keyrings and multiple ISAKMP profiles.  Since you point to phase 1 issues I would check that.  The following links give reference configs for DMVPN and EZVPN and L2L+EZVPN. You should be able to modify to suit your needs.\nHere's a ISAKMP Profile reference for some lunchtime reading.\n", "How to log out of state sessions on Juniper SRX platform?": "\nPackets should be classified regardless of the TCP handshake being watched or not. If there isn't a session defined for that flow (fast path) a new one should be created (first path).\nDo you have any screen configured?? Maybe it's the screen that's dropping the traffic.\nMore details on Troubleshooting Traffic Flows and Session Establishment\nMaybe you can configure a log file with traceoptions:\nsecurity {\n  flow {\n        traceoptions {\n            file trace_file;\n            flag basic-datapath;\n            packet-filter Match {\n                protocol tcp;\n                source-prefix <source-ip>;\n                destination-prefix <dest-ip>;\n                destination-port <tcp-port>;\n            }\n        }\n    }\n}\n\nBeware of these traces, since it can cause high CPU load on the SRX if it's carrying a lot of traffic. Limit the filter as much as possible and run it during a maintenance window.\n", "ecmp - Two Cisco ASA 5525-X as Internet Gateways without Layer 2": "\nI think you have two options:\n\nDesignate one Internet circuit as the primary and the other as failover\nImplement \"NAT outside\" (public space) routing between the sites with the firewalls\n\nThe first option ensures traffic is always going through either one firewall or the other so that NAT doesn't break.\nThe second option allows you to load balance across both circuits: One equal-cost default route from each circuit, with your local public prefix(es) advertised out both circuits. (This option ignores how connectivity between the sites is accomplished.)\n", "Is TCP maximum segment size (MSS) \"clamping\" compatible with IPv6?": "\nWell technically fragmentation can happen in IPv6; This is the wikipedia article on it.\nThis Juniper page is a bit old but it shows that you can clamp an MSS for TCP over IPv6 on Junos the same as you would in IPv4 using the same command, tcp mss. The same is shown in this article for Cisco IOS 15, using the traditional ip tcp adjust-mss command.\nSo you can configure MSS clamping if PMTUD isn't working as it should be in a part of your network, otherwise, you should be ensuring that you are aiding the smoothing running of PTMUD across your networking so that MSS clamping isn't required (I understand this isn't always under your control).\nUpdate\nHere is a link to a newer Junos article for Junos 10x rather than 9, I can't find one for 11 and I'm not in front of 11 right now, but I expect it will be the same.\n", "Can I run FCoE over Cisco Catalyst 5500?": "\nMy knee jerk reaction to this would be to say \"don't do it.\" Mainly because these switches would not support data center bridging. FCoE is not like iSCSI. FC is a bus and assumes it is lossless. Ethernet, as you know, is lossy. DCB allows Ethernet to act lossless and transport FCoE frames.\n", "bgp - RPKI in th Entrpris - Ntwork Enginring Stack Exchang": "\nRPKI is two-way action. First of all, it would be nice if you could sign your own prefixes, so nobody will be able to hijack them somewhere in the other part of the internet (if his upstreams support and validate prefix advertisements using RPKI). The more end-sites will use RPKI, the better value will have using RPKI to various SPs and more SPs will do it.\nOn the SP side, it would be beneficial to push your upstreams to implement RPKI at the same time. \n", "Migration from IPv4 to IPv6 strategies": "\nI don't have a full strategy, but here's the rough way I did it at $JOB[-1]:\n\nGet an IPv6 block, either from your existing carrier, or an RIR\nYou might also want to mark a fc00::/7 (Unique local) block for fully internal subnets if you have an ISP block and may ever need to renumber\nDecide on your v6 IGP, IS-IS is still a safer option than OSPFv3, but much kit won't do IS-IS\nBring up v6 on your core kit, from internet edge through to DC core switches\nBring up v6 transit, if you have to a BGP tunnel from he.net can work while waiting for ISP's stuck in the last decade (remember to enable v6 on your iBGP mesh if you have one)\nCreate v6 infrastructure services, mostly DNS, v4 accessible is fine here\nEnable v6 on a single server net (you'd probably have a default deny firewall here)\nTest the v6 connectivity to the world, will it break things?\nTurn up v6 on a second server net for redundency\nBring up a DHCPv6 server if you want to use it\nBring up v6 on a single access network (IT staff is a good choice here)\nTest. Ensure nothing breaks\nBring up v6 on remaining server networks\nAdd a v6 namesever for your domains, and a v6 DNS entry for an MX (one, or all but one are good choices for what to dual-stack)\n\nNow, when bringing up new services or upgrading them you can test if they work on v6, and add the appropriate DNS records (almost all web services will \"just work\"), eventually you might start looking for services remaining on v4 and fix them, but there's no hurry for that.\n", "security - How do you define an IOS zone-based firewall policy to inspect \"any\"?": "\nThat should work. Either that or use something like:\nR1(config)#ip access-list extended MATCH-ALL\nR1(config-ext-nacl)#permit ip any any\nR1(config-ext-nacl)#class-map type inspect match-any CM_MATCH-ALL\nR1(config-cmap)#match access-group name MATCH-ALL\nR1(config-cmap)#policy-map type inspect PM_IN->OUT\nR1(config-pmap)#class CM_MATCH-ALL\nR1(config-pmap-c)#inspect \n%No specific protocol configured in class CM_MATCH-ALL for inspection. All protocols will    be inspected\n\nIf no specific protocol is matched in the class-map then it will match all protocols.\n", "cisco - Mitigating bad/malicious IPv6 RA announcements": "\nThis is from the configuration guide for IOS 15.2T. The feature is called RA guard. Basically you create a policy and define if the port that this will applied to leads to a host or to a router. Then you can be more specific and match on hop limit, managed-config-flag and match on an ACL with a range where the trusted sources should come from. You can also make the port trusted and not do any further checks.\nIn some ways this is very similar to DHCP snooping. The basic steps are:\nipv6 nd raguard policy RA-PROTECT\ndevice-role host\ninterface x/x\nipv6 nd raguard attach-policy RA-PROTECT\n\nThen you can use this command to verify:\nshow ipv6 nd raguard policy\n\nIf your switches supports the feature then it makes sense to catch the RAs as early as possible. I don't think it's being to paranoid. The same could be said for DHCP. Sometimes it's not even malicious users, it's just a case of people not knowing better or connecting crappy devices to the network.\n", "best practices - Selecting IPv6 Unique Local Addresses (ie, choosing least-sig 40 bits)": "\nIts always best to stick to the relevant RFC when possible. In this case, your two options aren't mutually exclusive. SIXXS' generator should actually generate you a prefix based on RFC4193's algorithm.\nSo you would just generate your prefix using SIXXS' tool (or another one you find), and if you feel like it, register it with SIXXS.\n", "Is GRE necessary for an IP-only tunnel?": "\nEither method will work. I personally prefer GRE, but there should be no practical difference between the two for your use case. (GRE can transport other layer3 protocols than just IP, though.)\nThe only thing to really keep in mind is that GRE incurs a tiny bit of extra overhead as opposed to IPinIP.\n", "Prevent Trombone Routing with L2 DCI": "\nYou are correct there is something called FHRP isolation, where you block the messages of your FHRP between the Datacenter and in turn create a Dual active gateway's, one in each DC. The nodes in each DC can egress L3 in it's own DC.\nFrom my point of view and experience, I recommend everyone doing this to try to minimize the tromboning of traffic between sites. Makes sense that traffic f.ex between vlan in one DC don\u00b4t need to traverse to another DC to egress it's L3.\nNow in Cisco world you see this FHRP isolation accompanied with OTV (basically a way to send L2 across L3 without expanding the broadcast domain). I have seen some documentation on doing this with Port ACL's, mac acl on other platforms but can\u00b4t find it any more.\nhttp://www.cisco.com/en/US/docs/solutions/Enterprise/Data_Center/DCI/whitepaper/DCI_1.html#wp1186074\nhttp://www.cisco.com/en/US/docs/solutions/Enterprise/Data_Center/DCI/4.0/EMC/EMC_2.html#wp1261581\n", "architecture - OSPF link cost design": "\nNot sure this is a question that can get a really good answer but it's important to know the preference order of OSPF:\nintra area routes\ninter area routes\nexternal type 1\nexternal type 2\nNSSA type 1\nNSSA type 2\n\nSo in some cases adjusting the metric has no effect on traffic engineering. It's important to change the auto-cost reference-bandwidth on Cisco devices so that there is a difference in cost between higher speed interfaces. By default this might be set to 100 Mbit. This would mean that 100 Mbit, gig and 10 gig interfaces would have the same cost.\nFor faster convergence it's good to have equal cost routes (ECMP) so if you are peering iBGP to a loopback you two paths and if one goes down the impact should not be that big.\nI used to work for a large ISP and they set all the costs manually on the transit interfaces. The basic design was to choose the path that had the fewest core hops. The network was designed with access, distribution and core levels with dual links between each level. If there are multiple paths with same number of core hops then choose the path with the lowest delay.\nSo based on this they designed the paths and set costs on the interfaces. This might require a lot of planning. The bad thing about link state protocols is that they only use the bandwidth of the interface to calculate the metric. So you could have a case where the metric is the same but the distance is significantly longer via one of the paths.\nWe are talking quite large networks before this would have an impact though.\nSo I would design it based on bandwidth, number of devices to go through, physical distance (delay) and of course money could be a factor if one path is more expensive than the other.\n", "powerconnect - Changing the Stacking Configuration on four Dell M6220 blade switches": "\nThis can be done, see the page 15 of the Dell white paper on the subject here:\nhttp://www.dell.com/downloads/global/products/pwcnt/en/pwcnt_stacking_switches.pdf\nSpecifically it says:\n\nMerging Two Operational Stacks\nThe recommended procedure for merging two operational stacks is as\n  follows:\n\nAlways power off all units in one stack before connecting to another stack.\nAdd the units as a group by unplugging one stacking cable in the operational stack and physically connecting all unpowered units.\nCompletely cable the stacking connections, making sure the redundant link is also in place.\n\nTwo operational stacks can also be merged by reconnecting stack cables\n  without powering down units in either stack. Connecting a powered up\n  standalone unit to an existing stack leads to same behavior as when\n  merging two operational stacks. In such cases, Manager reelection is\n  done and the Manager with the higher MAC address wins the election.\n  The losing stack manager resets itself and all its member units. After\n  the reset, all the losing stack members join the winning stack to form\n  a single stack. The winning stack remains functional through the merge\n  process. If the stack merge is performed in this way, then it is\n  strongly recommended that the user set the admin management preference\n  of the desired winner stack manager to a higher value than the stack\n  manager that should lose the election.\n\nAlso, in your above proposed cabling you are not completing a loop with your stacking cables. You should always aim to do this, even though it is not a requirement. See page 7 of the Dell m6220 stacking use case:\nhttp://i.dell.com/sites/content/business/solutions/whitepapers/zh/Documents/powerconnect-m6220-switch_cn.pdf\n\nCabling: \nM6220 switches should be stacked together by connecting a\n  stacking cable from stack port xg2 of one switch to stack port xg1 of\n  the next sw itch. The stacking cable is included with the stacking\n  module. Stack port xg2 of the fi nal switch in the stack should be\n  connected to stack port xg1 of the first switch, completing the stack\n  loop. A loop topology is not strictly required for a stack but it is\n  recommended, as it is the most robust stacking topology and has seen\n  the most time in production use.\n\n", "wireless - configuring IBSS WLANs": "\nOn Linux for all cards that support it (used to be all, many these days don't) you simply run:\niwconfig wlan0 mode Ad-Hoc\niwconfig wlan0 essid Foo\niwconfig wlan0 channel 6\n\nYou can do WEP, and apparently even TKIP-based WPA.\nOnce configured you can treat it like a classic ethernet bus (Think Coax or 10baseT hubs), with one big caveat, the \"hidden node problem\", in ad-hoc there's no repeaters so if two nodes can't make direct radio contact with each other they can't talk (at that layer, you can of course bridge or route at a higher level).\n", "dci - Questions about datacenter switching and TRILL": "\nThere are three TRILL-ish implementations out there that I'm aware of:\n\nFabricPath from Cisco - correct routing protocol (IS-IS), wrong encap format;\nVCS Fabric from Brocade - correct encap format, wrong routing protocol (FSPF);\nTRILL from HP - seems to be OK\n\nSo there is at the moment ZERO inter-vendor interoperability.\nAnd as others said - if someone held a gun to my head and told me to do L2 DCI, I would try to use OTV first (it's also available on ASR 1K), failing that, TRILL would be second least horrible option.\n", "I'm setting up a Cisco CCNA lab, what equipment would you recommend?": "\nCCNA requires the student to be familiar with the IOS operating system, this makes the Cisco 2948 unusable for a CCNA lab as it runs Catalyst OS (CatOS) and there is no way to upgrade the operating system from CatOS to IOS.  So while it may have  more features, for a pure CCNA lab it's not really usable.\nPersonally I would also recommend the following equipment (if you are not opting for GNS3):\n\n2 x Cisco 2610XM Advanced  Fast Ethernet 128Mb Dram / 32mb flash IOS 12.4\nAdv Security\nCisco 1760 Fast Ethernet 64Mb Dram / 32mb flash IOS 12.4 Adv Security\n3 x WIC-1T for the two 2600 routers\n2 x Cisco ws2950\n\n", "Cisco GET VPN Configuration - Best Practices/Can the loopback be used?": "\nIf you are planning to implement multiple links in the same GDOI group on the GMs, best practice would be to use a loopback interface as the crypto source.  The reason being that otherwise the key servers will see each interface as a separate entry and the router will receive multiple rekeys.  Your second sample config looks good.\nSee section 4.1.2.1.3 of the GETVPN DIG:  http://www.cisco.com/en/US/prod/collateral/vpndevc/ps6525/ps9370/ps7180/GETVPN_DIG_version_1_0_External.pdf\n", "wireless - Sending Cisco NCS/Prime Infrastructure reports without encapsulating them in a zip": "\nI have requested the same thing, and been told that they must be zipped. No real explanation why this must be the case, but there weren't any hints that things were going to change any time soon!\n", "wireless - what to know about DSSS vs OFDM": "\nFrom what I've gathered, the primary differentiation between DSSS and OFDM comes in a congested or constrained RF environment.  Because DSSS is transmitting as many bits as possible all at once, it runs the risk of having some of the transmission disrupted in transit should the RF become less than ideal.  In contrast, OFDM sacrifices a bit of performance to transmit the data in those multiple carrier \"packets\" that allow for reassembly or retransmission in the event of a failure.\nIf I use an extra-large semi truck to haul freight, it works well so long as the highway doesn't have any obstructions (like narrow lanes or short overpasses).  If I break my freight up into a greater number of smaller trucks, I can ensure that some of the freight arrives even if conditions (like a traffic jam) prevent the entire shipment from arriving.\n", "Does RIP to BGP redistribution for an MPLS VPN make sense?": "\nI don't guess there's any real reason it can't work just fine.  You, of course, have the normal loss of information anytime you redistribute from one protocol into another, but there's an argument to be made that you get that when you use network statements as well, so that's kind of a wash.\nThe main benefit that I see in this is that redistribution would give the setup the ability to react more dynamically to what happens in their network than the more static network statements.  The downside would be that that dynamicism (is that a word?) would be harder to keep in control and might end up doing things that you don't want it to do.  Of course you can put filters and route-maps and the like to constrain the redistribution...but then that's kinda like putting the network statements in.\nNot that I would advocate being deceptive in what you're delivering to a customer, but if its fully managed CEs...would they even know the difference?\nAssuming you're only talking about a handful of /24's like your diagram would suggest, I just don't think it makes all that much difference one way or the other.  If you set up the redistribution to only allow the /24s, or set up network statements to advertise /24s...ultimately it ends up pretty much the say, right?\nWhat may be the even bigger question that I would have (tongue-in-cheek), is...who uses RIPv2 in this day and age?!\n", "architecture - Distributed L3 Switching": "\nA lot of the content in this question is very Cisco-ish, let's dial that back and dispel some mythical assumptions.\n1. I need to do Layer 2 at the core\nNot unless that's all your hardware is capable of; you could quite freely have point-to-point (links/portchannels) between everything in your core and bring up OSPF/ISIS adjacencies, this is arguably superior to a large L2 domain at the core since you're now precluded from inflicting L2 loop prevention upon yourself; topology changes are now going to be handled by your IGP. If you need to multipath, ECMP takes the place of things like GLBP.\n2. Traditional DC architecture centralizes routing\nDepends what you mean by \"Tradition\" - IPv4 is \"traditionally\" classful, modern IPv4 is not. In the same vein, a modern datacenter architecture will make the vast majority of non-access links between equipment pass traffic over L3, because from a security and performance standpoint, you want to mimimize the size of your broadcast domains and avoid reliance on L2 loop prevention which tends to impact traffic flow for significantly longer periods than an L3 protocol when a topology change happens (recent development such as SPB and TRILL not withstanding)\n3. Traffic between broadcast/multipoint domains must happen at the Core\nAgain, this is down to the hardware you have; if your distribution layer is capable of L3 forwarding on par with your core and also happens to be the termination point for the particular domains you wish to route traffic between, there's no logical reason to send that traffic up to the core only to have it sent back down.\nSo, with all this in mind, why do large, flat L2 networks remain so pervasive? Because it's \"simple\" and doesn't require too much thought. Setting up multi-area OSPF and ensuring optimum paths throughout the network by configuring link costs appropriately makes for an excellent architecture, but it requires you to think. spinning up a few VLANs, using something like GLBP and letting spanning tree just \"do its thing\" does not. The real WTF however is that a decent L2 setup should have a well-thought out STP configuration just as OSPF should.\n", "wireless - omnidirectional antennas and the dipole antenna": "\nThe dipole antenna is the most common because it is inherently simple and very inexpensive to produce.\nYour example, doesn't make much sense, beause that is exactly what is done with all antennas.  You have a power source (the transmitter) on one end.  The signal is radiated based on the shape of the antenna and any characteristics of the antenna to focus the signal.\nAs to why a dipole emits an \"odd spherical-like shape\" (often referenced as a toroid or doughnut), that is a relatively simple concept.  A dipole antenna is often just a straight piece of wire.  The amount of surface area available directly relates to how much signal is transmitted in any direction.  You have a much larger surface area around the lenght of the wire than you do at the tip or base, allowing much more signal to be radiated from the sides.\n", "wireless - Full-duplex with two antennas": "\nA while back I read several articles about researchers using signal inversion cancellation to achieve full-duplex wireless. With a quick google search I found the below links to similar articles to the ones I read back when.\nTLDR;\nIt's for sure possible...though I think they're using signal inversion cancellation instead of two channels (I.E. two different frequencies). People are working on it. Only a matter of time.\nhttp://sing.stanford.edu/fullduplex/\nhttp://www.computerworld.com/s/article/9219752/Rice_demonstrates_full_duplex_wireless_technology\nI'd love to get a true RF engineers thoughts on this though. I'm by no means an RF guy.\n", "screenos - Is it possible to block IKE from reaching a Netscreen's control plane?": "\nThat should be caught by the default dos-protection-group. No? Do you have, perhaps, 'unset ike dos-protection' ?\nWhat does 'show suspicious-control-flow-detection ike' show?\n", "routing - Distributing static routes across an OSPF area": "\nWhat does the topology look like? How are you doing routing today towards these networks? Or is the router being deployed now? Do you have an OSPF capable router connected to this router that is not running OSPF?\nIf you do then I suggest you redistribute static on this router. Something like:\nip prefix-list static-routes permit 10.0.0.0/24\nip prefix-list static-routes permit 10.0.10.0/24\nip prefix-list static-routes permit 10.0.20.0/24\nroute-map static-allowed permit 10\nmatch ip address prefix-list static-routes\nroute-map static-allowed deny 20\n\nThe explicit deny at the end is not really needed as there is an implicit deny but it makes the logic a bit more clear.\nThen under the OSPF process:\nrouter ospf x\nredistribute static subnets route-map static-allowed\n\n", "What IPv6 prefixes should never be routed?": "\nRFC 6890 section 2.2.3 describe special purpose prefixes for IPv6. Link is here:\nhttps://www.rfc-editor.org/rfc/rfc6890#page-14\nPrefixes to include are:\n               +----------------------+------------------+\n               | Attribute            | Value            |\n               +----------------------+------------------+\n               | Address Block        | ::1/128          |\n               | Name                 | Loopback Address |\n               | RFC                  | [RFC4291]        |\n               | Allocation Date      | February 2006    |\n               | Termination Date     | N/A              |\n               | Source               | False            |\n               | Destination          | False            |\n               | Forwardable          | False            |\n               | Global               | False            |\n               | Reserved-by-Protocol | True             |\n               +----------------------+------------------+\n\n                    Table 17: Loopback Address\n\n             +----------------------+---------------------+\n             | Attribute            | Value               |\n             +----------------------+---------------------+\n             | Address Block        | ::/128              |\n             | Name                 | Unspecified Address |\n             | RFC                  | [RFC4291]           |\n             | Allocation Date      | February 2006       |\n             | Termination Date     | N/A                 |\n             | Source               | True                |\n             | Destination          | False               |\n             | Forwardable          | False               |\n             | Global               | False               |\n             | Reserved-by-Protocol | True                |\n             +----------------------+---------------------+\n\n                   Table 18: Unspecified Address\n\n            +----------------------+---------------------+\n            | Attribute            | Value               |\n            +----------------------+---------------------+\n            | Address Block        | 64:ff9b::/96        |\n            | Name                 | IPv4-IPv6 Translat. |\n            | RFC                  | [RFC6052]           |\n            | Allocation Date      | October 2010        |\n            | Termination Date     | N/A                 |\n            | Source               | True                |\n            | Destination          | True                |\n            | Forwardable          | True                |\n            | Global               | True                |\n            | Reserved-by-Protocol | False               |\n            +----------------------+---------------------+\n\n              Table 19: IPv4-IPv6 Translation Address\n\n             +----------------------+---------------------+\n             | Attribute            | Value               |\n             +----------------------+---------------------+\n             | Address Block        | ::ffff:0:0/96       |\n             | Name                 | IPv4-mapped Address |\n             | RFC                  | [RFC4291]           |\n             | Allocation Date      | February 2006       |\n             | Termination Date     | N/A                 |\n             | Source               | False               |\n             | Destination          | False               |\n             | Forwardable          | False               |\n             | Global               | False               |\n             | Reserved-by-Protocol | True                |\n             +----------------------+---------------------+\n\n                   Table 20: IPv4-Mapped Address\n\n          +----------------------+----------------------------+\n          | Attribute            | Value                      |\n          +----------------------+----------------------------+\n          | Address Block        | 100::/64                   |\n          | Name                 | Discard-Only Address Block |\n          | RFC                  | [RFC6666]                  |\n          | Allocation Date      | June 2012                  |\n          | Termination Date     | N/A                        |\n          | Source               | True                       |\n          | Destination          | True                       |\n          | Forwardable          | True                       |\n          | Global               | False                      |\n          | Reserved-by-Protocol | False                      |\n          +----------------------+----------------------------+\n\n                   Table 21: Discard-Only Prefix\n\n          +----------------------+---------------------------+\n          | Attribute            | Value                     |\n          +----------------------+---------------------------+\n          | Address Block        | 2001::/23                 |\n          | Name                 | IETF Protocol Assignments |\n          | RFC                  | [RFC2928]                 |\n          | Allocation Date      | September 2000            |\n          | Termination Date     | N/A                       |\n          | Source               | False[1]                  |\n          | Destination          | False[1]                  |\n          | Forwardable          | False[1]                  |\n          | Global               | False[1]                  |\n          | Reserved-by-Protocol | False                     |\n          +----------------------+---------------------------+\n\n         [1] Unless allowed by a more specific allocation.\n\n                +----------------------+----------------+\n                | Attribute            | Value          |\n                +----------------------+----------------+\n                | Address Block        | 2001::/32      |\n                | Name                 | TEREDO         |\n                | RFC                  | [RFC4380]      |\n                | Allocation Date      | January 2006   |\n                | Termination Date     | N/A            |\n                | Source               | True           |\n                | Destination          | True           |\n                | Forwardable          | True           |\n                | Global               | False          |\n                | Reserved-by-Protocol | False          |\n                +----------------------+----------------+\n\n                         Table 23: TEREDO\n\n                +----------------------+----------------+\n                | Attribute            | Value          |\n                +----------------------+----------------+\n                | Address Block        | 2001:2::/48    |\n                | Name                 | Benchmarking   |\n                | RFC                  | [RFC5180]      |\n                | Allocation Date      | April 2008     |\n                | Termination Date     | N/A            |\n                | Source               | True           |\n                | Destination          | True           |\n                | Forwardable          | True           |\n                | Global               | False          |\n                | Reserved-by-Protocol | False          |\n                +----------------------+----------------+\n\n                      Table 24: Benchmarking\n\n                +----------------------+---------------+\n                | Attribute            | Value         |\n                +----------------------+---------------+\n                | Address Block        | 2001:db8::/32 |\n                | Name                 | Documentation |\n                | RFC                  | [RFC3849]     |\n                | Allocation Date      | July 2004     |\n                | Termination Date     | N/A           |\n                | Source               | False         |\n                | Destination          | False         |\n                | Forwardable          | False         |\n                | Global               | False         |\n                | Reserved-by-Protocol | False         |\n                +----------------------+---------------+\n\n                      Table 25: Documentation\n\n                 +----------------------+--------------+\n                 | Attribute            | Value        |\n                 +----------------------+--------------+\n                 | Address Block        | 2001:10::/28 |\n                 | Name                 | ORCHID       |\n                 | RFC                  | [RFC4843]    |\n                 | Allocation Date      | March 2007   |\n                 | Termination Date     | March 2014   |\n                 | Source               | False        |\n                 | Destination          | False        |\n                 | Forwardable          | False        |\n                 | Global               | False        |\n                 | Reserved-by-Protocol | False        |\n                 +----------------------+--------------+\n\n                         Table 26: ORCHID\n\n                +----------------------+---------------+\n                | Attribute            | Value         |\n                +----------------------+---------------+\n                | Address Block        | 2002::/16 [2] |\n                | Name                 | 6to4          |\n                | RFC                  | [RFC3056]     |\n                | Allocation Date      | February 2001 |\n                | Termination Date     | N/A           |\n                | Source               | True          |\n                | Destination          | True          |\n                | Forwardable          | True          |\n                | Global               | N/A [2]       |\n                | Reserved-by-Protocol | False         |\n                +----------------------+---------------+\n\n                  [2] See [RFC3056] for details.\n\n                          Table 27: 6to4\n\n                 +----------------------+--------------+\n                 | Attribute            | Value        |\n                 +----------------------+--------------+\n                 | Address Block        | fc00::/7     |\n                 | Name                 | Unique-Local |\n                 | RFC                  | [RFC4193]    |\n                 | Allocation Date      | October 2005 |\n                 | Termination Date     | N/A          |\n                 | Source               | True         |\n                 | Destination          | True         |\n                 | Forwardable          | True         |\n                 | Global               | False        |\n                 | Reserved-by-Protocol | False        |\n                 +----------------------+--------------+\n\n                      Table 28: Unique-Local\n\n            +----------------------+-----------------------+\n            | Attribute            | Value                 |\n            +----------------------+-----------------------+\n            | Address Block        | fe80::/10             |\n            | Name                 | Linked-Scoped Unicast |\n            | RFC                  | [RFC4291]             |\n            | Allocation Date      | February 2006         |\n            | Termination Date     | N/A                   |\n            | Source               | True                  |\n            | Destination          | True                  |\n            | Forwardable          | False                 |\n            | Global               | False                 |\n            | Reserved-by-Protocol | True                  |\n            +----------------------+-----------------------+\n\n                      Table 29: Linked-Scoped Unicast\n\nThis should be enough. There is also the option of filtering bogons but that feels a bit overkill unless you setup peering to Team Cymru or such.\n", "spanning tree - Migrating from STP short mode to long mode?": "\n\nI would run the change from root outwards but I don't think there are any use cases for doing it each way (someone correct me if I'm wrong).\nManual costs will stay exactly the same so you should at some point convert these to fall in line with your new costs once you have changed over.\nBe aware of the fact that during topology changes or before you change over the manual metrics you may be running a sub-optimal L2 path between nodes.\nIt is recommended that all your switches run the same cost type and reference bandwidth, although I can't see any fatal flaws in not having them all the same it again could give you an inconsistent / sub-optimal L2 path.\n\n", "management - Easily deploying new VLANs in a large environment": "\nHere is a really basic script template in Perl for telneting into a list of devices (one on each line in a file called devicelist.txt) and configuring some commands.  Depending on exactly what you are doing it should provide a good start.\n  use Net::Telnet::Cisco;\n\n    # read in a list of devices\n    my @devicelist;\n    open(DATA, \"<devicelist.txt\") || die \"Can't open file!\";\n    while (<DATA>) {\n            chomp;\n            push( @devicelist, $_);\n    }\n\n    # loop through the devices\n    foreach $hostname (@devicelist)\n    {\n            # telnet to device\n            my $cs = Net::Telnet::Cisco->new(Host => $hostname);\n\n            # login, go enable, disable paging, go into config mode\n            $cs->login( \"username\", \"password\" );\n            $cs->enable( \"enable_password\" );\n            $cs->cmd( 'terminal length 0' );\n            $cs->cmd( 'config t' );\n\n            # configure the device\n            $cs->cmd( 'vlan 100, 200, 300' );\n            $cs->cmd( 'interface Ethernet0' );\n            $cs->cmd( ' switchport access vlan 100' );\n\n            # exit config mode and write the config\n            $cs->cmd( 'end' );\n            $cs->cmd( 'wr mem' );\n\n            # close the connection\n            $cs->close;\n    }\n\nHere are some more details on Net::Telnet::Cisco as well.\n", "peering - How to filter non-bogon prefixes received via BGP from an Internet Exchange(IXP)?": "\nAs the others stated, RPKI would be the way to go, but it's not there yet. At exchange points we generally put a max-prefix limit on every session.\nAdditionally we use the following rules:\n\nNo default route\nNo bogons, more exactly this list:\nroute-filter 0.0.0.0/8 orlonger reject;\nroute-filter 127.0.0.0/8 orlonger reject;\nroute-filter 10.0.0.0/8 orlonger reject;\nroute-filter 172.16.0.0/12 orlonger reject;\nroute-filter 192.168.0.0/16 orlonger reject;\nroute-filter 224.0.0.0/4 orlonger reject;\nroute-filter 240.0.0.0/4 orlonger reject;\nroute-filter 169.254.0.0/16 orlonger reject;\nroute-filter 192.0.2.0/24 orlonger reject;\nroute-filter 198.51.100.0/24 orlonger reject;\nroute-filter 203.0.113.0/24 orlonger reject;\nroute-filter 100.64.0.0/10 orlonger reject;\n\nNo prefixes longer than /24\nNo private AS numbers in the path\nNone of our own prefixes\n\nFor IPv6 we do the same, only the bogons are different. I pasted our filter below this. Please be aware that the syntax might be a bit odd but that is due to the Juniper way of matching prefixes. For Cisco syntax you can go here: IPv6 BGP filter recommendations (The Juniper example on the page is buggy, please use the one below if you want.)\n\nterm ebgp-relaxed {\n    from {\n        family inet6;\n        route-filter 3ffe::/16 orlonger;\n        route-filter 0000::/8 orlonger;\n        route-filter 2001:db8::/32 orlonger;\n        route-filter 2001::/32 exact next policy;\n        route-filter 2001::/32 longer;\n        route-filter 2002::/16 exact next policy;\n        route-filter 2002::/16 longer;\n        route-filter fe00::/9 orlonger;\n        route-filter ff00::/8 orlonger;\n        route-filter 2000::/3 prefix-length-range /49-/128;\n        route-filter 0::/0 orlonger;\n    }\n    then reject;\n}\n\n", "mpls - Does Juniper set a control word on VPLS pseudowires": "\nnegotiation of the control-word between the BGP VPLS PE routers is added in Juniper MX series starting from Junos 14.1. so only BGP-signaled VPLS. \nBR\n", "cisco - Is Nexus 7000 series line card \"OIR\" impact-free?": "\n\"Yes, it's completely impact-free.*\n*Your experience may vary.\"\nThat's the impression I get from Cisco and the Nexus platform in general. As a general rule, I always try to secure a maintenance window for work on critical infrastructure as a CYA measure. Even if it works flawlessly 99% of the time, there's still that 1% that it won't, and \"But Cisco told us it would be fine\" does little to placate angry customers.\n", "End-to-End FCoE - Ntwork Enginring Stack Exchang": "\nI think it's mature enough for production use. However, it's not an all-or-nothing thing. Right now the only major FCoE (multi-hop) vendor is Cisco. They're pitching a Fibre Channel fabric where it doesn't matter if the ports are FC or FCoE. Some ports might be 8 Gbit FC, others might be 10 Gbit Ethernet running FCoE. \nYou can have an FC-connected storage array, connected to a Nexus 5K, using a Nexus 7K as your core (or MDS with FCoE cards), aggregating down to another 5K, to a UCS B-Series connected via FCoE. \nBrocade is a native FC shop, and they've been pushing 16 Gbit FC for I think 2 years. Cisco just announced a 16 Gbit FC switch, so they're a little later to the 16 Gbit game, though they've been pushing 10 Gbit Ethernet FCoE for about as long. \nAlso, 10 Gbit Ethernet is about 1250 MBytes of raw throughput, where 16 Gbit FC is 1600 Mbyte/s of raw throughput, because of the way FC was designed. \n", "TCP Client / Server in Cisco EEM 3.0": "\nI would start with debugging commands. I'd start with\ndebug event manager tcl cli\nThere's more information in the EEM best practices document over at https://supportforums.cisco.com/docs/DOC-12757 about debugging and troubleshooting.\n", "switch - How can I diagnose a bridging (ethernet) loop?": "\nOK, so assume you have a topology like:\n          SW1\n         /   \\\n        /     \\\n       /       \\\nPC A--SW2-----SW3--PC B\n\nFor some reason there is a bridging loop, STP is disabled or someone applied a filter in the wrong place or such.\nPC A wants to communicate with PC B. It first ARPs for the MAC of PC B, the destination is a broadcast with MAC ffff.ffff.ffff. So the frame goes to both SW1 and SW3. The SRC MAC is PC A. SW1 then floods the frame towards SW3 and SW3 will flood the frame coming from SW2 to SW1.\nSW1 and SW3 learned the MAC of PC A when the first frame came in. When the second one comes in from the opposite direction it has to relearn it. Because these events occur so fast and repeatedly you will see log messages complaining about MAC flapping. Something like \"MAC FLAP 0000.0000.0001 is flapping between Gi0/24 and Gi0/23\". This is a good sign that you have a loop.\nWhat you could do then is to try to trace this MAC. Try looking in the ARP cache of a device in the same subnet and see what IP this device has. So with the MAC you could try to trace it with sh mac-address-table or with the IP maybe you have a list with all IPs and where they are connected.\nIf the host gets a IP address from a DHCP server you could also try there to find where the host is coming from. If you have option 82 enabled that would be a great help.\nOther signs are that the CLI will be very sluggish. CPU load will be very high. Switches do almost everything in ASICs so if a switch has a CPU load over 50% it's probably not good. You should implement SNMP monitoring and watch for high CPU load. Also look for the MAC flap messages. If the switches have a loop the LEDs will probably be blinking like crazy.\nThings you could do to protect against loops:\n\nEnable STP! (duh)\nSNMP monitoring of CPU load\nEnable SNMP traps for certain events like STP topology changes\nEnable storm control on the ports to limit broadcast\nDon't span your VLANs too much in your L2 topology\nEnable port security and limit number of MAC addresses per port\nEnable Option82 if you run DHCP\n\n", "cisco - catalyst 3750x - jumbo frames on svi": "\nFrom the configuration guide:\n\nFrames sizes that can be received by the switch CPU are limited to 1998 bytes, no matter what value was entered with the system mtu or system mtu jumbo commands. Although frames that are forwarded or routed are typically not received by the CPU, in some cases packets are sent to the CPU, such as traffic sent to control traffic, SNMP, Telnet, or routing protocols.\n\nBut if it's received over a trunk it shouldn't be routed in the first place and even if it was the jumbo MTU should still apply.\n\nRouted packets are subjected to MTU checks on the output ports. The MTU value used for routed ports is derived from the applied system mtu value (not the system mtu jumbo value). That is, the routed MTU is never greater than the system MTU for any VLAN. The routing protocols use the system MTU value when negotiating adjacencies and the MTU of the link. For example, the Open Shortest Path First (OSPF) protocol uses this MTU value before setting up an adjacency with a peer router. To view the MTU value for routed packets for a specific VLAN, use the show platform port-asic mvid privileged EXEC command.\n\nCan you try this command:\nshow platform port-asic mvid\n\nSo it seems 1998 is max on SVI.\n", "wireless - Cisco 1260 AP no longer responds to ping, ssh after upgrade to latest 15.x firmware": "\nThey only support BVI1. This wasn't enforced either by bug or whatever in 12.X but in 15.X any extra BVI breaks management access. Worked with TAC on this issue over a week period. Can reproduce the issue on any of the APs with 15.X.\nSo a simple no int BVI50 should fix the original config. Plus a reload after making the change.\nMade a couple edits now that I'm not on my iPad. Anyways, I had this issue on 2 1262s that I updated at my local office and 1 1252 at a remote plant (20min away thankfully). Once the issue was resolved by removing the extra BVIs I had on all the APs (before upgrading anymore), I was able to update 25 remotely across the globe without a hitch.\n", "packet analysis - Why do network taps have four ports?": "\nHardware network taps provide one output port in each direction to ensure that traffic can be replicated at line rate. For example, a 100 Mbps Ethernet connection provides a theoretical maximum of 200 Mbps of total bandwidth; 100 Mbps in each way. If you tried to capture traffic from a line which was carrying 75 Mbps in each direction, you would need at least 150 Mbps of one-way bandwidth: more than a single 100 Mbps connection can carry. Hence, taps include two output ports operating at the same speed as the line being monitored.\n", "pbr - Policy routing configuration in Fortigate": "\nSince policy routes are evaluated top-down, you can work around this limit by placing a more specific entry matching traffic from internal subnet A to internal subnet B.\nHowever, this should be less than comfortable if you have many different networks attached to your internal interface.\nIn this case, I would recommend you a trick I once used: \nsince Fortigate devices ignore QoS marks, you should sign your \"internet\" packets on the firewall-facing port of your Cisco switch with a specific TOS and then use that mark in your policy-route.\n", "cisco asa - ASA use of proxy ARP for NAT": "\nThe web server will only need to ARP the ASA to get the MAC address for its (default) gateway.\nSo, the ASA won't need to reply an ARP for any other IP addresses then its own. You can safely turn off proxy-arp on the DMZ interface. You are correct in your assumption that you need it for the outside interface.\n", "routing - Why don't iperf, scamper and path MTU discovery packet captures agree on the path's MTU?": "\nVery interesting.\nMSS (maximum segment size) = MTU - IP header = 6076.\n6076 + 40 = 6116. \nCould it be Debian is using the IP options fields in the IP header? That might be the extra 12 bytes...\n", "How do I read optical transmit power via SNMP on Cisco ASR9k?": "\nHave you tried walking the MIB/OIDs in question from a management station?  After having spent a lot of time w/firmware QA, I've noticed things like show commands are likely to not display correct info, even when the OIDs are poll-able.  I recommend using and knowing Net-SNMP tools and utils as debug before trying to poll the information in cacti, observium, etc.\ne.g. snmpwalk -v2c -c <community> <routername> 1.3.6.1.4.1.9.9.91 will say \"No Such Object available on this agent at this OID\" if it's not there\nWalking 1.3.6.1.4.1.9 on my IOS-XE box gives a lot (I just need to add the MIBs for description). Then I have something to work with (including other gems that might benefit me for monitoring) \nsnmpwalk -v2c -c <community> <routername> 1.3.6.1.4.1.9\nCheck out the MIBs available for 4.2.x on the ASR 9000 @:\nftp://ftp.cisco.com/pub/mibs/supportlists/asr9000/asr9000-supportlist.html#Supported_and_Verified_MIBs_XE_4_2_X\nThat link says that the CISCO-ENTITY-SENSOR-MIB is available, and hasn't been updated since 2007.  Edit: it appears that the asr9k-mgbl-p.pie package was not available on the router, as mapped in the ASR9000 MIB list above.\nSupplemental info:\nCisco's MIB Locator tool is IOS-only, so check out the directories above above the asr9000 on the FTP link for more info.\nTool: http://tools.cisco.com/ITDIT/MIBS/MainServlet\nSNMP ftp dir: ftp://ftp.cisco.com/pub/mibs/supportlists/\nFor more information on loading MIBs: http://www.cisco.com/en/US/tech/tk648/tk362/technologies_tech_note09186a00800b4cee.shtml\nA really good Cisco SNMP links page:\nhttp://www.cisco.com/en/US/tech/tk648/tk362/tk605/tsd_technology_support_sub-protocol_home.html\n", "juniper - How to force VPLS/L2VPN to use a specific path": "\nShort answer, just use Resource ReSerVation Protocol (RSVP).\nLong answer, you could use multi-topology-routing and have multiple metrics in each interface and force some packets to different topology than another packets. But I would not really venture there.\nYou might want to talk to your account team that you want segment routing implemented: https://datatracker.ietf.org/doc/html/draft-previdi-filsfils-isis-segment-routing-02 (customer pressure will help resource development)\nSegment routing would make it trivial to solve your problem while removing both LDP and RSVP from your network, relying only on IGP.\n\nAs my suggestion in comments did not actually work, I'll explain why not, and how to fix.\nProblem is we need to have LSP installed in HW to be able to use it. And by my suggestion the RSVP LSP is not actually installed until LDP LSP goes away. So we cannot conditionally inject traffic there.\nI couldn't find any way to force RSVP+LDP in ECMP, with equal preference LDP wins. But we still can achieve what is desired at least in two separate ways.\n\nDual next-hops\nAdd second next-hop in the l2circuit PEs. This next-hop will not be used by iBGP, so it draws no traffic at all.\nNow configure RSVP tunnel for this second loopback and use it as neighbor address for l2circuit.\nNet effect is, all traffic is using LDP except this l2circuit which is using RSVP\nRSVP only\nCreate two RSVP tunnels, one using IGP path (i.e. will use same as LDP) another using your explicit path. These can be set to ECMP, i.e. all traffic will use both tunnels.\nNow as we've accomplished ECMP requirement, we can use 'routing-options forwarding-table' export policy to put some traffic on LSP_NORMAL and some traffic on LSP_EVPN. Essentially our export policy would be:\n\n.\nterm EVPN {\n    from community EVPN;\n    then {\n        install-nexthop lsp LSP_EVPN;\n        accept;\n    }\n}\nterm NORMAL {\n    from next-hop 1.2.3.4;\n    then {\n        install-nexthop lsp LSP_NORMAL;\n        accept;\n    }\n}\n\nNow none of the traffic would actually use the ECMP as all of the traffic would be forced to one or the other RSVP LSP.\nI would prefer the 1st option.\n", "Juniper SRX240H loses connectivity to upstream router": "\nHere's some version info that should help.  I think that the other thing that immediately strikes me is autonegotiation being disabled, which shouldn't be necessary.  Is this something that your provider is asking for, or based on learned behaviors?  I recommend reading what's out there, since autonegotiation has been recommended for over 10 years.  Anything you're connecting to should work fine with it as well (the last time I had issues was on a 3500XL - we're talking ooooold). Check out:\nhttp://etherealmind.com/ethernet-autonegotiation-works-why-how-standard-should-be-set/\nFirst off, Junos 11.4R7.5 is the supported release recommended for SRX240, as of 8 April 2013, per JTAC (since you mentioned versions).\nhttp://kb.juniper.net/InfoCenter/index?page=content&id=KB21476 (need login)\nAlso, JTAC recommends EEOL releases on SRX or J Series for IPsec features (may or may not apply, but FYI).  (For me, the only releases available for SRX240H on juniper.net are 10.4, 11.4, and 12.1 - that may help set your expectations on what to run.)\nhttp://www.juniper.net/alerts/viewalert.jsp?txtAlertNumber=PSN-2013-01-822&actionBtn=Search (need login)\nYou are also running a version that was released before the malformed TCP vulnerability came out.  I shudder to think that a live exploit exists, but you definitely need to be on versions that were published around January or February 2013, or later.  The versions you need for 11.2 are 11.2R5.5 or 11.2R7.5 (or higher)\nhttp://osvdb.org/89751\nI mentioned versions because the SRX is a 'rapidly evolving' platform as well, and anecdotal evidence and hearsay suggests that you'll want to upgrade more frequently.\n", "switch - Is there such thing as a network bridge?": "\nBridges as a product no longer exist due to how the market evolved.  Typically the products specifically called bridges were used in hubbed environments to separate the collision domain or to bridge two network media types together (for example, Ethernet and token ring).\nBridges as a function are definitely still around.\nSimply speaking, as a function of separating the collision domain, a switch is a bridge with lots of ports.\nFor an example of bridging two network media types, access points are bridges that bridge 802.11 traffic to Ethernet.\n", "Cisco-configuration syntax highlighting for TextMate/Sublime Text": "\nI haven't tried it yet but there is a GitHub repo someone made for Cisco IOS Syntax Highlighting for Sublime Text 2.  \n", "voice - What are the components and licensing of a full Cisco CUCME PBX?": "\n\nOn a 2900/3900 platform, the UC license is required to use the CUCME/SRST functionality.  It is in addition to the base OS.  Once unlocked the commands will be available (no upgrade needed).\nAs of Unity express 7.0.2, the CUE modules are licensed separately for a given number of mailboxes.\nSpare phones (with an = in the part number) are technically unlicensed.  You can use them with the system, as the CUCME router platform is licensed to a specific number of phones per hardware platform.  While you don't need the licenses to operate the phones, you should probably purchase them to stay on Cisco's good side.\nCUBE should be unlocked with the UC licenses on the 2900/3900 platform.\nFor 30 phones, you probably want a 2911 or 2921.\n\nBrett is right in that you probably need to contact a Cisco VAR/Partner to sort out the licensing issues.  They have people on staff that can take care of that for you and probably get you discount off list pricing.\n", "cisco - Does varying the angle of omni directional antennas affect connection quality between WiFi APs?": "\nIt definitely matters:\n'Omni' refers to the symmetry in the plane perpendicular to the axis of the antenna; That is, the torus around the antenna axis. But 'omni' antennas are VERY sensitive to variation from the vertical.\nIf you're aiming down into an open area (to the left, as suggested by the photo,) then ok, tip them as is shown. But generally, you should have the antenna at about the same height at the other trans/receivers you're trying to cover.\nIf that photo is your actual installation: Be aware that a metal roof -- especially if it's grounded, which it almost surely is -- will be an RF reflector. So you will have an RF shadow from the roof below the visual line of sight. (If you can't see the antenna, the RF signal won't go through the roof either.)\n", "cisco - A FEX port remains inactive": "\nIt turned out, that the configuration of this port did not match on both Nexus 5k, as I configured just one switch at first.\n\nI configured the port on the second Nexus switch in the same way.\nI plan to implement the config sync feature so that issue should not happen again.\n\nOnce the configuration of the ports of the virtual port channel matched, the link came up.\n", "cisco - How to factory reset IOS-XR?": "\ncommit replace does the trick of nuking the config.\nI found the commit history still shows the previous commits in a list, but you cant see the contents of them. \n", "cisco - Static redistribution into EIGRP as internal failure": "\nYou can inject static routes into EIGRP two ways:\n\nThe 'network' command\n'redistribute static'\n\nYou only need one or the other; here you've used both. It seems that the redistribution command takes precedence over the network command so the route is appearing as static routes. Remove 'redistribute static' and the route should appear as internal.\n", "Which Python modules are you using for network management and automation?": "\nI just started playing with Trigger and I have to say I've really enjoyed it.  It's quite a powerful network engineer toolkit and their documentation is awesome.  While we primarily have Cisco it does support other vendors such as Juniper and Brocade, they have a list of vendors in their docs\n", "cabling - Multi-Mode and Single-Mode Fiber Differences": "\nMain difference:\nSinglemode fiber has a lower power loss characteristic than multimode fiber, which means light can travel longer distances through it than it can through multimode fiber. Not surprising, the optics required to drive singlemode fiber are way more expensive, especially considering any varying circumstances. \nWhen to use each:\nBoth singlemode and modern multimode fiber can handle 10G speeds.  The most important thing to consider is the distance requirement.  Within a data center, it's typical to use multimode which can get you 300-400 meters.  If you have very long runs or are connecting over longer distance, single mode can get you 10km, 40km, 80km, and even farther - you just need to use the appropriate optic for the distance required, and again, the prices go up accordingly.\nCompatibility issues:\nThey are not compatible.  You cannot mix multimode and singlemode fiber between two endpoints.  The optics are not compatible either.\nThere's a lot more to say about fiber, in general, but I hope this answers your immediate question.\n", "Overcome 2 monitor session limitation in Cisco VSS": "\nIf it's like most of the hardware switches, no.  Only one \"monitor session\" can be active at a time, 'tho the configuration can store two.\nUsing vlans and external filtering hardware (gigamon?) you could have one session dumping all the traffic you want to see, but that's still one session. (and a network tap would be cheaper)\n", "wireless - intersymbol interference (ISI), channels, and frequencies": "\nThese types of radio frequency transmissions are \"frequency division multiplexed\" (FDM). The different channels (ie, frequencies) transmit and receive at the same time. It's like a cocktail party where each conversation chooses a different pitch range -- the tenors have no problem hearing each other right through the basses at the next table.\nIn FDM, the receivers are tuned so that they only pickup transmissions in the channel (the frequency range) to which they are supposed to listen. So over a wider range (eg, the 2.4Ghz wifi) there are smaller divisions of frequency ranges into channels. The transmissions move at nearly the speed of light, so any transmitters on the same frequency -- the same channel in a give frequency band, eg 2.4Ghz's channel 11 -- will instantly be talking on top of each other. So any two 2.4Ghz channel 11 devices within range of each other will collide instantly.\nPerhaps the part that isn't obvious is that electro-magnetic theory shows that superposition of E&M waves is not a problem. It's like waves in the open, ocean; You can have short spaced three foot waves (a highish frequency), moving over the surface at the same time you have long ocean swells (a lowish frequency). At the E&M receiver, you \"simply\" tune to the right frequency and you can pick the signals you want out of the noise. (And the E&M spectrums is very very noisy.)\n", "How many contexts can be created on a Cisco ASA Active/Standby Pair?": "\nEach physical firewall is licensed for two contexts with the base license. For example: an operational and an admin context. If you create an active/standby failover pair up to four contexts can be created as the licensing is shared between the physical devices. For Example: Operational 1, Operational 2, Operational 3, and an admin context. \n", "How to choose a BGP router ID when using IPv6 only?": "\nAutonomous-System-Wide Unique BGP Identifier for BGP-4 answers your question.\nBasically BGP Identifier need only to be unique within your AS since 2011.\n", "architecture - What is backpressure in the context of routers?": "\nBackpressure refers to what is essentially concentration of traffic.\nE.g. I can have 10 x 1Gbit links internally that are all feeding into a 1Gbit link that provides me with Internet transit.\nat saturation point, the router can store packets in its buffer and/or drop them - with no particular configuration, a router will generally fill its buffers and then tail drop, this gives rise to two problems: buffer-bloat and tcp global synchronisation.\nThe first refers to a case where the buffer is constantly filled due to constantly saturated link utilisation. The second refers to the issue of hosts re-transmitting dropped packets all at the same time, thereby causing a burst of traffic and thus, more drops, more retransmits, ad nauseum.\nRED was conceived a long time ago as a means to deal with this issue; namely by randomly selecting packets to drop during times of congestion. This however required careful tuning according to the properties and expected behaviour of the link. Fortunately things have moved on and AQM (Active Queue Management) is now the cutting-edge of the industry.\nA top-notch example of AQM is CoDeL - this is an algorithm that focuses purely upon the sojorn of a packet through the system and aims to ensure packets are passed within a specific time rather than caring about whether or not a certain amount of bandwidth/buffer is being utilised.\n", "Tim to switch to IPv6? - Ntwork Enginring Stack Exchang": "\nTL;DR: If you're a consumer/SOHO nothing needs doing. If you're providing services, start planning now while there's no rush and no deadline.\nBasically, everything is dual stack these days, meaning it supports IPv4 and IPv6 out of the box. The Internet in general is still operating fully supporting IPv4 as much as possible.\nAt this point, if you're providing services to the Internet -- running DNS, web, email, etc. services. You should be planning to provide those services as both IPv4 and IPv6.\nIf you're consuming services from the Internet -- small office/home office, larger offices, residential, etc. then there is currently no urgency to convert yourself to IPv6. I suspect as the bigger cable companies start deploying IPv6 the \"last mile.\" Then we'll see more IPv6 traffic in general.\nToday, there are a lot of really big things -- Amazon, some of the content delivery networks -- which are only IPv4. So the focus, as I see it, is for the providers to continue working to provide evertyhing in IPv4 and IPv6 simultaneously. The first problem the Internet is going to face is fracturing/islands appearing as the newest areas, where IPv4 addresses are already exhausted, come online as IPv6-only. Those newest areas will need the existing services and service providers to offer stuff over IPv6.\n", "alcatel lucent 7750 - ALU interop GRE tunnel": "\nAFAIK GRE support is limited to VPN services or as an access-pseudowire. At least according to ALU there is no way to use GRE as a logical tunnel on the 'network' side. This would require a service blade. However, I haven't tested this but it seems to be the official story.\n", "Cisco: monitoring usrs input - Ntwork Enginring Stack Exchang": "\nHave a look at this IOSHints post: CLI command logging without TACACS+. And the title seems to imply it can also be done with TACACS+.\n", "dell - Multiple LAN interfaces on SonicWALL": "\nYes, The SonicWALL does this by default.\nGo through the Setup Wizard and you can select the radio-button for the setup where X1 is WAN and all other ports are set to the LAN Zone.  You can also do two WAN interfaces and the rest to the LAN.  These are the options available in the Setup Wizard, but if you want to change more granuarly you can simply go to each interface and assign it to the appropriate Zone.    \nSet your other three ports to LAN zone and the SonicWALL will switch all ports in that zone.\n", "Using Fabric on a Cisco device : \"Line has invalid autocommand\"": "\nFabric is designed with a certain execution model; It assumes something, Bash by default, will run on the remote to execute your command.\nYou can change what the remote command is though. You might try changing the remote command into a single space for when you're sending commands to something like a CLI (eg, Cisco IOS).\nSee Fabric's Environment Dictionary about the 'shell' setting.\n", "ipv4 - IP prefixes by state (geolocation)": "\nYou're looking for a \"Geo Location\" database. (One example I've used is Max Mind's products.)\nThe devil is in the implementation details. The db products are meant to be used programmatically. For example, given a list of IP addresses, we want to know the state, or lat/longitude, country, etc. You could certainly write something (e.g. some Perl code. But the products come with sample libraries for many laguages) that would spit out all the IP addresses, networks, whatever for a given state or zip code. You would have to look through the db products to see which one(s) are organized in a way you can use. Then you have to do something with that list.\nAlternatively, you could do something dynamic. Hook into your web server, or server firewall, etc so that packets are looked up on the fly against the Geo Location database (the dbs are local data files you update periodically [eg monthly]) then make a decision, or insert a firewall rule.\nNone of that is easy, but it's definitely do-able.\n", "Cisco Catalyst cluster heartbeat switch issue": "\nCRC errors are often cabling problems. Here are the things I would check next before swapping out hardware:\n\nAre the servers connected directly to the switch or do they connect through some sort of infrastructure cabling?  If so, get the infrastructure cables re-certified.\nIf you have a real cable tester (not a simple continuity tester), I would test the cables.\nIf the cables are hand made, I would replace with factory made cables.  Often run into these types of issues with hand made cables.\nCheck to see if there is any source of EM near where the cables run.  Re-path the cables if you can even temporarily to make sure they are kept separate from power or other sources of EM.\n\nBeyond that, I would start at the NICs as you already indicated.  Could be you got some from a bad run.\n", "cisco - Unable to connect via VPN to remote network": "\nIf both the Buffalo and the 5505 are doing NAT then yes you are bypassing best practices.\nUnless you need the further level of security I would look to disable the routing abilities of the Buffalo and use it just as a wireless AP (as that is why I'm guessing you have it).\nThis may be as simple as turning off the DHCP server on the Buffalo and plugging the ASA into a LAN port on the Buffalo rather than the WAN port.\nIn terms of why your VPN doesn't work behind the Buffalo I am guessing it is blocking the VPN traffic, make sure that the Buffalo has something like 'VPN passthrough' enabled.\n", "lab - Is it possible to emulate device other than Cisco and Juniper in GNS3 or any other environment?": "\nWhat I recommend is to setup a virtualized environment. Either through Vmware workstation or preferably ESXi with vSphere if you have a server to spare. That gives you a very flexible solution.\nAdd a VM for Dynamips\nAdd Olives if you like\nAdd ASA either via Dynamips or separately\nAdd the Cisco CSR1000v VM\nAdd a VM for Arista\n\nThat makes it easy to run inter vendor labs and you can connect them through the VM network which makes it simple to setup. I have a lab like this now and it's hosted by a friend so a VPN in to a box he setup (virtual) which is my GW. Then I can configure vSphere and anything I like and run it on the server.\nIf you have a powerful laptop which 8GB RAM or more you can run a lot of stuff directly on your laptop. Most of these things are RAM heavy but not that heavy for the CPU.\n", "switch - Are multiple links with different VLANs between two switches possible?": "\nIt depends. With IEEE 802.1Q specified STP, where you have one instance per trunk, STP will block ports. \nWith Cisco's PVST+ (Per-VLAN STP), every VLAN has a corresponding instance of STP. This means that if there are no loops within the VLANs, STP will not block ports.\nMST, defined in IEEE 802.1s, works a bit differently. Instead of providing a one-to-one VLAN-STP mapping, VLANs can be grouped together into a few instances of STP. This way, if you do STP odd-even load balancing (odd VLANs over link A, even over link B) you only need two instances of STP, instead of one instance for every single VLAN. If you use MST correctly, your proposed configuration should work without any blocked links, just like PVST+, but with VLANs grouped into instances instead of working with each VLAN independently.\n", "cisco catalyst - Netflow differences between IOS 12.2 and 15.1": "\nThere should not be obvious difference if you don't have any cfg changed.\nUnless you want to use Netflow v9 or IPFIX in new template format in new IOS versions.\n", "bgp - What is the maximum prefix size routed in the IPv6 Internet?": "\nThese days it's usually at /48, and it's very unlikely to ever be longer.\nThere are still AS' filtering longer than /32 though, but they should all have a default at this point (Verizon were a hold-out, but I believe they've given up).\nThere are also AS' filtering on allocation lengths, so if you got a /32 they might require you advertise it as such (based on the various RIR's documented allocation policies).\n", "Should spanning tree path costs match on a physical link?": "\nAccording to the details you explain about your network topology, my understanding is: \n\nCisco switch is root of the spanning-tree.\nPort A4 in switch HP 7 is root port and therefore it is in forwarding\nstate\nPort B1 in switch HP 8 is root port and therefore it is also in\nforwarding state\n\nNow let\u00b4s focus in the other link closing the loop, the one between both HP switches. You can have only a designated port and because the cost to root advertised by both HP switches into the link is the same, switches would have to check the lowest sender bridge ID and lowest sender port ID in order to choose the designated port and the blocking port. \nSo, setting a different costs for ports in the link between HP switches will have  no effect in choosing the designated port for this link.\n", "Is there a way to test TRILL in a virtual lab?": "\nThere are few devices that support standards based TRILL in the real world.\nTraditional Cisco IOS is probably the most /supported/ network OS for running in a hypervisor; however, in Cisco land the NXOS platform is the only platform that supports Fabric Path (Cisco's TRILL), and that won't work in Dynamips or IOU.\nFurthermore TRILL is a L2 technology. Switches are hard to virtualize because of the special forwarding hardware (TCAM) used in them.\nIn short I'm afraid you're out of luck on using virtual switches to test TRILL.\n", "Why does my Cisco 6509 BGP table use two entries in my TCAM?": "\nIt seems that the 6500 generates MPLS labels for every route if BGP is run in VRF. The fact that your IPv4 and MPLS TCAM usage is almost identical seems to indicate this as well. Can you try this command:\nshow bgp vpnv4 uni all labels\n\nThere seems to be a hidden command that makes IOS allocate labels per VRF instead of per prefix.\nmpls label mode all-vrfs protocol bgp-vpnv4 per-vrf\n\nThis is a hidden command so IOS won't show it.\nAlso before running that can you try to run:\nshow ip vrf detail\n\n", "monitoring - Hardware tap vs port mirroring": "\n(having worked with this for a decade now)\nHands down, the biggest functional difference between a tap and a span... a passive tap will never, ever drop a frame, under any circumstances -- it electrically duplicates the frame, errors and all.  Active taps (regenerative, or aggregate) can drop frames, eg. if the bidirectional traffic exceeds the link speed of the monitor port. (a 1G link cannot carry TX+RX 1G (2G) of traffic)\nSwitch SPAN ports will drop traffic.  The SPAN is the lowest priority to the switch -- it will sacrifice the SPAN traffic in favor of maintaining live traffic. A slightly loaded switch may never show this, but I've had dozens of customer calls from all over the world complaining that we dropped traffic, when it was in fact their switch SPAN that didn't send it to us.\nHowever, SPANs are cheap and plentiful. Almost every managed switch supports setting up a monitor session.  And they are usually trivial to setup and/or reconfigure.  Taps, on the other hand, are exceedingly expensive and rare.  Taps require unplugging network cables, which has a lot of resistance from just about everyone. And they cause a hit when they lose power. (momentary, not \"unplugged == broken link\".  even dirt simple ones will maintain link when off.)\n", "How to find the port a device is connected to, based on IP, on a Cisco Catalyst switch": "\nThe answer depends on whether the switch is a Layer 2 or a Layer 3 switch.  That is to say, is the switch only switching and relaying traffic on to a different device for routing, or, is it doing the routing decisions itself via SVIs (switched virtual interfaces).\nOn a layer 3 switch, the port can be found by using a few simple commands on the device.  However on a layer 2 switch, you have to log into both the switch and whatever device is doing the routing to locate the port.\nIn either case, the commands are the same, just run on two different boxes for the layer 2 switch.  \n\nOn a Layer 3 switch:\n\nLog into the switch and issue the following command (where ipaddress is the ip address of the host you are trying to locate:\nshow ip arp *ipaddress*\n\nThe output should look similar to below, and give you the mac-address of the device (I've highlighted the mac-address below in bold).\nLYKINS-1861#show ip arp 172.20.1.100\nProtocol  Address          Age (min)  Hardware Addr   Type   Interface\nInternet  172.20.1.100            0   **28cf.da1d.1b05**  ARPA   Vlan10\n\nNow issue one of the following commands (where mac-address is the hardware address from previous step).  Depending on the Cisco platform, sometimes the command is listed in either form.\nshow mac address-table address *mac-address*\nshow mac-address-table address *mac-address*\n\nThe output should look similar to  below, the port you are looking for should be listed as the Destination Port:\nLYKINS-1861#show mac-address-table address 28cf.da1d.1b05\nDestination Address  Address Type  VLAN  Destination Port\n-------------------  ------------  ----  --------------------\n28cf.da1d.1b05          Dynamic      10     **FastEthernet0/1/1**\n\n\n\nOn a Layer 2 switch:\n\nFind out what device is doing the routing for this switch (you may have to look at the network documentation). Sometimes it is a \"Router on a Stick\", where the Layer 2 VLANs are being trunked up to the router for the Layer 3 decisions.\nLog into the routing device, and issue the following command (where ipaddress is the ip address of the host you are trying to locate:\nshow ip arp *ipaddress*\n\nThe output should look similar to below, and give you the mac-address of the device (listed below in bold).\nLYKINS-1861#show ip arp 172.20.1.100\nProtocol  Address          Age (min)  Hardware Addr   Type   Interface\nInternet  172.20.1.100            0   **28cf.da1d.1b05**  ARPA   Vlan10\n\nNow log into the Layer 2 switch\nOn that device issue one of the following commands (where mac-address is the hardware address from previous step).  Depending on the Cisco platform, sometimes the command is listed in either form.\nshow mac address-table address *mac-address*\nshow mac-address-table address *mac-address*\n\nThe output should look similar to  below, the port you are looking for should be listed as the Destination Port:\nLYKINS-1861#show mac-address-table address 28cf.da1d.1b05\nDestination Address  Address Type  VLAN  Destination Port\n-------------------  ------------  ----  --------------------\n28cf.da1d.1b05          Dynamic      10     **FastEthernet0/1/1**\n\n\n", "wireless - Cisco WLC External WebAuth Apparent Random Behavior": "\nI've seen similar issues twice in the past. \nThe first time, it had to do with DNS resolution. I performed a DNS lookup on a client that was having issues, and realized that the client wasn't capable of resolving the URL that I was passing for the login page. This was because I was passing an external DNS server. Check that first. I resolved that by passing the IP in the URL, although you could create a cname that resolves to 1.1.1.1.\nThe second time, it was a certificate issue. Some default browsers won't show the splash screen if the user must accept a self-signed certificate. I would test that by manually browsing to the splash screen or login page from a client that does not automatically show it.\nHope one of those helps you out. I know that I was ready to pull my hair out when I saw this the first time. \n", "routing - How would a router with /32 WAN subnet mask communicate with the rest of the Internet?": "\nDSL tends to use PPPoE, which means the link is point-to-point.  A /32 is perfectly valid here. In fact, no address at all is still valid -- one would need routable addresses beyond the PPP link, 'tho.  In this case, it works because there's only one possible destination on the link.  Every packet put on that link will be processed by the other end, and v.v.\nblue-gw#show int di1\n Dialer1 is up, line protocol is up (spoofing)\n Description: Bellsouth.net DSL\n Internet address is 74.167.x.x/32\n\nRouting:\n Gateway of last resort is 72.157.24.5 to network 0.0.0.0\n ...\n      72.0.0.0/32 is subnetted, 1 subnets\n C       72.157.24.5 is directly connected, Dialer1\n      74.0.0.0/32 is subnetted, 1 subnets\n C       74.167.x.x is directly connected, Dialer1\n\n", "cisco - How to connect 5 different networks together?": "\n3 routers sounds like overkill to me but it would be interesting to see the topology and hear him explain the reason behind it.\nDepending on your requirements for redundancy and/or loadbalancing a 1921/1941 could be fine for your needs. That would be only one device because it has both routing and switching if you stick a HWIC Etherswitch card in it. \nThe high availability design would be to have two routers and two switches but then the servers should be dually connected as well.\n", "juniper - What are some workarounds / fixes for UTM/IDP on Junos 12.1X44-D10.4 for SRX Series branch devices?": "\nIt appeared this was an easy fix (I also tried 12.1R6.5 and 12.1X44-D11.5, to no avail).\nFirst, I looked at the version of the signature DB that it's trying to download (2263):\n netops> request security idp security-package download check-server    \n Successfully retrieved from(https://services.netscreen.com/cgi-bin/index.cgi).\n Version info:2263(Detector=12.6.160130325, Templates=2263)\n\nThen, I decided that this is possibly an actual bad md5 checksum (per what Junos expects), and I downloaded the previous version, 2262:\n netops> request security idp security-package download version full-update 2262    \n Will be processed in async mode. Check the status using the status checking CLI\n\nIt worked!  I've had to do something similar on Netscreen, but it's been a while.  I turned off automated updates, and I can get back to studying.\n netops> request security idp security-package download status    \n Done;Successfully downloaded from(https://services.netscreen.com/cgi-bin/index.cgi).\n Version info:2262(Tue May 14 16:27:00 2013 UTC, Detector=12.6.160130325)\n\nNow that the download is finished, everything is installing properly:\n netops> request security idp security-package install          \n Will be processed in async mode. Check the status using the status checking CLI\n\n netops> request security idp security-package install status \n In progress:performing DB update...\n\n netops> request security idp security-package install status    \n In progress:performing DB update for an xml (groups.xml)\n\n netops> request security idp security-package install status\n In progress:performing DB update for an xml (applications.xml)\n\n etc.\n\n netops> request security idp security-package install status    \n Done;Attack DB update : successful - [UpdateNumber=2262,ExportDate=Tue May 14 16:27:00   2013 UTC,Detector=12.6.160130325]\n Updating control-plane with new detector : successful\n Updating data-plane with new attack or detector : not performed\n  due to no active policy configured.\n\nI'm thinking that this is either a bug in SRX110H-VA, a combination of hardware/software release, or bad signature updates on services.netscreen.com.  I'm pretty sure that I could just look through the XML, and figure out where the bad md5sum is (and fix it by hand), but I'll follow up once I hear back from Juniper.\nNewest edit: I also had to manually download the policy template from Juniper, extract it with gzip -d templates.xml.gz, and place it in /var/db/idpd/sec-download/sub-download/.  Once that was done, I was able to install it.  The issue here is that the request security idp security-package install policy-templates command does not take a 'version', like the other idp commands.  This will always be an issue when the head IDP policy has md5 errors, although I would hope that this isn't a frequent occurrence at Juniper.\n netops> request security idp security-package install policy-templates \n Will be processed in async mode. Check the status using the status checking CLI\n\n netops> request security idp security-package install status              \n Done;policy-templates has been successfully updated into internal repository\n (=>/var/db/scripts/commit/templates.xsl)! \n\n", "cisco ios 12 - Configuring HSRP on Nexus OS": "\nOn a Cisco Nexus switch, the syntax for HSRP is actually \"HSRP\" instead of \"Standby\".\nIn my experience, it makes it easier to troubleshoot as you know immediately which redundancy protocol you're dealing with (HSRP, GLBP, or VRRP).\nSee this Cisco doc for more information on HSRP on the Nexus 7000 platform.\n\nFirst, be sure that you have enabled HSRP on the device:\nswitch-b(config)#feature hsrp\n\nThen go into the interface and issue the command \"hsrp groupnumber\".   You will then be able to enter your configuration similarly to in IOS.  This actually takes you into a sub-configuration mode as shown below:\nswitch-b(config)#interface Eth1/1 \nswitch-b(config-if)#ip address 10.1.1.3/24\nswitch-b(config-if)#hsrp 10\nswitch-b(config-if-hsrp)#preempt\nswitch-b(config-if-hsrp)#priority 90\nswitch-b(config-if-hsrp)#ip 10.1.1.1\n\nDon't forget to \"no shut\" the interface, but then that should do it!\n\nAlso, I just realized that Cisco has a great writeup on these differences here on their DocWiki.\n", "Cisco ISR G2 encrypted bandwidth restriction?": "\nYou are running into one of the fun, new, restrictions of the ISR Generation 2.\nI assume you have the basic \"security\" licensing package installed as noted by this part of the message:\nsecurityk9 technology package license\n\nHowever the securityk9 package is Cisco's \"unrestricted export\" version of that license, and will artificially limit you.  You need the hseck9 package.  See this white paper for more information.  It says in part:\n\nThe HSEC-K9 license removes the curtailment enforced by the U.S. government export restrictions on the encrypted tunnel count and encrypted throughput. HSEC-K9 is available only on the Cisco 2921, Cisco 2951, Cisco 3925, Cisco 3945, Cisco 3925E, and Cisco 3945E. \nWith the HSEC-K9 license, the ISR G2 router can go over the curtailment limit of 225 tunnels maximum for IP Security (IPsec) and encrypted throughput of 85-Mbps unidirectional traffic in or out of the ISR G2 router, with a bidirectional total of 170 Mbps.\nThe Cisco 1941, 2901, and 2911 already have maximum encryption capacities within export limits. The HSEC license requires the universalk9 image and the SEC license pre-installed.\n\n\nA quick way to check which license you have, is to issue the following command on your router:\nshow license feature\n\nThis will show you which licenses you have purchased from Cisco and installed on this router.  You need to make sure that the hseck9 license is enabled.  Otherwise you will be limited to that 85Mbps limit for encrypted traffic.  Which on circuits below 100Mbps, might not be an issue, and you could safely ignore this problem.  Either way, see this page for more information on installing the new license once you purchase it.\n\nAnother handy command for troubleshooting this is:\nshow platform cerm-information\n\nThis will either spit out a list of information about the limits in place, including the failed encrypt/decrypt packet counts, or it will give you the following:\nrouter-1#show platform cerm-information \nCrypto Export Restrictions Manager(CERM) Information:\n CERM functionality: DISABLED\n\nMore information on this command here.\n", "cisco asa - ASA5505 and IPv6 over a PPPoE Link": "\nAs per the advice from Ricky Beam I opened a Cisco TAC case for this issue, just to see what the official word is:\n\nHi Mark,\nthanks.  At this time, the ASA does not have native IPv6 PPPOE\n  support.  I have not seen it on any future roadmap.  You may want to\n  contact your local cisco team to see if they can submit a request by\n  putting in a business case for you.\n\n(emphasis mine). So no, there is no way to do IPv6 on an ASA using a PPPoE connection, and it doesn't look like it is coming any time soon. I guess they expect you to put a proper router infront of the ASA instead.\n", "Juniper SRX240 Clustering - Policy out of sync": "\nYou description is implying the issue is between the primary and secondary nodes, but the article is referencing an out of sync between the Control Plane and Data Plane ( or Routing Engine and Packet Forwarding Engine. \nIf it is indeed the PFE out of Sync you might also try the hidden command 'commit full'.\nI know I had an issue where my 2 routing engines were out of sync. I don't recall if it was on a cluster SRX or something like a VC switch or dual RE router. In my case it was because I had issued a 'commit confirmed' and let the timer expire. The backup RE was out of sync. I had to log into the backup RE and manually do a 'rollback 1' to get them back in sync.\n", "cisco - Are there any reasons to not use BFD?": "\nI am only directly aware of one issue with BFD, which is CPU demand. I am currently investigating an issues with a Cisco 7301 which when pushing more traffic during our peak hours, compared to the rest of the day, BFD is sometimes timing out and routing trips over to the next link.\nIt seems that under high traffic volumes the router CPU usage is rising (which isn't unusual) but at about 40-50% CPU BFD packets aren't receiving enough resources.\nHowever I have found the following information which suggests additional issues with BFD (From this NANOG presentation, there is more in the presentation, it's a good one, give it a read!)\nWhat are the caveats?\n\nTwo main ones:\n\nBFD can have high resource demands depending on your\nscale.\nBFD is not visible to Layer 2 bundling protocols. (Ethernet\nLAGs or POS bundles)\n\n\nBFD Resource Demands\n\nThe number of BFD sessions on each linecard or router can\nimpact how well BFD scales for you.\n-Each unique platform has its own limits.\nBundled interfaces supporting min tx/rx of 250ms or 2 seconds have\nbeen seen.\nIn some cases, BFD instances on a router may need to be operated on\nthe route-processor depending on the implementation (non-adjacency\nbased BFD sessions).\nTest your platform first before deploying BFD. Attempt to put\nload on the RP or LC CPU with your configured settings. This\ncan be done by:\nExecuting CPU-heavy commands\nFlooding packets to TTL expire on the destination\n\nBFD Resource Demands (cont\u2019d)\n\nWhat values are safe to try?\nBased upon speaking to several operators, 300ms with a\nmultiplier of 3 (900ms detection) appears to be a safe value\nthat works on most equipment fairly well.\nThis is a significant improvement over some of the\nalternatives.\n\nBFD and L2 link-bundling\n\nBFD is unaware of underlying L2 link bundle members.\nA 4x10GigE L2 bundle (802.3ad) would appear as a single L3\nadjacency. BFD packets would be transmitted on a single\nmember link, rather than out all 4 links.\nA failure of the link with BFD on it would result in the entire L3\nadjacency failing.\nHowever, in some scenarios the failed member link may result in only a\nsingle BFD packet being dropped. Subsequent packets may route over\nworking member links.\n\n", "cisco - What is the 5 level QoS model (through config example)?": "\nCisco has something they call Cisco Validated Designs (CVD). These are network designs from different perspectives like QoS, high availability, WAN etc that Cisco recommends and have tested.\nFor QoS they have 3 different designs with 4, 8 or 12 classes which can be seen in the picture below.\n\nStarting with the 4 class model:\n! This section defines the 4-Class class-maps \n! (three are explicitly defined and one is default)\nRouter(config)# class-map match-any REALTIME\nRouter(config-cmap)# match dscp ef\n ! Matches VoIP\nRouter(config-cmap)# match dscp cs5\n ! Matches Broadcast Video\nRouter(config-cmap)# match dscp cs4\n ! Matches Realtime-Interactive\n\nRouter(config)# class-map match-any CONTROL\nRouter(config-cmap)# match dscp cs6\n ! Matches Network-Control\nRouter(config-cmap)# match dscp cs3\n ! Matches Signaling (control-plane traffic for voice/video infrastructure)\nRouter(config-cmap)# match dscp cs2\n ! Matches Network Management\n\nRouter(config)# class-map match-any CRITICAL-DATA\nRouter(config-cmap)# match dscp af41 af42 af43\n ! Matches Multimedia Conferencing on AF4 \nRouter(config-cmap)# match dscp af31 af32 af33\n ! Matches Multimedia Streaming on AF3\nRouter(config-cmap)# match dscp af21 af22 af23\n ! Matches Transactional Data on AF2\nRouter(config-cmap)# match dscp af11 af12 af13\n ! Matches Bulk Data on AF1\n\n\n! This section defines the 4-Class Policy-Map\nRouter(config)# policy-map WAN-EDGE-4-CLASS\nRouter(config-pmap)# class REALTIME\nRouter(config-pmap-c)# priority percent 33\n ! Provisions 33% LLQ for REALTIME class\nRouter(config-pmap-c)# class CONTROL\nRouter(config-pmap-c)#  bandwidth percent 7\n ! Provisions 7% CBWFQ for CONTROL class\nRouter(config-pmap-c)# class CRITICAL-DATA\nRouter(config-pmap-c)#  bandwidth percent 35\n ! Provisions 35% CBWFQ for CRITICAL-DATA class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on CRITICAL-DATA class\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on CRITICAL-DATA class\nRouter(config-pmap-c)#   random-detect dscp af11 50 64\n ! Tunes WRED min and max drop-thresholds for AF11/10 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af12 45 64\n ! Tunes WRED min and max drop-thresholds for AF12/12 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af13 40 64\n ! Tunes WRED min and max drop-thresholds for AF13/14 to 40 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af21 50 64\n ! Tunes WRED min and max drop-thresholds for AF21/18 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af22 45 64\n ! Tunes WRED min and max drop-thresholds for AF22/20 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af23 40 64\n ! Tunes WRED min and max drop-thresholds for AF23/22 to 40 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af31 50 64\n ! Tunes WRED min and max drop-thresholds for AF31/26 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af32 45 64\n ! Tunes WRED min and max drop-thresholds for AF32/28 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af33 40 64\n ! Tunes WRED min and max drop-thresholds for AF33/30 to 40 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af41 50 64\n ! Tunes WRED min and max drop-thresholds for AF41/34 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af42 45 64\n ! Tunes WRED min and max drop-thresholds for AF42/36 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af43 40 64\n ! Tunes WRED min and max drop-thresholds for AF43/38 to 40 and 64 packets\nRouter(config-pmap-c)# class class-default\nRouter(config-pmap-c)#  bandwidth percent 25\n ! Provisions 25% CBWFQ for default (Best-Effort) class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on default (Best-Effort) class\nRouter(config-pmap-c)#  queue-limit 128 packets\n ! Expands queue-limit to 128 packets\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on default (Best-Effort) class\nRouter(config-pmap-c)#   random-detect dscp default 100 128\n ! Tunes WRED min and max drop-thresholds for DF/0 to 100 and 128 packets\nRouter(config-pmap-c)#   random-detect dscp cs1 60 100\n ! Tunes WRED min and max drop-thresholds for CS1/8 to 60 and 100 packets\n\nAs you can see it matches on different DSCP values. DSCP EF is generally used for VoIP. This means that your packets should already have been marked as early as possible in your network. The bandwidth values are entered in percent which means that the policy can applied on different speed interfaces and still provide good values compared to entering them in kbit/s. On very high speed interfaces like 10 Gbit it could be a lot to use 7% for control traffic though since that would be 700 Mbit/s.\nBoth the data and the class-default uses fair-queue which is a way of queueing packets based on DSCP and packet size to provide fair queueing even for small packet flows. To be able to use this you need an image supporting Hierarchical Queing Framework (HQF) which is 12.4(20)T or newer.\nWeighted Random Early Detection (WRED) is also applied to take care of issues like TCP synchronization where TCP flows will speed up and back off at the same time.\nThen you have the 8 class model.\n! This section defines the 8-Class class-maps \n! (seven are explicitly defined and one is default)\nRouter(config)# class-map match-all VOICE\nRouter(config-cmap)# match dscp ef\n ! Matches VoIP\n\nRouter(config)# class-map match-any INTERACTIVE-VIDEO\nRouter(config-cmap)# match dscp cs5\n ! Matches Broadcast Video\nRouter(config-cmap)# match dscp cs4\n ! Matches Realtime-Interactive\nRouter(config)# class-map match-any NETWORK-CONTROL\nRouter(config-cmap)# match dscp cs6\n ! Matches Network Control\nRouter(config-cmap)# match dscp cs2\n ! Matches Network Management\n\nRouter(config)# class-map match-all SIGNALING\nRouter(config-cmap)# match dscp cs3\n ! Matches Signaling\n\nRouter(config)# class-map match-all MULTIMEDIA-STREAMING\nRouter(config-cmap)# match dscp af31 af32 af33\n ! Matches Multimedia-Streaming on AF3\n\nRouter(config)# class-map match-any CRITICAL-DATA\nRouter(config-cmap)# match dscp af41 af42 af43\n ! Matches Multimedia-Conferencing on AF4\nRouter(config-cmap)# match dscp af21 af22 af23\n ! Matches Transactional-Data on AF2\nRouter(config-cmap)# match dscp af11 af12 af13\n ! Matches Bulk-Data on AF1\n\nRouter(config)# class-map match-all SCAVENGER\nRouter(config-cmap)# match dscp cs1\n ! Matches Scavenger\n\n\n! This section configures the 8-class policy-map\nRouter(config)# policy-map WAN-EDGE-8-CLASS\nRouter(config-pmap)# class VOICE\nRouter(config-pmap-c)#  priority percent 10\n ! Provisions 10% LLQ for VOICE class (dual LLQ-policy)\nRouter(config-pmap-c)# class INTERACTIVE-VIDEO\nRouter(config-pmap-c)#  priority percent 23\n ! Provisions 23% LLQ for INTERACTIVE-VIDEO class (dual-LLQ policy)\nRouter(config-pmap-c)# class NETWORK-CONTROL\nRouter(config-pmap-c)#  bandwidth percent 5\n ! Provisions 5% CBWFQ for NETWORK-CONTROL class\nRouter(config-pmap-c)# class SIGNALING\nRouter(config-pmap-c)#  bandwidth percent 2\n ! Provisions 2% CBWFQ for SIGNALING class\nRouter(config-pmap-c)# class MULTIMEDIA-STREAMING\nRouter(config-pmap-c)#  bandwidth percent 10\n ! Provisions 10% CBWFQ for MULTIMEDIA-STREAMING class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on MULTIMEDIA-STREAMING class\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on MULTIMEDIA-STREAMING class\nRouter(config-pmap-c)#   random-detect dscp af31 50 64\n ! Tunes WRED min and max drop-thresholds for AF31/26 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af32 45 64\n ! Tunes WRED min and max drop-thresholds for AF32/28 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af33 40 64\n ! Tunes WRED min and max drop-thresholds for AF33/30 to 40 and 64 packets\nRouter(config-pmap-c)# class CRITICAL-DATA\nRouter(config-pmap-c)#  bandwidth percent 24\n ! Provisions 24% CBWFQ for CRITICAL-DATA class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on CRITICAL-DATA class\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on CRITICAL-DATA class\n\n\nRouter(config-pmap-c)#   random-detect dscp af11 50 64\n ! Tunes WRED min and max drop-thresholds for AF11/10 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af12 45 64\n ! Tunes WRED min and max drop-thresholds for AF12/12 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af13 40 64\n ! Tunes WRED min and max drop-thresholds for AF13/14 to 40 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af21 50 64\n ! Tunes WRED min and max drop-thresholds for AF21/18 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af22 45 64\n ! Tunes WRED min and max drop-thresholds for AF22/20 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af23 40 64\n ! Tunes WRED min and max drop-thresholds for AF23/22 to 40 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af41 50 64\n ! Tunes WRED min and max drop-thresholds for AF41/34 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af42 45 64\n ! Tunes WRED min and max drop-thresholds for AF42/36 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af43 40 64\n ! Tunes WRED min and max drop-thresholds for AF43/38 to 40 and 64 packets\nRouter(config-pmap-c)# class SCAVENGER\nRouter(config-pmap-c)#  bandwidth percent 1\n ! Constrains Scavenger class to 1% CBWFQ\nRouter(config-pmap-c)# class class-default\nRouter(config-pmap-c)#  bandwidth percent 25\n ! Provisions 25% CBWFQ for default (Best-Effort) class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on default (Best-Effort) class\nRouter(config-pmap-c)#  queue-limit 128 packets\n ! Expands queue-limit to 128 packets\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on default (Best-Effort) class\nRouter(config-pmap-c)#   random-detect dscp default 100 128\n ! Tunes WRED min and max drop-thresholds for DF/0 to 100 and 128 packets\n\nThis policy is more granular for the realtime applications like video, streaming and signaling for these protocols.\nFinally this is the 12 class model.\n! This section configures the class-maps\n! (eleven class maps are explicitly defined and one is default)\nRouter(config)# class-map match-all VOICE\nRouter(config-cmap)# match dscp ef\n ! Matches VoIP\n\nRouter(config)# class-map match-all BROADCAST-VIDEO\nRouter(config-cmap)# match dscp cs5\n ! Matches Broadcast Video\n\nRouter(config)# class-map match-all REALTIME-INTERACTIVE\nRouter(config-cmap)#  match dscp cs4\n ! Matches Realtime-Interactive\n\nRouter(config)# class-map match-all NETWORK-CONTROL\nRouter(config-cmap)# match dscp cs6\n ! Matches Network Control\n\nRouter(config)# class-map match-all SIGNALING\nRouter(config-cmap)# match dscp cs3\n ! Matches Signaling\n\nRouter(config)# class-map match-all NETWORK-MANAGEMENT\nRouter(config-cmap)# match dscp cs2\n ! Matches Network Management\n\nRouter(config)# class-map match-any MULTIMEDIA-CONFERENCING\nRouter(config-cmap)# match dscp af41\nRouter(config-cmap)# match dscp af42\nRouter(config-cmap)# match dscp af43\n ! Matches Multimedia-Conferencing\n ! One match statement per Drop Precedence increases visibility\n\nRouter(config)# class-map match-any MULTIMEDIA-STREAMING\nRouter(config-cmap)# match dscp af31\nRouter(config-cmap)# match dscp af32\nRouter(config-cmap)# match dscp af33\n ! Matches Multimedia-Streaming\n ! One match statement per Drop Precedence increases visibility\n\nRouter(config)# class-map match-any TRANSACTIONAL-DATA\nRouter(config-cmap)# match dscp af21\nRouter(config-cmap)# match dscp af22\nRouter(config-cmap)# match dscp af23\n ! Matches Transactional-Data\n ! One match statement per Drop Precedence increases visibility\n\nRouter(config)# class-map match-any BULK-DATA\nRouter(config-cmap)# match dscp af11\nRouter(config-cmap)# match dscp af12\nRouter(config-cmap)# match dscp af13\n ! Matches Bulk-Data\n ! One match statement per Drop Precedence increases visibility\n\nRouter(config)# class-map match-all SCAVENGER\nRouter(config-cmap)# match dscp cs1\n ! Matches Scavenger\n\n\n! This section configures the 12-Class policy-map\nRouter(config)# policy-map WAN-EDGE-12-CLASS\nRouter(config-pmap)# class VOICE\nRouter(config-pmap-c)#  priority percent 10\n ! Provisions 10% LLQ to VOICE class (multi-LLQ policy)\nRouter(config-pmap-c)# class BROADCAST-VIDEO\nRouter(config-pmap-c)#  priority percent 10\n ! Provisions 10% LLQ to BROADCAST-VIDEO class (multi-LLQ policy)\nRouter(config-pmap-c)# class REALTIME-INTERACTIVE\nRouter(config-pmap-c)#  priority percent 13\n! Provisions 13% LLQ to REALTIME-INTERACTIVE class (multi-LLQ policy)\nRouter(config-pmap-c)# class NETWORK-CONTROL\nRouter(config-pmap-c)#  bandwidth percent 2\n ! Provisions 2% CBWFQ to NETWORK-CONTROL class\nRouter(config-pmap-c)# class SIGNALING\nRouter(config-pmap-c)#  bandwidth percent 2\n ! Provisions 2% CBWFQ to SIGNALING class\nRouter(config-pmap-c)# class NETWORK-MANAGEMENT\nRouter(config-pmap-c)#  bandwidth percent 3\n ! Provisions 3% CBWFQ to NETWORK-MANAGEMENT class\nRouter(config-pmap-c)# class MULTIMEDIA-CONFERENCING\nRouter(config-pmap-c)#  bandwidth percent 10\n ! Provisions 10% CBWFQ to MULTIMEDIA-CONFERENCING class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on MULTIMEDIA-CONFERENCING class\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on MULTIMEDIA-CONFERENCING class\nRouter(config-pmap-c)#   random-detect dscp af41 50 64\n ! Tunes WRED min and max drop-thresholds for AF41/34 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af42 45 64\n ! Tunes WRED min and max drop-thresholds for AF42/36 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af43 40 64\n ! Tunes WRED min and max drop-thresholds for AF43/38 to 40 and 64 packets\nRouter(config-pmap-c)# class MULTIMEDIA-STREAMING\nRouter(config-pmap-c)#  bandwidth percent 10\n ! Provisions 10% CBWFQ to MULTIMEDIA-STREAMING class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on MULTIMEDIA-STREAMING class\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on MULTIMEDIA-STREAMING class\nRouter(config-pmap-c)#   random-detect dscp af31 50 64\n ! Tunes WRED min and max drop-thresholds for AF31/26 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af32 45 64\n ! Tunes WRED min and max drop-thresholds for AF32/28 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af33 40 64\n ! Tunes WRED min and max drop-thresholds for AF33/30 to 40 and 64 packets\nRouter(config-pmap-c)# class TRANSACTIONAL-DATA\nRouter(config-pmap-c)#  bandwidth percent 10\n ! Provisions 10% CBWFQ to TRANSACTIONAL-DATA class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on TRANSACTIONAL-DATA class\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on TRANSACTIONAL-DATA class\nRouter(config-pmap-c)#   random-detect dscp af21 50 64\n ! Tunes WRED min and max drop-thresholds for AF21/18 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af22 45 64\n ! Tunes WRED min and max drop-thresholds for AF22/20 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af23 40 64\n ! Tunes WRED min and max drop-thresholds for AF23/22 to 40 and 64 packets\nRouter(config-pmap-c)# class BULK-DATA\nRouter(config-pmap-c)#  bandwidth percent 4\n ! Provisions 4% CBWFQ to BULK-DATA class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on BULK-DATA class\nRouter(config-pmap-c)#   random-detect dscp-based\n! Enables DSCP-based WRED on BULK-DATA class\nRouter(config-pmap-c)#   random-detect dscp af11 50 64\n ! Tunes WRED min and max drop-thresholds for AF11/10 to 50 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af12 45 64\n ! Tunes WRED min and max drop-thresholds for AF12/12 to 45 and 64 packets\nRouter(config-pmap-c)#   random-detect dscp af13 40 64\n ! Tunes WRED min and max drop-thresholds for AF13/14 to 40 and 64 packets\nRouter(config-pmap-c)# class SCAVENGER\nRouter(config-pmap-c)#  bandwidth percent 1\n ! Constrains Scavenger to 1% CBWFQ\nRouter(config-pmap-c)# class class-default\nRouter(config-pmap-c)#  bandwidth percent 25\n ! Provisions 25% CBWFQ for default (Best-Effort) class\nRouter(config-pmap-c)#  fair-queue\n ! Enables fair-queuing pre-sorter on default (Best-Effort) class\nRouter(config-pmap-c)#  queue-limit 128 packets\n ! Expands queue-limit to 128 packets\nRouter(config-pmap-c)#   random-detect dscp-based\n ! Enables DSCP-based WRED on default (Best-Effort) class\nRouter(config-pmap-c)#   random-detect dscp default 100 128\n ! Tunes WRED min and max drop-thresholds for DF/0 to 100 and 128 packets\n\nThis policy has even more classes for interactive traffic and also more classes for different types of data and a management class.\nFinally you have to apply the policy to an interface like this.\nint gix/x\nservice-policy output WAN-EDGE-12-CLASS\nHere is a link to WAN QoS CVD.\n", "monitoring - How can I capture traffic on Cisco IOS switches?": "\nThe client switchport or the server switchport can be monitored. A third switchport can be configured as a mirror port. This means that this mirror port will receive copies of all packets on the corresponding original port, while the original traffic won't be affected.\nFor example, on the Catalyst 3560:\n\nEnter configuration mode:\nconf t\n\nDefine the source and set the session number:\nmonitor session 1 source interface fa 0/24\n\nHere, the session number can be from 1 to 66, you could also specify a VLAN or an ethernet channel. Also, interface ranges such as fa 0/25 - 26 are possible, and interface list, such as fa 0/24,fa 0/26, if you would like to monitor several clients at the same time. Also by repeating the command you can add ports, or remove using no. Mixing ports and VLANs is not possible in the same session, another restriction is that you cannot use a destination port as a source port. \nDefine the destination port:\nmonitor session 1 destination interface gi 0/1\n\nYou can use a normal port, but not a VLAN. Similarly to above, a destination port cannot be a source port: a port used here can either be a source or a destination port, and only of one session. Again, you can specify multiple ports like above.\nYou may want to exit configiration mode and save the config.\nYou may have a look at your defined session - here multiple ports, tried like above:\n#show monitor session 1\nSession 1\n---------\nType                   : Local Session\nSource Ports           :\n    Both               : Fa0/24,Fa0/25-26\nDestination Ports      : Fa0/48,Gi0/1\n    Encapsulation      : Native\n          Ingress      : Disabled\n\nYou can see an encapsulation here - optionally you can set it to replicate for replicating the source interface encapsulation method, such as by adding encapsulation replicate after the source interface. Furthermore, you can specify a direction (tx, rx, both), filter VLANs and more. The Ingress: Disabled line means that the switch will not accept any frames presented to it by your capture device on a destination port. For such finer details and for further restrictions and default settings have a look at the command reference of the IOS version of your switch. \n\nOnce you configured source and destination port, you can capture the traffic using your laptop connected to the destination port, for example with Wireshark.\nThe number of source sessions can be limited, for example the 3560 supports a maximum of 2.\nAfter the capturing, don't forget to remove this session configuration.\n", "ipv4 - How can I formulate the communication latency in TCP/IP?": "\nThis is a very complicated process, so to formulate an equation that could be useful for accurately predicting RTTs is extremely difficult. At best, I would say you could create a model that using a bunch of averages for each stage, that you could tweak if you happen to \"know better\" for a particular situation is about as close as you can get. This is something I am presently studying so I can tell you what I know so far (from the ground up, starting at the physical layer):\n\nSee my questions on the Electronics SE; Encoding delay of Ethernet and the relation to cable frequency rating and Speed of electricity (signal propagation?) through copper for communications delay. Since you would be using standardised speeds (100Mbps, 1Gbps, 10Gbps etc), don't treat fibre or copper differently. The \"delay\" down the two is near as damn it the same, but copper can't carry a signal as far obviously. I have this question on the Physics SE site, which I do know the answer to now. I just need to find the time to right it up, so keep an eye on that if you are interested (I will be posting some more telecoms-use-of-fibre related questions to which I now know the answer when I get a chance).\nMuch more delay is going to be added in by the devices at the end of a link. There is no standard way of saying \"oh 2 switches along a path is Xms delay, 4 switches is 2*Xms, 2 routers is Yms...etc\". Assuming you are using say 1Gpbs for example and the devices in the path forward at line rate, we know that is 1000000000bps, so the physical interface is running at a fixed encoding rate (ranging from 1 nanosecond per bit up to whatever the max of the symbol encoding scheme in use is, such as 10b)\nThere are three main kinds of delay (at the physical layer) you need to be aware of and factor in; Serialisation delay, encoding delay, propagation delay (and processing delay, queueing delay, encode and decoding delay, but these are above the physical layer but need mentioning!). These are reasonably well documented on the Internet, VoIP: An In-Depth Analysis, Slide 13 here, loads on Google Scholar, and many more.\nAs we move up the protocol stack, I would work on the assumption that the destination MAC is in each switches cam table, and at the IP layer, the destination MAC in ARP tables. The extra delay induced by these discovery processes only occurs for the first packet in a flow so they can be circumvented by raising time-outs and sending gratuitous ARPs etc.\nAs you get to the application layer this is going to get really difficult because this depends on the server (for example) processing the request, which will be subject to interrupt delay. The number of interrupts required to process the request and context switches due to load is unpredictable.\n\nI would very much like to help you with your question, sadly this is all I have time for right now. I will update this answer maybe later tonight or tomorrow, I wanted to post what I have so far.\nIn the mean time, most people tend to work with the figure for the delay at a physical copper/fibre layer of around 0.6*c (C = speed of light). Also, you need to think about TCP's exchange of ACKs every X packets, which differs if you are using SACK for example, and if you're using jumbo frames and/or larger MSS size (now MTU needs to be factored in also!), if you're sending more in-between ACKs (if volume of data transferred is of interest to you). You also need to factor in the infamous Bandwidth Delay Product and don't make the stupid misinterpretation that I did of that page. I started making various simple (and very ugly) data calculators here. Again a work in progress I will try and update them soon. I plan to add a calculator similar to what you are trying to do. I have also made some light and fibre calculators if you are interested, but again, no time!, I haven't gotten round to uploading them yet. I will try ASAP to update this answer some more, in the coming days.\nP.S. I forgot to mention QoS! If QoS is in play anywhere in the path, it's going to get really tough to caluclate the RTT!\n", "How can I reset a VPN tunnel on a Cisco ASA?": "\nThe VPN can be reset by entering\nclear crypto ipsec sa peer <remote-peer-IP>\n\non one side. The following traffic will cause the IPSEC tunnel to be reestablished.\nYou can do it on your side, entering the remote IP. Or login to the remote site, but possibly you have to do it outside the VPN, so using a different interface, for example using the public IP instead of the IP to which you connect through the tunnel.\nThere will be a short VPN outage while reestablishing the tunnel. After entering that command, ensure that the tunnel is up again, such as doing a ping through it.\n", "cisco - How can I see which switchports are not in use?": "\nI frequently use\nsh int | i (FastEthernet|0 packets input)\n\nor the same with GigabitEthernet, whatever kind of interfaces I want to check.\n\nsh int (which is show interfaces) gives a huge list of ste status of all interfaces\nThe pipe symbol | can be used for filtering, but also in search expressions \n| i (for include) filters the output which matches the following search expressions\nI use (...|...) to match two conditions: the interface name and a status I like to see, we can use regular expressions here, like this \"or\" expression\n\nThe output can look like:\n...\nFastEthernet1/0/31 is up, line protocol is up (connected)\n     95445640 packets input, 18990165053 bytes, 0 no buffer\nFastEthernet1/0/32 is up, line protocol is up (connected)\nFastEthernet1/0/33 is up, line protocol is up (connected)\nFastEthernet1/0/34 is down, line protocol is down (notconnect)\n     0 packets input, 0 bytes, 0 no buffer\nFastEthernet1/0/35 is down, line protocol is down (notconnect)\nFastEthernet1/0/36 is up, line protocol is up (connected)\nFastEthernet1/0/37 is down, line protocol is down (notconnect)\n     0 packets input, 0 bytes, 0 no buffer\n...\n\nNow I can see my candidates, with actually 0 packets input over time, even if my expression matches numbers just ending with 0. I could make it more perfect, but being easy to remember is also a benefit. The interface names right before each 0 packets input lines are my candidates.\n\nCheck each chosen interface if it's really unused by sh int <name>\nFrom time to time, it's good to clear the counters: clear counters [type number]\n\nIt can be good practice, to leave unused switchports shutdown. So it's easy to identify them using sh ip int bri or the like. And you don't run into problems if you use a switchport which was definitly shut off before.\n", "switch - Why does \"show interface\" show \"Last input never\" when packets input is incrementing?": "\nThere are several interface counters that don't work as well as they used to.  Sometimes this is because the chassis/router has a 'fast' switching mode (CEF, or something else), and that particular 'bucket' never gets hit.  Another reason might be that that particular counter only works in L3 mode instead of L2 mode.  This kind of stuff is quite common, unfortunately on cisco products, particularly on the 6500 which has an enormous amount of legacy code/architecture weighing it down.\n", "security - What is the name of these broadband street cabinet connectors, and are they secure?": "\n\"Connectors\"??? The blue distribution block? (possibly a distribution amp) The little \"caps\" -- actually terminators? Or the RG-59 compression crimps on the cables?\nIt's as secure as the cabinet. (which is often not that secure) Almost everything on a cable network these days is encrypted, so a physical tap wouldn't do as much good as you might think.  And it's all a shared medium anyway, anyone on that block can see everyone else's traffic.\nThe mess on the right appears to be analog POTS lines, but could be anything.\n", "monitoring - How can I capture traffic on a Brocade XMR, MLX, CER or CES?": "\nThe best solution is to plug a computer running a packet analysis software like Wireshark to an unused port and duplicate the traffic to this port. This is called mirroring and monitoring. Here is how to do this on a Brocade MLX, XMR, CER or CES :\nFirst configure the mirroring port. This is the port you will plug you packet analyzer, ethe 3/1 here.\nBrocade(config)# mirror-port ethernet 3/1\n\nNext, go to a port where the traffic you want to see is flowing (here, ethe 4/1), and specify this is a monitored port, and where you want the traffic to be sent :\nBrocade(config)# interface ethernet 4/1\nBrocade(config-if-4/1)# monitor ethernet 3/1 both\n\nNote : both can be replaced by either input or output if you only want to analyze input or output traffic.\nFor more information, see the documentation.\nIf you are looking for the documentation for VDX products, see here. For ICX devices, see here.\n", "cisco asa - Will ASA 5540 support 3000 simultaneous IPsec connections?": "\nIn our HQ's DC, we have a dual 100 Mbps Internet Gateway Router (that's our bottle neck for the WAN). We've had 500-700 sites connect back after an outage at once with no issue - easily sustaining 2800 locations full time. The spec's say it can support 5000 total, just make sure you order the right Memory + CPU specs as well, more memory than anything else.\nYour bottle neck will be your WAN connection from my experience.\n", "monitoring - Daily, Weekly and Monthly Reports from Solarwinds?": "\nThey keep moving things into the web interface but the reports are in a separate app called \"Report Writer\" on the server desktop so you'll have to RDP or physically connect to the server to get to it. There's also a \"Report Scheduler\" where you'll need add the reports once you've created them.\nI've never found their reporting very useful but you may have better luck depending on what you want. In the past I know they've recommended using Crystal Reports against their database to pull detailed reports.\n", "wan optimizer - Is Riverbed Steelhead able to optimize print traffic between print server and a remote printer?": "\nI can confirm that the Steelheads will reduce printer traffic volume.\nI have seen a consistent 90+% reduction in traffic volume for JetDirect (TCP/9100) and LDP (TCP/515) protocols on my network.\nThese protocols are highly used on my network and I am unaware of any issues that have occurred in about 18 months since we deployed the Steelheads.\n", "Cisco active/standby FWSM pair went active/active after switch upgrade": "\nTHE PROBLEM:\nIt turns out we ran into a node limit on the FWSM.  Evidently you can be within your rule limit but hit the node ceiling.  This doc https://supportforums.cisco.com/docs/DOC-8786 details the compilation memory exhaustion issue that hit us.  Quoting:\n\nThis command show np 3 acl stats in the context in question will show\n  if the total nodes is reached. This limit may be reached even before\n  the ACL limit is reached. Each ACE may take a minimum of 2 nodes to a\n  maximum up to to 5 nodes depending on where the ACL is being called.\n  The ACL that is tied to MPF (modular policy framework) may take up\n  more nodes than the ACL that is tied to a NAT or to the access-group.\n  There is no way to calculate the number of nodes. The best way to\n  monitor this is to regularly look at the above output to make sure the\n  node count is not exceeded.\n\nRESOLUTION:\n1. Power down the secondary FWSM and power on the primary.\n2. Revise our configuration by examining which rules could be removed (stale rules and recent changes allowing certain Development environments access to Production) in order to bring down the rule and therefore node count.\n3. Ensure the new config compiles then reset the primary FWSM.\n4. Verify the FWSM comes up clean with no errors.\n5. Power down the primary FWSM and power up the secondary FWSM.\n6. Repeat steps 3 and 4 with the secondary FWSM then power it down.\n7. Power on the primary, ensure it's clean, power on the secondary.\n8. Ensure the primary's config is copied to the secondary and that the primary is Active and sees the secondary as Standby.\nMITIGATION:\n1. We upgraded our development environment (2 x 6509 with Active/Standby FWSM) to FWSM version 4.1(13) from 3.2(23).  The upgrade to the 4.x train increased the maximum node count for us from 28,356 to 38,439.  More information: http://www.cisco.com/en/US/prod/collateral/modules/ps2706/product_bulletin_c25-478751.html.\n2. We will upgrade our Production FWSM during the next change window.\n3. We implemented a Kiwi CatTools job to run the show np 3 acl stats command in our contexts and e-mail us a daily report.  Whenever we make a rule change we also run this command to ensure we're within node and rule limits.\nIt's interesting behavior that the FWSM would allow us to continue adding rules.  It only failed when it was power cycled and tried to compile the rule set.  Lessons learned!\n", "cisco asa - ASA 5550 - Reboot Worthwhile?": "\nShort answer: Yes.\nLonger answer: :-) There are bugs in every piece of software.  The longer it runs, the more likely one is going to setup shop in your network.  But more to the point, the longer it's gone without a reboot, the more little bits of \"old\" configuration and/or status will be left lingering.  In IOS, no interface foo will emit a warning that it's not completely destroyed and configuration elements may reappear if you recreate the interface -- shouldn't happen in an ASA but in rare cases, it does.  I've also seen phantom NAT entries after deleting them from the config. (that one actually is a bug)\nWhen dealing with IPSec/crypto, I've found a whole lot of crazy can be cleared up by a reload.  In one case (pix 6.3.5) it wouldn't re-establish a VPN tunnel until I did.\n[edit] A word on reboots in general: I tend to reboot things just to make sure they will.  All too often I've had various systems (routers, firewalls, servers) running for extended periods -- constantly being modified, and when something ends up restarting them (usually a power outage, but \"oops, wrong machine\" happens too) they rarely come back up exactly as they were before... someone forgot to make X start at boot, or some odd interaction of parts makes something not startup as expected.  I admit, it's less of a concern for more static parts of one's infrastructure.\n", "qinq - Cisco 7600 q-in-q functionality on a Cisco 6500": "\n6500 is generally MPLS ready in terms of label support, LDP support and things like VRFs for MPLS VPNs. Some features may be missing because of specific choice of software and hardware.\nFor example, in your configuration, you'll have very small FIB for services - you have only PFC3B which can hold 256k IPv4 prefixes, or 128k IPv6 prefixes, or half of that for MPLS VPN services (MPLS label takes two entries basically).\nSecond problem you may hit is the fact that while the 6748 LC you have has MPLS tagging support, it will only do 802.1q tunneling - if you need 802.1q swapping and elastic modifications/etc there is a a whole set of different restrictions (port groups) which you can start to deep dive into here:\nhttp://www.cisco.com/en/US/docs/switches/lan/catalyst6500/ios/12.2SX/configuration/guide/dot1qtnl.html#wp1006495\nEssentially, for 6500 to function as fully fledged metro ethernet edge you'll either need SIP linecards (SIP-200 and SIP-400) or ES/ES+ linecards, which are by itself feature-rich for services like tag swapping, services termination, QoS/HQoS etc. The \"LAN cards\" as they're called (WS-X6[1357]xx series) are limited in QoS and L2 manipulation flexibility. \n", "How do I obtain access to buy from Cisco directly?": "\n(while not network engineering per-se, it's a good question)\nUnless you plan on buying millions in equipment and/or software annually, Cisco will not want to deal with you directly.  This is especially true if you're only interested in individual purchases -- that's why they have resellers and channel partners.  If you are, then Cisco will assign you a sales person and sales engineer to meet your needs.\nBecoming a partner/reseller is an involved process, well beyond the scope of stackexchange. (that's a \"how do I start a business\" question.)\n", "Oversubscription in cisco 6500": "\nIt sounds like you're talking about the WS-X6716-10GE.  Over-subscription in this context means you have a 16 x 10GE ports on the front of the LC and no more than 4x10GE at the fabric connection to the rest of the chassis.\nOver-subscription will not matter if you locally switch traffic within the same linecard; however, you will only be able to send up to your fabric connection (i.e. 40Gbps) to other linecards in the same chassis.  So it's possible to get blocking or drops if your links congest the fabric connections.\n", "ethernet - Why does 1000BASE-T need Auto-MDIX?": "\n1000Base-T strictly speaking does not need auto-MIDX.  However, when the standard was written, inter-operation with older technologies was taken into account.  So to keep things simple, when communicating with a 100base or 10base device, auto-MIDX is there so crossover cables are no longer necessary.\nEdit: I forgot to mention, while auto-MIDX is in the standard, it is an optional feature, so it may not be present in all hardware.\n", "cisco - Multi-tenancy TACACS server": "\nI can't speak for ACS as I've only use the open source TACACS daemon but we utilise a SQL backend which allows for different boxes to have completely different routing / policies but still maintain a consistent user DB.\n", "ppp - Please help me understand this ADSL configuration": "\nYou are familiar with IP over PPP over ATM.\nThe config you don't understand is IP over ATM, that is the ATM frames are directly transporting IP frames.\nATM was designed to carry many different protocols using many different encoding methods. \nOne reason some operators (mostly central Europe) choose to add PPP in to the mix is because it allows them to offer access to other operators relatively easily, i.e. the PPP sessions would actually terminate with another operator not where your physical connection is.\n3rd common way to do this is IP over Ethernet over ATM, which is yet another config.\n", "ethernet - Introductory level explanation of VLANs": "\nA VLAN (Virtual LAN) is a way of creating multiple virtual switches inside one physical switch. So for instance ports configured to use VLAN 10 act as if they're connected to the exact same switch. Ports in VLAN 20 can not directly talk to ports in VLAN 10. They must be routed between the two (or have a link that bridges the two VLANs).\nThere are a lot of reasons to implement VLANs. Typically the least of these reasons is the size of the network. I'll bullet list a few reasons and then break each one open.\n\nSecurity\nLink Utilization\nService Separation\nService Isolation\nSubnet Size\n\nSecurity:\nSecurity isn't itself achieved by creating a VLAN; however, how you connect that VLAN to other subnets could allow you to filter/block access to that subnet. For instance if you have an office building that has 50 computers and 5 servers you could create a VLAN for the server and a VLAN for the computers. For computers to communicate with the servers you could use a firewall to route and filter that traffic. This would then allow you to apply IPS/IDS,ACLs,Etc. to the connection between the servers and computers.\nLink Utilization:\n(Edit)I can't believe I left this out the first time. Brain fart I guess. Link utilization is another big reason to use VLANs. Spanning tree by function builds a single path through your layer 2 network to prevent loops (Oh, my!). If you have multiple redundant links to your aggregating devices then some of these links will go unused. To get around this you can build multiple STP topology with different VLANs. This is accomplished with Cisco Proprietary PVST, RPVST, or standards based MST. This allows you to have multiple STP typologies you can play with to utilize your previously unused links. In example if I had 50 desktops I could place 25 of them in VLAN 10, and 25 of them in VLAN 20. I could then have VLAN 10 take the \"left\" side of the network and the remaining 25 in VLAN 20 would take the \"right\" side of the network.\nService Separation:\nThis one is pretty straight forward. If you have IP security cameras, IP Phones, and Desktops all connecting into the same switch it might be easier to separate these services out into their own subnet. This would also allow you to apply QOS markings to these services based on VLAN instead of some higher layer service (Ex: NBAR). You can also apply ACLs on the device performing L3 routing to prevent communication between VLANs that might not be desired. For instance I can prevent the desktops from accessing the phones/security cameras directly.\nService Isolation:\nIf you have a pair of TOR switches in a single rack that has a few VMWare hosts and a SAN you could create a iSCSI VLAN that remains unrouted. This would allow you to have an entirely isolated iSCSI network so that no other device could attempt to access the SAN or disrupt communication between the hosts and the SAN. This is simply one example of service isolation.\nSubnet Size:\nAs stated before if a single site becomes too large you can break that site down into different VLANs which will reduce the number of hosts that see need to process each broadcast.\nThere are certainly more ways VLANs are useful (I can think of several that I use specifically as an Internet Service Provider), but I feel these are the most common and should give you a good idea on how/why we use them. There are also Private VLANs that have specific use cases and are worth mentioning here.\n", "ethernet - speed/duplex mismatch": "\nTo address your questions in order:\n\nMismatches occur when auto-negotiation or manual configurations fails. This may be caused by physical layer issues or because manual configurations do not agree. Physical issues could be something like an inline hub or physical cable (missing/broken pairs) issues.\nDuplex mismatches can cause a significant impact to your network performance. Collisions, particularly late ones, can take a long time (relatively speaking) for the TCP stack to recover from. Collisions with UDP means the data may never get there or require an application layer recovery mechanism.\nResolving mismatches is absolutely worth your time resolving. It may also hint at other issues since duplex/speed should be an assumed thing these days.\nSome of the centralized management tools (Solarwinds, Spiceworks, HP OpenView & others) probably have reports for interface errors which should include these types of issues.\n\n", "ethernet - MAC address recycling?": "\nMAC-48 has a maximum of 2^48 possible addresses which is somewhere in the neighborhood of 281 trillion different addresses(Compared to IPv4 which has around 4.2 billion). That said I've seen some studies and estimates saying that we won't have to worry about exhaustion until around 2100. The IEEE is one organization that supports this estimate. By that time we may not even being using MAC addresses anymore. Additionally there is another standard called EUI-64 which provides 2^64 possible addresses(24 being the OUI and 40 being the individual card number). \nTo answer your question about recycling, I don't imagine vendors do it nor that IEEE supports vendors doing it. When assigning local MAC addresses a network admin could do it but I can't imagine why you would want to.\n", "Can QoS settings interfere with wireless printing?": "\nCould it? Yes. Without knowing exactly what your network looks like and what QoS rules/settings were used, it's hard to say for sure.\nSteps I would try:\n\nRemove QoS and see what happens\nPost more details on your network and configuration\nCheck for any bugs with the printer firmware that may cause issues.\n\n", "redundancy - Expanding an HP IRF topology": "\nI'm not HP savvy but I did some quick Googling (hp irf ring topology) and found a couple of docs that indicate it does support a ring topology.\n\nc02648772.pdf\n\nQuote from page 5: \n\nIRF topologies\nCreate an IRF virtual device in daisy chain topology,\n  or more reliably, ring topology, as shown in Figure 2. In ring chain\n  topology, the failure of one IRF link does not cause the IRF virtual\n  device to split as in daisy chain topology. Rather, the IRF virtual\n  device changes to a daisy chain topology without affecting network\n  services.\n\nThis page has the same quote so at least that seems like a possibility.\nHP seems to be recommending the ring but beyond that I can't speak to HP gear.\n", "Cisco 2148T FEX Port Capabilities Error": "\nNo, it does not.  The 2148 FEX has 48 1000Base-T host interfaces.  You can confirm this by checking the interface capabilities with the following command (this taken from a 2248 which does support 100Base-TX):\nNexus# show interface ethernet 102/1/3 capabilities\nEthernet102/1/3\n  Model:                 N2K-C2248TP-1GE\n  Type (Non SFP):        --\n  Speed:                 100,1000,auto\n  Duplex:                full\n  Trunk encap. type:     802.1Q\n  Channel:               no\n  Broadcast suppression: no\n  Flowcontrol:           rx-(off/on),tx-(off/on)\n  Rate mode:             none\n  QOS scheduling:        rx-(6q1t),tx-(1p6q0t)\n  CoS rewrite:           no\n  ToS rewrite:           no\n  SPAN:                  yes\n  UDLD:                  no\n  Link Debounce:         yes\n  Link Debounce Time:    yes\n  MDIX:                  no\n  Pvlan Trunk capable:   yes\n  TDR capable:           no\n  FabricPath capable:    no\n  Port mode:             Switched\n  FEX Fabric:            no\n\n", "management - Running XML agent on IOS XR": "\nIn IOS-XR, there are different concepts of authorization than in classic IOS.  In classic IOS, there's only command authorization, which allows or denies specific commands, typically sent to a tacacs+ or radius server.  In IOS-XR, there is command authorization (aaa authorization commands) (but you're better off doing this via task-groups) and exec authorization(aaa authorization exec) , which controls who can actually start an exec session.  \nIt appears that using the normal access method (ssh/telnet to the vtys) that if you're authenticated, no other authorization is necessary, but if you start the XML agent on its own dedicated port, then that use must be authorized.  In my particular case, we are using a TACACS server for authentication, and I was specifying to use local authorization.  The username does not exist on the router, so using the local method 'aaa authorization exec default local' caused authorization to fail.  Changing it to 'aaa authorization exec group tacacs+ local' caused it to get the 'authorization OK' from the TACACS servers, and all is well.\n", "bgp - address-family ipv6 on Cisco 3560G": "\nI think this would require an 'Advanced Enterprise Services' package. \n", "After a memory upgrade of my Cisco WAAS, why is the connection limit still the same, how can I raise it?": "\nAt first, ensure that the memory modules work and are recognized:\n#show memory\nTotal memory             :    5986852 KB\n\nAfter adding RAM, it's necessary to repartition the disks for resetting the space allocation for the data redundancy elimination:\ndisk delete-data-partitions\n\nA reload forces rebuilding of the partitions. You can watch the progress using\nshow disks details\n\nIf this is finished, check your connections:\n#show tfo detail\n\n   Policy Engine Config Item            Value\n   -------------------------            -----\n   State                                Registered\n   Default Action                       Use Policy\n   Connection Limit                     1300\n   Effective Limit                      1290\n   Keepalive timeout                    3.0 seconds\n\nI could see, the connection limit has been doubled now after doubling the memory.\n", "ipv4 - What is the use of wild card masks vs normal masks": "\nAs I understand it, the question is what is the reason for the two different masks, not what are the differences between the masks. The two questions overlap somewhat, but it comes down to binary math (as YLearn hits on).\nFirst, a netmask:\nIP:   1100 0000 . 1010 1000 . 1111 1000 . 0110 0100 = 192.168.248.100\nMask: 1111 1111 . 1111 1111 . 1111 1111 . 1111 1000 = 255.255.255.248\nAND:  1100 0000 . 1010 1000 . 1111 1000 . 0110 0000 = 192.168.248.96\n\nThe AND operation on the IP address with the netmask results in the network 192.168.248.96/29.\nNext, a wildcard:\nNET:  1100 0000 . 1010 1000 . 1111 1000 . 0110 0000 = 192.168.248.96\nWC:   0000 0000 . 0000 0000 . 0000 0000 . 0000 0111 = 0.0.0.7\nOR:   1100 0000 . 1010 1000 . 1111 1000 . 0110 0111 = 192.168.248.103\n\nperforming an OR operation on the network results in the range of IPs (192.168.248.96-103) that may be permitted or blocked in an ACL or OSPF network statement (remember that OSPF only looks for interfaces that fall within the specified ranges -- i.e. it doesn't match IP and netmask, just the IP). It's very easy to check whether an IP is in range with:\n\nIP OR WC == NET OR WC\n\nThis is useful to the router because the netmask does not easily give you this information (without additional operations).\n", "congestion - What would cause high latency anytime there is traffic on WAN?": "\nThis sounds like some form of \"bufferbloat\", probably on the part of the DSLAM/LNS that's performing the 6Mb rate limiting.\nIt might be your CPE box, but that's a little less likely.\n", "PPPoA ADSL Configuration with external modem on Cisco 891": "\nTechnically, you're doing PPPoEoA.\nThe VC Mux part will have to be set on the modem, as that's the only thing that has access to the ATM layer.  If you had a dsl interface in the router, you'd do:\nblue-gw#show run int atm0.1\nBuilding configuration...\n\nCurrent configuration : 131 bytes\n!\ninterface ATM0.1 point-to-point\n bandwidth 6000\n pvc dsl 8/35 \n  encapsulation aal5mux ppp dialer\n  dialer pool-member 1\n !\nend\n\nOther devices will vary.\n", "routing - BGP - Soft Reset Outbound & Verification": "\nSoft reconfig (inbound) is only used if route refresh isn't supported (you also have to explicitly configure this); They're two different things. Does \"show ip bgp neighbor x.x.x.x\" output show route refresh in its advertised capabilities - \"advertised & received\"? To answer your question, the only way that you can verify that the \"soft reconfig out\" took effect (because this basically tells your router to refresh your outbound policy and send the updates to the neighbor) is to verify this with your provider.\nEdit: To clarify, I suppose it depends on what policy you're trying to set. You can always do \"show ip bgp neigh x.x.x.x advertised-routes\" but AFAIK you can't get all the bits of info, i.e. communities (disclaimer: this was how it worked with Cisco kit I've worked on, not sure if Juniper/whomever else is better here or not).\nOne last edit (to clear up any possible confusion):\nSoft reconfig inbound is used really to refresh your inbound policy in accordance to what someone is sending you. It basically stores a copy of the Adj-RIB(s)-In and when \"clear ip bgp neigh x.x.x.x soft in\" is run, it refreshes your inbound policy by applying it to the [copy] Adj-RIB-In prefixes before inserting them into the Loc-RIB.\nWith the route refresh capability, it eliminates the need to store a copy of the Adj-RIB-In and (assuming the neighbor supports it) will allow you to request a route refresh from the neighbor via just doing \"clear ip bgp neigh x.x.x.x in\" - no \"soft\" needed. In addition, even if your neighbor is capable of route refresh, and you've configured that neighbor with soft-reconfig, the soft-reconfig will take precedence over route refresh (not ideal due to the increased memory footprint with running soft-reconfig).\nSoft reconfig outbound (you don't need anything to turn this on, you get it for free) will re-run your Loc-RIB (Adj-RIB-Out is just a pointer back to the Loc-RIB) through your outbound policies and send those updates to the peer.\n", "cisco - Difference between access list and prefix list?": "\nHere's the history of how they came into being (and why they are the way they are):\n\nIn the very early days of the Internet, people started asking for packet filters (aka access lists). \nCisco implemented simple access lists first (filtering on destination host addresses, augmented by wildcard masks), but of course they weren't good enough to block (for example) SMTP, so they created extended access lists, which can match on source and destination IP addresses (with wildcards bits on both - these bits allow you to match whole prefixes), protocols, port numbers ...\n\nSo: access list = packet filter.\nLater (but still decades ago) people started running multiple routing protocols on the same box and wanted to redistribute information between them. Not a problem, but you wouldn't want ALL the information you have propagated into the other routing protocol - you need ROUTE FILTERS. As is usually the case, everything looks like a nail if you happen to have a hammer, and thus Cisco's engineers implemented route filters with the object they already had - access lists.\nAt this point: access list = packet filter (and sometimes route filter)\nWith the advent of classless routing (yeah, it's that long ago - does anyone still remember the days of Class A, Class B and Class C addresses), people wanted to redistribute prefixes of certain size between routing protocols. For example: advertise all /24s from OSPF into BGP, but not the /32s. Impossible to do with access lists. Time for a new kludge: let's use extended access list and let's pretend the source IP address in the packet filter represents network address (actually prefix address) and the destination IP address in the same line of the packet filter represents subnet mask.\nThis far: access lists = packet filters. Simple access lists also serve as route filters (matching only on network addresses) and extended access lists serve as route filters matching addresses and subnet masks.\nFortunately someone retained a shred of reason at that time and started wondering what exactly the brilliant minds that decided reusing extended ACLs for route filters makes sense were smoking when they got that brilliant idea. \nEnd result: Cisco IOS got prefix lists, which are (almost) identical in functionality to extended access lists acting as route filters, but displayed in a format that a regular human being has a chance of understanding.\nToday: use access lists for packet filters and prefix lists for route filters. You can still use access lists as route filters but don't do it.\nMakes sense?\n", "routing - What are the differences between VRRP and HSRP?": "\nBesides VRRP not being proprietary, there are a few minor differences between the protocols as well:\n\nWith HSRP, each interface must have an IP address that is separate from the HSRP group address. VRRP lets you share the Master's interface IP address.\nOn Cisco devices, VRRP is configured to preempt by default, whereas HSRP is not configured to preempt by default.\nOn Cisco devices, HSRP sends hellos every 3 seconds and has a dead timer of 10 seconds. VRRP sends advertisements every 1 second and has a dead timer of roughly three times the advertisement interval.\nVRRP can be configured to learn the timer configuration from the Master.\n\n", "Cisco: No autostate on GigabitEthernet interfaces, any alternative? (not working)": "\nAfter some research and questioning with cisco specialists, we can conclude that in newer versions of IOS and newer routers, autostate is applied by default and unchangeable. (so the \"no autostate\" will not work anymore on vlan's).\n", "cisco - When *not* to create a SVI for a L2 VLAN?": "\nYou might not want to make a L2 SVI if you use VTP pruning. If pruning is on, an unused VLAN will be pruned from the trunk, resulting in less unnecessary broadcast/flooding traffic. However, creating an SVI, creates an \"active\" interface on your switch. A quick check in GNS3 gives the following:\nR1#show vlan-switch\n\nVLAN Name                             Status    Ports\n---- -------------------------------- --------- -------------------------------\n1    default                          active    Fa1/1, Fa1/2, Fa1/3, Fa1/4\n                                                Fa1/5, Fa1/6, Fa1/7, Fa1/8\n                                                Fa1/9, Fa1/10, Fa1/11, Fa1/12\n                                                Fa1/13, Fa1/14, Fa1/15\n3    VLAN0003                         active\n4    VLAN0004                         active\n[output omitted]\n\nR1#show interfaces trunk\n\nPort      Mode         Encapsulation  Status        Native vlan\nFa1/0     on           802.1q         trunking      1\n\nPort      Vlans allowed on trunk\nFa1/0     1-4094\n\nPort      Vlans allowed and active in management domain\nFa1/0     1,3-4\n\nPort      Vlans in spanning tree forwarding state and not pruned\nFa1/0     1\n\nNow, if I go to R2, connected to Fa1/0 and type R2(config)#int vlan 3, we will see the following:\nR2#show run interface vlan 3\nBuilding configuration...\n\nCurrent configuration : 38 bytes\n!\ninterface Vlan3\n no ip address\nend\nR2#show run | include vlan 3\nR2#\n\nAs you can see, no interfaces in VLAN 3, except the SVI. And back on R1:\nR1#show interfaces trunk\n\nPort      Mode         Encapsulation  Status        Native vlan\nFa1/0     on           802.1q         trunking      1\n\nPort      Vlans allowed on trunk\nFa1/0     1-4094\n\nPort      Vlans allowed and active in management domain\nFa1/0     1,3-4\n\nPort      Vlans in spanning tree forwarding state and not pruned\nFa1/0     1,3\n\nAs you can see, VLAN 3 just came up on the trunk, adding to the traffic levels on your trunks. \n", "What are the best Cisco 6500 Ethernet modules for iSCSI?": "\nAnswering some of the generic questions:\nAre Jumbo Frames an unquestionable requirement?\nFor FCoE it's somewhat irrelevant, as the FCoE frames are handled differently, their own default MTU is 2148 (frame size). You can do larger, but as with jumbo frames in general there's minimal benefit. An FCoE capable switch will just handle this.\nIs it better for these modules to sit in the aggregation layer or access layer in case there's a future need to tie them together (as we have an L2 access layer not directly tied to one another with L2 adjacencies between pairs of access switches that traverse the agg switches).\nAccess really is the main place to use FCoE, replacing HBA's and edge FC switches with CNA's and 10g \"converged ethernet\" switches. Replacing distribution and core with FCoE can make sense when bandwidth needs justify it (or new build that has to run FC).\nThis is probably your sticking point actually, if you're not doing 10g to the machine you're almost certainly going to be very underwhelmed with the performance you'll get.\n(Extra credit) Is FCoE the better choice over iSCSI?\nDepends on what you're doing, almost certainly not, and there may be better options than either.\nAt a previous job we had a nice design using NFS (storage was NetApp's) where OS volumes were stored on a shared volume between the VM hosts (as normal), but data was individual NFS volumes, shared or separate as appropriate for the host, worked well in our environment as it was one group of admins managing ops from the app down to the hardware (well, its config, rack-n-stack, swaps, etc. was smarthands). Combined with NetApp's snapshots & snapmirror this made backup and restores trivial.\n", "Cisco 1921 security features in the default bundle": "\nThe most basic license (read: cheapest) has only basic IP level functions.  It'll do NAT and you can setup ACLs (filters), but there's no \"firewall\" or \"IPS/IDS\" (intrusion detection.)  It this regard, it's the same as a $50 Linksys: you are \"protected\" by NAT. (which isn't real security)\n", "How do the different types of materials used in Ethernet cables affect reliability?": "\nmetal\nAluminum is less expensive, but will develop cracks if it is flexed too many times. Copper is more expensive, but is more ductile; So it is much more forgiving of being repeatedly flexed.\nspecifications\nThe Cat-N specifications determine various limits; Parameters such as:\n\nhow much a signal may be attenuated per unit of distance\nhow much cross-talk (signal leaking from one pair to another) is allowed between the pairs\nhow much radiation (\"leakage\" of the signals) is allowed from the cable\nthe range of frequencies which the cable's pairs are designed to carry\n\n(and much, much more...)\nuse cases\nThere are differences in the insulation which jackets the conductors and the entire cable. For example, \"plenum\" cable -- meaning it is designed to be used in a plenum, a space within a building which is part of the air handling path for climate control -- is designed to limit how much, and at what temperature, it will emit toxic fumes.\nThere are options such as full length shielding (grounding) which prevents interference from other sources. (This is not common with Ethernet cables.)\nThe overall physical diameter of the cable may be a use case limiting factor. If you are install a very large number of cables, that might matter.\nSome cables contain a \"strain relief\" feature; A small nylon string (looks like dental floss) can be added within the cable to help prevent stretching the conductors when cables are pulled into place.\n", "cisco - Etherchannel on 6509 (VSS) with interfaces from different type of modules supported?": "\nThis documentation is a few years old but it does seem that only catch is that the links must be all set to the same speed. \n", "foundry - BGP Prefix Announcement Issue": "\nCheck that you actually have valid internal routes for these networks to override the routes to null0. If there are no more-specific or more-preferable routes for these networks, the routers will of course discard traffic destined for them.\n", "cisco - ASA Ntflow support - Ntwork Enginring Stack Exchang": "\nOur ASAs (version 8.2(x)) send to a SolarWinds Orion collector using Netflow version 9.  We didn't have to do anything special to get it to work.  SolarWinds has a doc with a good explanation of the differences between \"normal\" and \"ASA\" Netflow here: http://www.solarwinds.com/documentation/Netflow/docs/understandingciscoasanetflow.pdf.\nIf it helps here is a sample configuration:\naccess-list flow_export_acl extended permit ip any any\nflow-export destination inside collector_IP_address 2055\nflow-export template timeout-rate 1\nflow-export delay flow-create 15\nclass-map flow_export_class\n match access-list flow_export_acl\n description Netflow\n class flow_export_class\n  flow-export event-type all destination collector_IP-address\n\n", "Why has a fiber optic cable stopped functioning on one of the allowable wavelength?": "\nThe short answer is that fiber cabling is cheap enough that it is not worth your time or effort to fix a damaged cable in many instances. If you have doubts about a cable, you should just replace it if possible.\nIn some cases, the fiber is not able to be easily replaced (eg, undersea cables). If, say, you have a long run between buildings, then you might be better off using a OTDR to locate a possible break, and fixing/splicing the cable at that point.\nBasically, you have to decide if the effort to fix the cable (if its possible) will be less than running an entire new cable. Most of the time, such as in DC or enterprise environments, it will probably be much cheaper/easier to run a new cable.\nAs for why the cable no longer works properly....there could be many reasons. Fiber cabling is much less robust than copper cabling. If the cladding or PVC jacket has been worn away, light may be leaking at that point, which may be interfering with the missing wavelength.\n", "Routing traffic out different links from the same BGP AS": "\nIs there a clear definition between site A and site B?\nIf so then I would look to define a policy on the edge routers to inject a community when receiving routes from the carrier MPLS.\nOnce this community has been put on the prefixes (say 100:1 for site A and 100:2 for site B) you could then add a policy to each of site A's routers to increase the LP for any routes with community 100:1 and likewise for site B with community 100:2.\nThis solution would match the requirement of only using BGP and also would be flexible enough to still allow B to use A's uplink if it lost its own uplink to the carrier.\n", "foundry - Subnet not being seen by OSPF": "\nI would guess from the output that the devices aren't adjacent, my reasoning behind this is that they are only showing their own locally generated LSA's (next hop of 0.0.0.0).\nAre you sure that the /29 is up on both devices and that you have enabled OSPF on the correct links.\nAs a side note, what platform is this from?\n", "cisco - Which is the Preferred location of an IPS within a network?": "\nUse google to check/translate the following blog post (in portuguese, from the author of the book Cisco Firewalls):\nhttp://alexandremspmoraes.wordpress.com/2012/07/03/multiplas-camadas-de-defesa-a-complementaridade-do-firewall-e-do-ips\nFor me this is the best explanation I've seen on where to place IDS and IPS (and their complementarity).\n", "juniper - SRX DHCP client compatibility with HP Procurve DHCP Relay": "\nI opened a case with HP concerning this issue.  After escalating past the useless Level 1 tech, the Level 2 tech very alertly spotted something that I had not.\nThe SRX is sending its DHCPDISCOVER packet with a TTL of 1.  The Procurve's apparently will decrement the TTL and use the resulting TTL in the relay'ed packet to the DHCP server.  In this case, the decrement leaves the TTL at 0 meaning the packet gets dropped on the floor.\nThis is actually in spec for DHCP/BOOTP relay, though clearly it causes reduced interoperability.  I have asked HPNetworking to treat this as a bug/RFE and change the behavior.  No immediate response to that request in the case.\nThe SRX sending the DHCPDISCOVER with a TTL of 1 is also probably within spec, but, again, a choice of reduced interoperability, so I plan to open a case with JTAC on the same basis.\nI'll add more info on the response of Juniper and HP as it becomes available.\nIncidentally, I have tested the relay behavior of a Cisco 4506 (firmware version not immediately available), and a Brocade/Foundry FastIron Edge X (7.2 or 7.3 firmware, I believe, don't have immediate access to confirm) and they both handle relaying the request with TTL 1 without issue.\nUPDATE\nThere is a way to change the TTL value that the SRX uses on its DHCP requests, but its not from within the JunOS cli...its done from the underlying Unix OS.\nroot@% sysctl -w net.inet.ip.mcast_ttl=64\n\nI have opened an RFE with HP to make their relaying function more resilient, but not response from them yet on if/when that will be worked on.\n", "wireless - where to find the complete 802.11i spec": "\nAs John already answered, 802.11i no longer exists as it has been superseded by a more recent standard, namely the 802.11-2007 standard.  For the 802.11 working group, you can always find the status of standards by looking here.\nYou really need to review the document and parts of 802.11i may be in several places.  From a very brief look at the table of contents, you may want to start with sections 5.4, 5.8 and 8.  You will need to key in on sections relating to PSK and CCMP specifically, as WPA2, Personal, and Enterprise are terminology coined by the Wifi Alliance, not the IEEE.\nEven without reviewing the document, it is a fairly easy concept to understand the vulnerability.  Equate this to a file that is AES encrypted with a static password.  If someone were to get a copy of the file, all they needed to do to decrypt it would be to brute force decrypting the file until they found a password that produces meaningful output.  \nIf someone captures the connection handshake on a PSK network, this is exactly the same process.  This may not be quick and take lots of processing resources, it can be done.\nAs to what resources are necessary to perform such an attack, you may want to look into the BackTrack distribution.  This is a distribution targeted at security/penetration testing and there are several books and many documents describing how to use the tools within for all kinds of security applications.\nEdit: I should have mentioned, while 802.11-2007 rolled up802.11i, the current standard is 802.11-2012 and this is a roll up of 802.11-2007 and and the amendments between.\n", "ppp - Line Sync when there is supposed to be no ADSL codes on the line?": "\nGonna take a guess here that your in Australia.\nThe cutoff for getting a new ADSL connection from Telstra or any Telstra reseller is 56dB of attenuation at 300khz based on the calculated loss from the cabling records.\nYour modem is reporting 63dB attenuation so chances are the calculated loss is higher than 56dB.\nWhen you got ADSL in the first place the loss check must have been bypassed somehow or your cabling records were wrong and calculated at less than 56dB of loss.\nWhatever the reason your cabling records now say you cant get ADSL and you have no existing ADSL service on the line.\nIts not a technical limitation is a procedural/policy limitation.\nYou will probably need to go through a manger/escaltion/shouting match with management of your original provider to get the ADSL reinstated.\n", "cisco - AP's at remote faciltiy will not join local controller": "\nI cannot tell you exactly what is happening without looking at the configs of the Switches and the WLC you have as I can think of a number of possibilities. For me, it'd be helpful to have that information but more so, the things that you've done. Basically, what are the items you've tried thus far?\nSW-A: 10.133.55.1 <---TRUNK---> SW-B: 10.133.55.2\nWLC-4404 10.128.55.10\nFirst thoughts though are as follows:\n1.) Who is able to ping the WLC?\n    a.) no one = check the interface on the switch and the WLC interface config, any firewalls\n    b.) same subnet, 10.128.55.0/24, but no other subnets = check routing\n    c.) all subnets on one switch but not from another switch = check trunk on SW-A & SW-B\n2.) AP and WLC are able to ping each other but AP not showing up in WLC\n    a.) check DHCP has the proper option 43 (Vendor Specific Info) set which tells the AP what IP the WLC is.\n    b.) check any firewalls inbetween\n    c.) create new interface on WLC with the same VLAN subnet as the AP and test\n    d.) enable ssh on the AP and do a show log to see if anything peculiar sticks out\n3.) You've checked all possibilities and as the config stands everything should work\n    a.) reload the switches, AP's, WLC\n    b.) pull out the configuration and put the configuration back in specific to the issue\n    c.) try a different interface on the switch for the WLC\n    d.) try a different interface on the WLC (maybe create a new one)\n    e.) get on Cisco.com and use the bugtoolkit to see what bugs are out there for your particular WLC version. \n    f.) upgrade the WLC version a revision up and test.\nI realize that some of my ideas are not really applicable, but I'm just throwing some ideas out there to maybe help give a new perspective on the problem. I've found just taking a break to think about something else and then coming back helps me.\n", "VPN routing for hosts with multiple ip addresses": "\nRoutes are always chosen in order of specificity. Say a host has a route to 10.0.0.0/8 via router A and 10.0.1.0/24 via router B. As soon as it wants to send a packet to 10.0.1.1, it will prefer router B over router A. A default route is the least specific route you can have. Any other route you add will be preferred over a default route. So the answer is simple: add a specific route to the VPN DHCP pool via the Mikrotik router.\nDon't forget to make the routes persistent, so they will survive a reboot. Asuming your DHCP pool is 10.0.1.0/24 and your Mikrotik has IP 1.1.1.1 and is connected on eth0, Here is the command for Windows:\nroute add -p 10.0.1.0 MASK 255.255.255.0 1.1.1.1\n\nFor Linux, a persistant route is added by editing the /etc/sysconfig/network-scripts/route-eth0 file to define static routes for eth0 interface. \nGATEWAY0=1.1.1.1\nNETMASK0=255.255.255.0 \nADDRESS0=10.0.1.0\n\n", "How do you know if a Cisco switch is handling traffic well?": "\nThat depends on the switch model you have and it's not that easy.\nSmaller Catalyst switches in general use at least two forms of buffer - there's usually a interface-lavel buffer, on the smaller Catalyst (2k/3k) visible in 'show buffers' under the section named 'Interface buffer pools:':\nInterface buffer pools:\nSyslog ED Pool buffers, 600 bytes (total 132, permanent 132):\n   100 in free list (132 min, 132 max allowed)\n   11151 hits, 0 misses\nRxQ1 buffers, 2040 bytes (total 128, permanent 128):\n   4 in free list (0 min, 128 max allowed)\n   244594209 hits, 4559839 fallbacks\nRxQ2 buffers, 2040 bytes (total 128, permanent 128):\n   1 in free list (0 min, 128 max allowed)\n   202559241 hits, 1582494 fallbacks, 0 trims, 0 created\n   1582494 failures (0 no memory)\n...\n\n...and there's \"public\" area, where CPU is using the buffers as they're punted towards it and need servicing. The \"Rx\"-level buffers are part of the shared buffer to service all interfaces (on either old, legacy switches like 2950 or newest 2960S/3560X/etc) or a subset of interfaces, belonging to specific port ASIC (like 2960 or 3560/3750/3560E/3750E).\nOn the 4500 and 6500 in particular it gets messy, as there is a number of pools that packet can go through - input interface (ASIC) buffer, the pool at linecard level (on the 6500 at DFC), at the switch-fabric level and at the end the buffer at Supervisor level. They don't have to be physically separate memory pools, but are often mapped in different commands to different names to ease the troubleshooting process (at which step of the packet walk-through was the packet dropped for example).\n", "monitoring - Monitor specific traffic type on a Cisco router": "\nYou could monitor the traffic\n\non the router, Cisco IOS 12.4(20)T and later, there is a packet capture feature, with filtering on interface name and direction and ACL.\n\nset up an access list for matching the traffic\ncreate a capture buffer monitor capture buffer holdpackets filter access-list <number>\ndefine a capture point monitor capture point ... possibly with interface name, direction, and more - use the inline help to see possibilities\nlet the traffic pass\nlook at the capture buffer: show monitor capture buffer holdpackets dump, use export instead of dump to get a PCAP file for Wireshark analysis\ndon't forget to stop capturing, remove the capture point and delete the capture buffer afterwards\n\nFor details and examples, follow the link or look at a Cisco troubleshooting manual.\non the switchport, where the router is connected to, for this you could set up a mirror port on the switch and monitor this via Wireshark\non the firewall, where the traffic passes\nCisco ASAs are capable of remotely doing packet capturing and giving you the output as a PCAP file which you can open locally with Wireshark. The ASDM provides an assistant for this. Step by step, you can specify source and destionation interface, ACLs or src/dest networks/host, and the protocol you like to watch. That's why I like having ASAs in place everywhere - with a router CLI may seem a bit complicated.\n\n\n", "routing - Cisco: prevent vlan's of communicating with eachother on cisco router (ACL alternative)": "\nFully agreed with Stefan. VRF is the way to go here. Quick example how to incorporate it to suggested config:\nip vrf VLAN1\n  rd 42:1\nip vrf VLAN2\n  rd 42:2\n!\nint vlan1\n  ip vrf forwarding VLAN1\n  ip address 1.1.1.1 255.255.255.0\nint vlan2\n  ip vrf forwading VLAN2\n  ip address 2.2.2.2 255.255.255.0\n!\n\nNow vlan1 and vlan2 routing is separated.\nTo inspect routing tables, ping, traceroute you need to specify the vrf. e.g.:\n\nip route vrf VLAN1\ntraceroute vrf VLAN2 192.0.2.1\nping vrf VLAN2 192.0.2.1\n\nOr same in new AFI aware, IPv6 supporting config:\nvrf definition VLAN1\n  rd 42:1\n  address-family ipv4\nvrf definition VLAN2\n  rd 42:2\n  address-family ipv4\n!\nint vlan1\n  vrf definition VLAN1\n  ip address 1.1.1.1 255.255.255.0\nint vlan2\n  vrf definition VLAN2\n  ip address 2.2.2.2 255.255.255.0\n!\n\n", "bgp - Telefonica Looking Glass?": "\nSome ammunition for contacting their NOC:\nhttp://www.internationalservices.telefonica.com/en/peerings.html \n\nBoth parties shall provide access to a route server, looking glass, or\n  similar service for the purposes of routing audits, diagnostics, and\n  troubleshooting.  \n\nSo seems reasonable to dedand access to one, considering they are demanding it.\n", "cisco - Deconfigure an interface in IOS with one command": "\nIn global configuration mode, typing default interface [the interface] will clear the interface's configuration in the running-config.\n", "cisco - How to use \"Pattern Recall\" pattern matching in Regex": "\nThere are a few things that make this fail:\n\nThis is trying to match the 0 five times. The first time you write the expression it matches, then it tries to match four more times,\nThis is matching 0 (with a trailing space) The last 0 won't have a trailing space,\nThis expression is incrementing the remembered pattern recall number, even though you only have one pattern,\nThe pattern recall only needs one backslash. \\\\1 would match the text \"\\1\". The firstbackslash is the escape character, the character after that is the escaped character. \nTechnically, with the trailing spaces, this would also match 10  0  0  0 but there is little chance of that being an output. There will never be a number beginning in 0 though.\n\nSo, to get the pattern you want, this will work:\n#show interfaces stats  | i ( +0)\\1\\1\\1\n\nIn this expression, you match any amount of spaces ending with a 0, repeated 3 additional times.\nAs a nice example of how pattern recall works. (+ 0)(+ 0)\\1\\2 works too. To make this more clear ( +0)( +1)\\1\\2\\2 would match 0 1 0 1 1\n", "Cisco Catalyst 4500E - modules installation": "\n4500 line cards are hot swapable, so the answer to the first three questions is yes (assuming a 45xxR chassis).\nA couple of caveats, for question 2, the supervisor has to meet the requirements for redundany.  For instance, you would not be able to insert a Sup7 in a chassis with a SupIV.  Additional configuration may be required as well to enable the redundancy properly.\nFor question 3, you shouldn't remove an active supervisor (while you can, this isn't best practice).  If the supervisor you wish to remove is currently active, failover to the standby supervisor first.\nThe answer to the last question is yes, you can cause damage to the chassis and/or line card if you insert them incorretly (i.e. this has nothing to do with the chassis being running, but a purely mechanical problem).  The levers should be open when inserted, the card should glide in easily until the levers start to close by themselves, and the final insertion should be done with the levers.  If you have to use A LOT of force, it may not be aligned properly and you could result in damage.\nOn the 4500s, you also need to make sure you are using the proper slots.  Do not try to install a supervisor module in a linecard slot or vice versa.\n", "cisco - How are two \"ip helper-address\" statements handled?": "\nThe ip helper-address command designates an address which broadcasts are forwarded to; it will send the original packet to each of those listed addresses.\nIf both reply, both replies are forwarded back to LAN.\n", "juniper - How to signal a VPLS multihoming change to a L2 CE device": "\n\nDisable Portfast on the PE facing ports (On CE)\nEnable RSTP across the CE network\nFavor \"Blue link\" w/ interface cost\n\nWorking this out in my head I believe it should react as follows:\nWhen blue link dies the CE will stop sending/receiving BPDUs from the blue interface. Default RSTP hello timer is 2 seconds. It waits for three missed hellos before calling that link \"dead\". Once three hellos (6 seconds) have been missed it will then re-establish the STP tree and age the MAC addresses.\nThis is basically option 1 you've stated above except the way I've read the comments and your original post it sounds like you want the PE to participate in STP. I'm suggesting allowing the customer to build its own tree between all CEs.\nYour network should fail over smoothly, and the client network would follow suit a few seconds later.\nThis feels too simple to be the answer...but that's what I can see based on your write up.\n", "nms - Should I locate SNMP poller near DB or monitored devices?": "\nThis seems like useless micro-optimization in any case, which you shouldn't worry about until actual practical issue arises, which is likely never.  \nHowever purely academically you should put snmp poller near device it is polling as it is request/response protocol which is RTT bound.\nThe poller can aggregate the polled data and use TCP with windows to send large amount of data fast to DB.\n", "bandwidth - Media Transfer rates......is using laser over fiber the fastest?": "\n\nAdjusting the light frequency, theoretically will allow more data to transfer (i.e. UV -vs- IR) per unit time\n\nNo this is not true. Please see this question's answer on the Electronics Stack Exchange site. The frequency of the light travelling down the fibre is not relational to the speed of data transmitted as you may think. I know that question I linked is about copper but it might give you some insight. Single Mode fibre for example can run at 100Mbps, 1Gbps and 10Gbps; all at a wavelength of 1310nm. You need to look into symbol rate and encoding methods such as Manchester Encoding, 8b/10b encoding and 64b/66b encoding.\n\nWould it be theoretically possible to use something like radio wave frequency (say GHz RF) transmitted over copper wire to increase bandwidth between two points?\n\nNo, this is not true. The speed at which data travels down a copper cable is nearly as fast as a fibre (circa 0.6*c). The electromagnetic wave is propagating around the edge of the copper cable at a rate called the dielectric constant, which is based upon the relationship between the transmission medium (the copper) and the air and plastic coating around it. See the answer to this different question on the Electronics Stack Exchange.\nNote:\nAs you delve deeper into the physics of electronics and light, they behave completely counter intuitively.\n", "Cisco config example for Policy Based Routing": "\nI would recommend using a route-map for only one purpose (one for nat, another to pbr); mixed use can make for a mess.  For NAT, the match interface will apply post-routing -- handy to make conditional nat entries.\nThe route-map for PBR should use an ACL to match the traffic coming from LAN2 and then set the next-hop to the desired interface with set interface not set default -- or set ip next-hop dynamic dhcp as you won't know the actual gw address.  This bypasses / overrides any routing logic that would otherwise send then traffic to your expensive WAN.\n", "switch - Cisco SFP module: Determing Priority?": "\nAs already suggested by Stefan and Ricky, if your fiber ports are aggregated in an etherchannel, then you can safely remove any of the fibers and all the traffic will use the remaining fiber. In order to check if they are aggregated you can run show etherchannel summary and check the output lookinf or any PortChannel interface made of both fiber ports. \nOtherwise, if both fiber ports are not aggregated and STP or RSTP is in use, then you need make sure you are pulling off the fiber connected to the blocking port. Run show spanning-tree <interface_name> for both fiber ports in both switches and look for the ports in status blocking. \nJust be careful if running PVST, RPVST or MST. Port costs could have been tuned in such way that one port is forwarding some VLANs and the other port is forwarding some other VLANs. In this case, whatever the fiber you pull off you will generate impact on your network. \n", "cisco - What is the NO PAYLOAD ENCRYPTION version of the IOS software?": "\nFrom the Cisco website:\n\nUniversal images with the universalk9_npe\" designation in the image name: The strong enforcement of encryption capabilities provided by Cisco Software Activation satisfies requirements for the export of encryption capabilities. However, some countries have import requirements that require that the platform does not support any strong crypto functionality such as payload cryptography. To satisfy the import requirements of those countries, the `npe' universal image does not support any strong payload encryption. This image supports security features like Zone-Based Firewall, Intrusion Prevention through SECNPE-K9 license.\n\nSo you would use this image if you were in a country that has import restrictions on strong crypto.\n", "cisco - Management network. Best practises: big VLAN or routed interfaces": "\nAs you said, it matters on how many devices we're talking about, but aside from that, what you should avoid if at all possible is only having \"in-band\" management of your devices. You don't want to have your management traffic riding the same network as your production traffic. If not all of your switches have a separate Ethernet interface for management, that's fine, but nearly every single piece of equipment out there has some form of serial console. USE IT. Especially as a backup for in-band management. This will save your ass if a device falls off of the planet. I'm also suggesting using a completely separate physical infrastructure for management connectivity to your equipment. This applies doubly for serial console access. If you're using one of your interfaces on your switches (that's not a dedicated management interface), that's also not as big of a deal, as long as you've got a separate network to connect it to.\n50 devices isn't too unreasonable of a footprint to use a single VLAN (again, assuming you are not doing in-band management) and have one broadcast domain for - you may be trying to optimize too early at this stage. If your core switches are modular boxes then they should most definitely have Ethernet management interfaces - I would advise you to use those rather than an SVI or a physical routed interface.\nedit: my personal preferences basically outline what I've advised above: always serial consoles. Use dedicated Ethernet management interfaces where applicable. If dedicated Ethernet management interfaces are not available, then burn a physical port on the box, but always always always a separate network, for serial consoles at the absolute minimum.\n", "cisco - Enabling MLS QoS on a production 7600": "\nYou definitely should enable MLS QoS. It is also prerequisite for CoPP, which you should add in your TODO list to implement.\nEnabling 'mls qos' without other config is extremely bad idea in low-end cats, like 3560/3750, due to unexpected default scheduling and due to heavily reduced buffers causing more microbursting.\nOn 7600/6500 it's comparatively safe to enable, but of course you can crash your router with 'show run'. I would feel comfortable enough to enable it during production hours.\nYou should monitor 'show queueing interface X' after enabling to see that you're not dropping anything. Long term, you should design QoS policy and implement it, I recommend using as few queues as possible (and assign 100% of buffer to those few queues).\nExample of possible QoS policy in WS-X6704-10GE:\ninterface TenGigabitEthernet4/1\n wrr-queue bandwidth percent 30 40 30 0 0 0 0  ## allocate 3 queues (+implied strictpriority) share buffer 30% 40% 30% on thos three queues\n wrr-queue cos-map 1 1 0 7 # map cos values to queues\n wrr-queue cos-map 2 2 3 \n wrr-queue cos-map 3 1 4 \n wrr-queue cos-map 3 2 6 \n\nFor advanced config, you may want to supplement that with 'wrr-queue random-detect' with RED curve per queue+threshold.\nBe sure to mark your traffic correctly when it enters your network.\n", "cisco - Is a DSP required with a SIP trunk?": "\nYou should be good without DSPs.  The major use of DSPs on a router is when you have to convert from a TDM trunk (FXO or T1/PRI) to an IP resource.  Since SIP is all IP-based, you shouldn't have to do any conversion.\nDo be aware that any conference calling features will consume DSPs unless you have a hardware conference bridge.\n", "cisco ios 12 - Moving internally allocated VLANs": "\nYou can remove the VRF temporarily:  \n\nsh ip vrf detail | i Id\n\nOnly reason this VLAN is even created is because either your VPN-CAM is turned off or you have more than 512 VRFs. If you don't have 512 VRFs, you can free up this internal VLAN without removing VRF by making sure VPN-CAM is activated. This may not be the simplest task as there are various reasons which mean VPN-CAM is disabled, most common reasons are:\n\nYou use 'class-default' in QoS, match 'any any' ACL instead\nYou use egress ACL in VRF, remove them\n\nOnce there are no reason to disable VPN-CAM, it gets renabled, and those VRF VLANs will disappear. This will also double your VRF performance, as you won't need to recirculate the packet in the PFC. \nWithout VPN-CAM your first PFC lookup will resolve VRF, second will resolve egress rewrite. With VPN-CAM before packet even hits PFC, VPN-CAM has already told you which table to look against, so PFC will directly return egress rewrite on single lookup.\nTo confirm if VPN-CAM is used or not, you can issue this command:\n\nremote command switch sh mls vpn-cam 0 511\n\nLong term, maybe change the allocation order, to order from 4k downwards, instead of 1k upwards.\n", "Cisco Nxus 5000 grounding - Ntwork Enginring Stack Exchang": "\nIf you ask any responsible electrician all devices must be grounded so that if there is short-circuit they don't become dangerous.\nIn practice I very very rarely see devices grounded, only incumbents with long history of spending lot of money and manpower have the professionalism to do this.\nFor legal reasons, I cannot recommend not grounding them, but I would expect exactly 0 problems, and you certainly wouldn't be alone running your boxes without ground.\nIf you are running AC PSU and you have Schuko plugs the system probably is already grounded.\n", "cisco - Should portfast be used on a port potentially connecting to an unmanaged switch?": "\nYou should run 'port-fast' (in standard terms edge port) in every port not part of your switch core. Even if it is switch.\nYou should NOT have L2 loop through customer switches.\nYou should run BPDUGuard and BUM policers all interfaces, customer facing interfaces should be 1/5th or less of core facing limits. Unfortunately limiting unknown unicast often is not supported.\nWhy running 'port-fast' or edge is crucial is performance of RSTP (and by extension MST) rely on it. How RSTP works is it asks downstream if it can go to forwarding mode, and downstream asks its downstreams until there are no more ports to ask frmo, then the permission propagates back up.\nPort-fast or edge port is implicit permission from RSTP point-of-view, if you remove this implicit permission, explicit permission must be gotten otherwise it'll fall back to classic STP timers. Which means even one non-portfast port will kill your subsecond RSTP converge.\n", "cisco catalyst - Switch interface config for IP Phones": "\nThe first method also works for Avaya phones - only they must have the proper DHCP option strings on the data vlan to know which voice vlan it should try and tag its traffic to afterwards.\nI usually add #sw host\n(which adds spanning-tree portfast and sw mode access automatically when configuring ports)\nPortfast allows the port to go directly into forwarding state when the interface is up - otherwise you're going to be waiting 45 seconds per port!\n", "ospf - Remote Campus Routing Design": "\nA tunnel is your only way out here, unfortunately. Without using a tunnel a packet would enter the service providers network and if that destination isn't already known it will get thrown down the black hole.\nI would hope and assume that the provider isn't doing any special policing on tunneled traffic, but you'll have to test that out for yourself. If you're worried about moving DSCP values between the original packet and the tunnel packet that is easy enough to accomplish. So voice traffic can still pass through the SP network with EF.\nIn all honestly some sort of common peering here would be the best. Even if you peer with RIP, redistribution is easy enough and would accomplish your goals. I'm not sure why you can't apply filtering to incoming routes except perhaps company policy?\n", "Cisco 867 forward UDP port range": "\nTry\nip nat inside source static <internal_IP> <external_IP> route-map MOO\n!\nroute-map MOO permit 100\n  match ip address 102\nroute-map MOO deny 200\n!\n\nI feel your own example probably should work, at least I couldn't immediately think of why not, so might be bug.\nReview CCO Document for the command, namely:\n\nOnly IP hosts that are part of the route-map configuration will allow\n  outside sessions.\n\n", "Routes disappearing from OSPF routing table": "\nFor cisco routers, there's a KB article about it:\nhttp://www.cisco.com/en/US/tech/tk365technologies_tech_note09186a008009481a.shtml\nFrom the article:\n\nA common problem when using Open Shortest Path First (OSPF) is routes in the \n  database don't appear in the routing table. In most cases OSPF finds a \n  discrepancy in the database so it doesn't install the route in the routing\n  table. Often, you can see the Adv Router is not-reachable message (which means\n  that the router advertising the LSA is not reachable through OSPF) on top of\n  the link-state advertisement (LSA) in the database when this problem occurs.\n\nSo I guess that the issue has to do with the advertising router becoming unreachable periodically, but the question has too little info to make a guess about the root cause...\n", "How can I speed up CLI typing in Cisco IOS using shortcuts?": "\nWe can use the alias  command in global conf mode:\nalias <mode> <command-alias> <original-command>\n\n<mode> is one of the many IOS command modes. If you need it in different modes, you have to call it for each one - type alias ? to get a long list of modes.\nAn example for checking for a dhcp snooped IP, type in global conf mode\nalias exec snoop show ip dhcp snooping binding | include\n\nNow you can simply type snoop 172.16.20.12 to check for this IP or snoop 801 for checking all IPs in VLAN 801, for example. Do similarly for show mac-address-table | include and you're faster in searching and troubleshooting.\nFurther tipps:\n\ndocument your aliases for you and for your collegues\nsh aliases shows your aliases plus the predefined ones\nwhile no alias <mode> <command> can be guessed for removing an alias, no alias <mode> deletes the aliases for a complete mode - so you can clear several at once, default alias <mode> works similarly, as expected\nif you decide to use aliases, deploy them once everywhere you may need them\ntools like Cisco Prime can help in deploying\ndon't forget the original commands ;-)\n\n", "wan - What are leased lines, serial lines and dedicated lines?": "\nThe terms do get thrown about quite a bit and the definition is a bit of a murky issue as they can be used in several ways.\nI would say that generally a leased line is a line you are paying someone else for use.  For instance, you can string your own copper and establish your own T1/T3 service between buildings.  However, you could also pay someone to provide and maintain that line.  Often leased lines have a SLA associated with them.\nA dedicated line would be a line that is dedicated to you/your company.  For instance, in an office building, you may not have a dedicated line.  You may have a PRI that comes into the building and provides service to multiple organizations.  Often this is cheaper because the telecommunications company doesn't need as many lines going into the building and has fewer to maintain.\n", "ieee 802.11 - Is a wireless only network (for end users) a viable option?": "\nWith the arrival of 802.11n and with 802.11ac almost here, this can be a viable option.  However the expectation of cost savings may not be accurate as you may have additional initial costs (for instance hiring a wireless consultant to make sure things go right) or even in ongoing costs (do you need new staff?).  You will carefully have to consider your path forward and how this impacts your users and IT staff.\nThat being said, there are a number of things to keep in mind when considering not deploying a traditional 802.3 Ethernet network (the larger the wireless network and number of client devices, the more these are true):\n\n802.11 is somewhat still in the same place where 802.3 was in it's infancy.  There are device inter-operability issues that exist based on the way that some vendors implement the standards. Your IT staff may need to spend additional time testing new hardware or software.\n802.11 is newer, more complicated, and changing much faster than 802.3, so the development and quality assurance processes by wireless vendors (infrastructure and client devices) is not always what it should be.\nYou will want to make sure that you properly plan the wireless deployment considering a number of factors including at least both coverage and capacity planning.\n802.11 can be more difficult to configure, optimize, and maintain properly than a traditional 802.3 network.  Having someone on staff or hiring a consultant who are well versed in 802.11 and RF will be very helpful.\nWireless is not as reliable as wired since it is more easily subject to outside sources of interference.\nIf you haven't already, you would want to invest in some tools to help your IT staf maintain and troubleshoot the wireless network, including at least a basic 2.4GHz/5GHz spectrum analyser and a wireless capture device (without special hardware/drivers, Windows cannot capture wireless traffic properly; Linux can with the right hardware).\nProblems in 802.11 can be more difficult to troubleshoot, so problem resolution can take longer at times.\nThere may be additional security concerns and costs with an 802.11 network.  At the very least you will want to consider running WPA2-Enterprise security if you don't have it already.  VPN for wireless clients is also an option (with or without WPA2).\n\nI can probably go on, but I hope I have illustrated that while this is a viable option, you need to make sure you understand what this change entails if you wish to do it successfully.\n", "cisco asa - ASA5510 Site-to-site VPN with Bluecoat SSG proxy": "\nYou will have to redesign a bit of your network to solve this.\nHere's the network as I see it:\nLAN-BlueCoat-ASA --> VPN --> SRP.\nYou can transport all traffic from spokes to the ASA, then to Internet, but your proxy is behind ASA so I don't see how the traffic can reach it.\nOne desperate solution, would be to move the proxy in front of the ASA, but for many reasons I don't recommend it.\nThis being said, I can think of two ways of doing it:\n - use an explicit proxy to all the remote sites (the bluecoat IP), so everyone will send any WEB request through the tunnel straight to the appliance\n - replace ASA with a VPN&UTM equipment like Fortinet, SRX, UTM-1...\n", "cisco ios 12 - SNMP ENGINE process has high CPU usage on a few 6500 chassis": "\nI would take a look at this support document from Cisco.\nIn part it recommends to run the following command to see which OID's were recently polled:\nshow snmp stats oid\n\nThis gives a readout for which OID's you are polling.  It will allow you to see, by judging the time stamps, which OID is taking a long time to poll.  This is usually where your problem lies.  See the below sample output:\nasr1001-1#show snmp stats oid\n\ntime-stamp               #of times requested             OID\n20:31:33 EDT May 25 2013         1142                    ifOutDiscards\n20:31:33 EDT May 25 2013         1142                    ifOutErrors\n20:31:33 EDT May 25 2013         1142                    ifInDiscards\n20:31:33 EDT May 25 2013         1142                    ifInErrors\n20:31:33 EDT May 25 2013         1142                    ifHCOutOctets\n20:31:33 EDT May 25 2013         1902                    ifHCInOctets\n\nHowever do note that it was only added in IOS release 12.4(20)T and 12.0(22)S, so may not be available to you.\n\nIn the linked document there are some other methods such as:\n\nSniffing the packets on the port to see what OID's are being polled heavily\nUsing debug snmp packets\n\nThey aren't as nice and neat as the show snmp stats oid but they can help you out if that command isn't available.\n", "Can FlexConnect ACLs be combined with Local mode ACLs on the same Cisco WLC WLAN?": "\nI don't have anything on 7.2 still so I can't give you a definitive answer on your question. However, what I can say is that if you take the letter of the documentation as law and presume that you cannot combine FlexConnect and Local ACLs on a single WLAN, and you really don't want to create multiple WLANs, what I know you can do is use central switching on FlexConnect APs to apply local ACLs.\nWe actually do this for our Web Authenticated guest network. Yes, traffic on this network must transit back to the location of the WLC, but it was the best solution for us at the time of implementation.\n", "cisco catalyst - 3750G Switch Buffer Monitoring": "\nAs far as I know data you want is not available on SNMP.\n3750#sh mls qos interface FastEthernet0/1 statistics \n...\n  output queues dropped: \nqueue: threshold1 threshold2 threshold3\n-----------------------------------------\n queue 0:            0            0            0 \n queue 1:       100989            0            0 \n queue 2:            0            0            0 \n queue 3:            0            0            0 \n...\n\nWhat you'd like to know is ifIndex, queue, threshold and drop counter. I'm not aware of populated MIB/OID where these values can be polled from.\nLike John Jensen explained, outDiscard is only thing you can get, but it aggregates all of this, so you won't know if it's BE, AF, EF, NC or what, which is dropping. You probably wouldn't care about BE drops, but you'd care about EF drops.\nThere are two OIDs where these aggregate egress drops are stored, if your ifIndex is 10001, you'd find them here (symbolic and numeric presentation):\nIF-MIB::ifOutDiscards.10001\n.1.3.6.1.2.1.2.2.1.19.10001\nEtherLike-MIB::dot3StatsDeferredTransmissions.10001\n.1.3.6.1.2.1.10.7.2.1.7.10001\n\n3750/3560 are not very good switches for application which can microburst, i.e. if your egress is 1GE and ingresses are 1GE too, two very low average rate ingress ports can easily congest the egress port, causing drops. To maximize the available buffers (and minimize microburst drops) follow this document.\n", "ipv4 - Difference between Subnet and VLAN?": "\nIf they are used interchangeably then they are used incorrectly.\nSubnet refers to particular IP network, such as 192.0.2.0/28.  \nVLAN refers to 802.1Q standard, in which you can essentially give each port unique MAC address table, effectively separating them from each other.\nVLAN may transport one or more subnet (but does not have to, it may be transporting something else than IP entirely). \nSubnet may be configured for VLAN, but does not have to be, it could be without 802.1Q or over some completely different L2 technology than ethernet.\n", "vlan - Trunk port or access port?": "\nThe best solution here would be a routed port. Turn DTP off and leave the port as routed so that VTP updates don't travel into your network and all their layer 2 protocols/information remain on their side.\n", "ipv4 - VLAN and subnet relationship": "\nYou can use secondary addressing to add another subnet onto a SVI, this is not recommended but can be used if you really need it.\nCurrent configuration : 190 bytes\n!\ninterface Vlan45\n ip address 2.3.4.5 255.255.255.0 secondary\n ip address 3.4.5.6 255.255.255.0 secondary\n ip address 4.5.6.7 255.255.255.0 secondary\n ip address 1.2.3.4 255.255.255.0\nend\n\n", "security - How can I use SSL remote access VPN for connecting two sites?": "\nYou can do this in theory, but you will need a good client machine to do that and by good, I mean a good Windows installation.\nThis is because the operating system on the machine you want to use SSL VPN client will have to deal with all the traffic, and that machine will have to somehow prove router&firewall capabilities.\nStep 1: you connect that machine (from remote office) to the headquarter. You will receive an IP address from the SSL_VPN_pool.\nStep 2: you will add a static (persistent route) on all stations (from the remote office), that for the HQ destination would have to reach through the machine connected at Step 1.\nStep 3: you will have to enable Routing&Remote Service on the machine you use SSL VPN client (I assume you will use a Windows platform, although Linux will work better for this), so that traffic from that location will be routed from lan interface to the VPN_interface. Here is a catch: you will either NAT this traffic with a source of your SSL_IP_pool or you can let it this way.\nStep 4: if you don't NAT you have to add on Fortigate static routes for the remote office network and also firewall rule on the ssl.root interface-->to-->HQ_internal.\nYou can do this, but that extra_vpn_equipment_money you don't want to spend would be NAT-ed into some workstation_configuration_sweat.\n", "Why doesn't my port-channel interface come up, between Cisco Catalyst switches?": "\nImproperly configured EtherChannel (port-channel) interfaces would be disabled automatically, to prevent problems such as loops. First of all, having the same configuration on each side would be the safest.\nHere's a checklist:\n\nBoth switches must see the ports as an EtherChannel bundle. If one switch would consider ports as separate connections, it's inconsistent and would fail.\nAll ports in the bundle needs to have the same EtherChannel protocol, i.e. don't mix PAgP and LACP. Also manual configuration mixed with one protocol is not recommended.\nAll channel ports must use at the same speed and the same duplex mode. And LACP doesn't support half-duplex.\nNo one of the ports can be SPAN (switched port analyzer) destination port.\nIf the channel is layer 3, give the address to the port-channel interface, not to single ports.\nFor layer 2 channels:\n\nAll ports have to be either trunks or in the same VLAN.\nIf trunking is used, the mode has to be the same on all ports.\nIf you use a trunk with an allowed VLAN range, that range must be the same on all ports.\nIf you would have different STP costs in a channel, at least ports have to be compatible to each other. STP considers an EtherChannel as a single port.\nProtocol filtering has to be the same on all ports.\nAlso here, (static MAC) addresses must be on the port-channel interface, not on single ports.\n\n\nFurther reading:\n\nLayer 3 and Layer 2 EtherChannel\nUnderstanding EtherChannel Inconsistency Detection\n\n", "monitoring - How to monitor(SPAN) traffic on only a single port of a LACP trunk in Brocade Fastiron": "\nAccording to the FastIron config guide:\n  If the primary interface of a trunk is enabled for monitoring, the entire trunk will be monitored. \nYou can also enable an individual trunk port for monitoring using the config-trunk-ind command\n\nTrunk in this sense being the FastIron term for an aggregated interface.\nIf this didn't work you could use a TAP, or push a link through another switch, tunnel LACP through that switch, then mirror the switch port\n", "cisco - Communication Manager Business Edition 6000": "\nCCX comes as complimentary like it does with CUCM purchases. You will have rest of the utilities installed but CCX would likely come in a DVD which you can install on one of your own machines.\n", "bgp - Route servers and looking glasses": "\n(Note that these two terms are often used interchangeably, which can lead to some confusion.)\nLooking Glasses\nA looking glass is usually a website (most often CGI) that interfaces with routers that are owned and operated by a single ISP or other network operator. Most of the time these are publicly accessible, but there may be instances where they're not. The looking glass provides a view (in website form) into a BGP table of a particular router in an operator's network. Often, looking glass implementations will also include other utilities, such as the ability to run a traceroute to a destination as if it were run from the network operator's router itself. Looking glasses are useful because they provide a perspective into an upstream's BGP table. Level3, a well-known tier one carrier in the U.S. has a looking glass available here. These are widely used troubleshooting tools.\nRoute Servers\nThe term \"route server\" has evolved to mean two different things, both of which will be explained. I'm defining two route server \"subtypes\" here that should make the distinction more clear. These definitions are my own and are only used to try to dispel any possible confusion. In reality, the public route server is also commonly referred to as a \"route collector\" or a \"route-views server\" (the latter originating from the University of Oregon Route Views Project).\nPublic Route Server\nThese are systems (usually routers, but some exist that run open source routing daemons) that are publicly accessible, often via Telnet, and one is able to also run pings, traceroutes, and \"show ip bgp\" (there are also a couple Juniper route servers out there, don't worry!) commands. The difference between a public route server and a looking glass (aside from an LG having a nifty CGI) is that a wide variety of networks (including some tier one carriers) peer with a route server, so there's an \"overall\" bigger picture of which prefixes are coming from which ASN's. Command authorization policy will vary from route server to route server. Here's a list of IPv4 route servers. They have a separate page with IPv6 route servers as well. When it comes to differentiating looking glass from route server, one can think of the looking glass as a frontend to a route server, whether the route server itself be publicly or privately accessible.\nCan't you run a looking glass on a public route server?\nYou can, but typically the people that run looking glasses are the ones that can afford to operate and maintain the servers that the looking glasses run on. With a public route server, all you need is a router (or a server running an open source routing daemon), a good AAA policy, and some folks that are willing to give you BGP feeds. It's also relevant to note that some network operators also host publicly accessible route servers, and you might even come across some operators that run a route server in addition to a looking glass.\nIXP Route Server\nThis version of the route server is a little bit different. On shared peering fabrics at IXP's, the barrier of entry for an organization to begin peering is lower. You have a single port (that the IXP sells to you) connected to the IXP peering LAN, and you're given an IP address by the IXP. Now you can peer with anyone else on the fabric; contrast this with a PNI, which involves a separate dedicated physical connection between you and another entity. With a connection to an IXP's peering LAN, aside from your single port being the bottleneck, you have to manually configure eBGP sessions with whomever you wish to peer with. This is called bilateral interconnection - there is one session between you and the peer, and only you and the peer exchange announcements. If the IXP has many members, this can become cumbersome. In this case, a route server is typically deployed at the IXP in order to be the \"one stop shop\" for an organization to set up an eBGP session with in order to receive prefixes from whomever else is peered with the route server. This is called multilateral interconnection. One BGP session between you and the route server, and you get everyone else's announcements that also peers with the route server.\nSome organizations will rely on the route server eBGP session(s), while others will use it as a backup to their existing eBGP peerings on the IXP fabric. Most IXP's will have redundant route servers and suggest that organizations peer with both if they peer with the route servers at all.\nWhat about BGP?\nMultilateral peering using route servers brings interesting challenges in regards to BGP. A route server itself is an eBGP speaker, however there have to be specific considerations for a route server and multilateral BGP peering. Some of these rules will be reminisce of iBGP route reflection, and there are indeed many similarities. There has been recent work to standardize behaviors of a route server when it comes to these specific features. The following caveats are worth noting here:\n\nNEXT_HOP Attribute - This attribute must be passed on unmodified between the route server and its clients. While the route server implementation itself will not modify this attribute, it's still best practice to set \"next-hop-self\" on eBGP sessions from your router to a route server.\nAS_PATH Attribute - Again, because the route server is intended to be transparent and not participate in any routing decisions, and modification of this attribute may affect the route server clients' best path decision making process, the route server implementation must not modify this attribute. In addition, the route server will not send their own ASN in BGP updates to its clients, therefore it's required to set \"no bgp enforce-first-as\" (Cisco-specific) on the client router in order to allow the eBGP session to form between the client and the route server.\nMULTI_EXIT_DISC Attribute - MED is another attribute that should be propagated to route server clients without modification by the route server, since it can also used to influence the best path selection process.\nCommunities Attributes - These should not be modified by the route server, unless the community (or communities) is intended for processing by the route server itself. Typically communities are used by IXP route server implementations to allow the peers of the route server to manipulate routing updates to other route server peers.\n\nIt is important to remember two distinctions in regards to IXP route server implementation:\n\nThe route server does not participate in any routing or forwarding. It is supposed to be as transparent as possible.\nRoute server clients depend on the route server to perform their outbound filtering for them.\n\nIXP Route Server Implementation Options\nTypically IXP operators will deploy open source routing daemons as route servers. There are three popular options:\n\nQuagga, specifically bgpd. Runs on Linux and BSD. It's been around the longest and probably has the most information available. There have been multiple forks of Quagga over the years, including a train with sponsored development by EuroIX, a train developed by the Open Source Routing group (which more aims to improve IGP functionality with OSPF and ISIS), and the Quagga-RE (Release Engineering) train which has experimental features. Google has also created their own fork of Quagga. Quagga bgpd supports both IPv6 and IPv4, however most IXP operators (and even some Quagga maintainers) will advise against using the \"mainline\" Quagga train for operating a route server at an IXP.\n\nBIRD. Runs on Linux and BSD. BIRD has gained quite a bit of popularity due to its stability and powerful filtering language and capabilities, in addition to its very good scheduling system. There have been a couple of published comparisons and scale tests between Quagga and BIRD. Overall, BIRD tends to be more stable and isn't as susceptible to CPU and memory churn as Quagga is. Both BIRD and Quagga are single-threaded however, but this is intentional. In addition, although BIRD supports both IPv4 and IPv6, it requires two different processes (compiled binaries) for IPv4 and IPv6.\n\nOpenBGPD. Runs on Linux and BSD. OpenBGPD is the only multi-threaded open source BGP daemon available. It's known to be fairly stable under load however TCP MD5 support is somewhat poor.\n\n\nIn addition to open source daemons, Cisco also offers a route server implementation for IOS-XE, which runs on the ASR platform. At the time of this writing, Juniper doesn't offer a route server implementation on their hardware or operating system, but this may change in the future.\nIn terms of evaluating an open source routing daemon, in regards to memory handling and architecture, one can safely assume that BIRD > OpenBGPD > Quagga, however the ASR platform and IOS-XE is also reportedly much more capable at scale when compared to the open source daemon options available.\nI hope this sheds some light on route servers/looking glasses in general.\n", "security - Source of Cisco NBAR dropped traffic": "\nDepending on which platform your using you can use NetFlow data to see this. Most Cisco routing platforms support this and even newer switching platforms support this as well.\nAlso simply logging the ACL (Adding log to the end of the ACL statement) will generate a log message that states the source of the packets that were denied.\n", "vpn - What are the downsides of OpenVPN?": "\nIMHO, the biggest disadvantage to OpenVPN is that it's not interoperable with the vast majority of products from \"big name\" network vendors out there.  Cisco & Juniper's security and router products don't support it - they only support IPsec and proprietary SSL VPNs.  Palo Alto, Fortinet, Check Point, etc. don't support it, either.  So, if your organization / enterprise wants to setup a site-to-site extranet VPN to another company and you've only got an OpenVPN appliance, you're probably going to be out of luck.\nThat being said, some network hardware & software companies are starting to embrace OpenVPN.  MikroTik is one of them.  It's been supported since RouterOS 3.x:\nhttp://wiki.mikrotik.com/wiki/OpenVPN\nAlso, for the longest time the only way to run an OpenVPN client on Apple's iOS required jailbreaking.  This is not so, anymore:\nhttps://itunes.apple.com/us/app/openvpn-connect/id590379981?mt=8\nOverall, the situation is improving.  However, without vendors like Cisco & Juniper implementing it in their products, I can't see large enterprises adopting it without facing interoperability problems.\n", "troubleshooting - DSL-RAM - Bandwidth Problems": "\nTry another router/cable/filter and see if the problem remains. If so, probably ISP fault\n", "ipv6 - Best practice for dual-homing site with two ISPs?": "\nWhat kind of equipment do you have connecting to the providers? If it is a Cisco device you could use IP SLA to ping a destination like 8.8.8.8 over the primary ISP. As soon as you don't get a reply failover to the other static route. Example config:\n! ISP1\nip route 0.0.0.0 0.0.0.0 x.x.x.x track 1\n! ISP2\nip route 0.0.0.0 0.0.0.0 y.y.y.y 250\nip sla 1\nicmp-echo 8.8.8.8 source-interface <ISP1_interface>\nfrequency 3\ntimeout 1000\nip sla schedule 1 life forever start-time now\n\nYou may have to put a static route for 8.8.8.8 over ISP1 to make it always exit out that path. Obviously if you really use 8.8.8.8 choose another IP because otherwise you won't have reachability to it if ISP1 goes down.\n!x.x.x.x is next-hop to ISP1\nip route 8.8.8.8 255.255.255.255 x.x.x.x\n\n", "best practices - What is the benefit of a Cisco \"top of rack\" design?": "\nKeep in mind that a FEX inherently is a method by which to extend the fabric, thus the name. The ability to manage centrally while still having \"line cards\" distributed throughout the DC is the real reason to use a FEX. Drastically reducing cabling is valuable to anyone, technical or not, and the argument of being able to manage the entire infrastructure at fewer points is time savings, pure and simple.\nOne of your big doubts is that you're worried about single points of failure. All devices have the ability to be dual-homed, and in certain configurations, you can even establish virtual port channels with the Nexus 2K FEXs themselves. \nTake a look at Cisco's documentation. You'll find that you can design a topology that is just as redundant as the \"direct-cable\" option you're considering, with less fuss.\n", "Advantages to BGP peering over VPN": "\nThis kind of trick was used by certain ISP's abusing peering relationships - provider A peers at two points (let's say east and west coast of the US).  Provider A builds a tunnel between his peering nodes across B's network and B is suddenly unwillingly providing free cross-country bandwidth.  Needless to say, this kind of behavior was (and is) highly frowned upon.\nNow - as to the use of BGP over VPN tunnels for transit/end users there are a couple of problems:\n1.)  The routing of the underlying tunnels is completely opaque.  Assuming you have two tunnels to two different providers it is possible (...if not likely in the case of consumer grade service) that these tunnels could traverse some of the same intermediate points, which kind of defeats the purpose if HA is the goal in mind.\n2.) Supply and demand - Sure, ISP's could offer these kinds of services but realistically who is buying them?  If you're at a point where you've secured an ASN and have either gotten PI space (unlikely) or negotiated appropriate route leaking, chances are that you're spending a fair amount on transit service (at a minimum).  In contrast, consumers spending $59 USD a month for Internet service aren't likely to provide the revenue to (profitably) offset not only the cost of the hardware to land tons of BGP sessions but also the operational overhead of maintaining and supporting said sessions.  There's also a hidden cost in terms of the backhaul of traffic that's even less likely for ISP's to want to pay for.\n", "cisco - Can netflow be left on all the time?": "\nThe new Cisco product line does netflow in hardware (and I believe the previous generation as well), but when I approach this question here are the things I typically ask myself:\n\n1: Can I afford the bandwidth (i'm sure this won't be a problem most of the time)\n2: Is netflow done in hardware on this device?\n3: Can I afford the CPU cycles (if applicable)\n4: how long you want to store said data on the device\n5: how long should the data be stored on the aggregation point\n\nI have only found benefits when leaving it on all the time, but I also keep an eye on how it's affecting the performance of my network.\nTo each his own!\n", "design - Improving Network Flow Documentation in 3G->4G upgrade project": "\nI have been doing some research and prototyping on this now and found out here that this is something that I can share with you all as a reference if you also ever find this problem at your door step. I still welcome any advice or approaches that worked for you!\nFirst of in order to maintain a reusable set of devices that are used over and over in the flows I got the immediate realisation that I did not want to copy and paste the Visio stencil object over and over and over again. Besides, I found another problem - I could not find the number of documents (configurations/deployments) that this device was used in without resulting to some sickening VB for Applications inside Visio or having a companion Excel/Access list of connections.\nI really do not know if this is ever an issue for others but for an upgrade project it seems you can never underestimate where your device may be included in a flow. These changes have to strictly documented for all to see, not hidden in the ITSM (ITIL) Change Management tool! Especially as we do not have a front-end to this database to make meaningful investigations!\nBeing of UML decent, I have chosen to use a model repository to achieve this quest of sanity with our infrastructure and network documentation.\nFirst, I have created a set of classes that represent every equipment involved in the documentation of our High Level Design (HLD) and Low Level Design(LLD). To me, this means that all engineers in the company have now a template of every asset we have on our network! \nAll changes documented with this model-driven approach enables us to can carry out the impact analysis, instantly!\n\nThe single Model, has\n\n\n93 main devices, includes \n\n\nWEB application servers, \nGPRS and Mobile Internet Service appliances\nDNS/Mail Relay servers\nRouters\nMPLS Routers\nProxies\nCheck Point Firewalls\nJuniper Netscreen Firewalls\nIntelligent Networks (IN) appliances\nAAA/LDAP\nBilling and Mediation appliance\nCharging Gateway appliance\n\n\n\n\n  \n\nThe above were (re)used across the first set of 432 3G flows-paths (Stored in separate operation-specific model repository) where the devices are instantiated 168 times saving me all the Copy-Pasting and bringing me automatic dependency and usage analysis\n\n\n\n\n358+ VLANs/VRFS have been documented and can be easily applied to any network infra in the model\n\nAll this in 14 days working 12 hour shifts!\nMay be in future we should be able to integrate this model repository to asset databases like the Configuration Management Database. If anyone has ideas of something already done I would like to know. If you also managed to solve it differently and can reveal a glimpse please do. \nSince the 93 devices are nothing secret, I am going to put them on GitHub and allow those with a UML tool to extend this base so that we could possibly have all the device groups that exist in the IT eco-system; pipe dream :] \nIt seems documentation is that most underdeveloped area in NE - my thesis is that if we had sufficient and valid documentation we could simulate a lot of the work we what to do without having to make the actual mistake, then ask how to fix it!\nTODO: Add link to the GitHub repo...\n", "monitoring - Network debugging": "\nBecause ping times are distinct, the problem should be between layer 1 and layer3.\nthe first step is to see if it is a layer1 issue. I would check the errors on the switch interfaces. If errors are appearing on the interfaces, I will try to change the cables or the interfaces on the switch to see if the problem is persistent for the same Linux devices.\nIf still persists, Linux servers should have the problem.\n", "ethernet - Monitoring best practice for thresholding errors on an interface?": "\nEthernet standard officially allows 10^-12 bit-error-rate, while in practice the hardware meet much better BER than which standard demands.\nYou should also be able to bing for 'SQA' (Service Quality Assurance) or 'SLA' (Service Level Agreement), some companies publish them, you could use them to check what your competitors are offering and offer something to that level.\nOur SQA states to customers that 0.02% is minor fault (we will fix if ticket is opened), which I think is quite large packet loss for fibre connection, but same SQA covers also DSL so we didn't want to be too aggressive with it. So far this has been sufficient to customers, but we are prepared to reduce the number if it is hurting sales.\nThere are several bingable tools online, where you can check how much packet loss hurts TCP, which can be useful information when deciding what is acceptable loss for your application/product:\n\nhttp://wand.net.nz/~perry/max_download.php\nhttp://www.switch.ch/network/tools/tcp_throughput/index.html\n\n", "Why does BGP RR only reflect the best path?": "\nTo conserve memory at destination, it was not important to micro-optimize forwarding path in the past. This is quote from RFC4456:\n\nOne of the key component of the route reflection approach in\naddressing the scaling issue is that the RR summarizes routing\ninformation and only reflects its best path.\n\nWhile scaling is always important, clearly there are today scenarios where we'll rather spend RIB memory than choose suboptimal path.\nTo address this issue there is BGP AddPath and BGP optimal reflection. AddPath is available from both Cisco and Juniper, while optimal reflection currently is not implemented by major vendors.\nAddPath allows BGP to send more than single best path. Optimal reflection will use SPF (ISIS, OSPF) to reflect best route from POV of receiver, not from route reflectors own point of view.\n", "monitoring - Broader Impact of enabling \u201cpreserve source address\u201d inside NLB": "\nI'm not familiar with Netscaler, so take this with grain of salt.\nI presume you are using NAT to translate source address of request today, so actual server is not seeing today real request address but some single NAT address translated by Netscaler.\nI also presume that his toggle would remove that source address NAT, allowing your servers to see real request address.\nThere are some scenarios where one would want to NAT the request address, such as if for redundancy purposes you want to connect your server to two or more SLB devices simultaneously (who would ECMP the VIP, i.e. both SLB are hot:hot, but not connected to each other in anyway). Then when your server replies to a request, it needs to reply via same interface where the original query came in from.\nOn Linux machines you can fix this easily, without relying on natting the source at SLB.   \nOn Windows server, you wouldn't really have any way to return the request back to the SLB which sent it, unless you NAT each request. If SLB1 NATs source to 192.0.2.1 and SLB2 NATs source to 192.0.2.2, then it's just matter of setting static route in windows, 192.0.2.1/32 pointing to SLB1 and 192.0.2.2/32 pointing to SLB2. This way you are always returning packet back to the SLB which sent the request.\n", "cisco - Why does \"show adjacency\" take so long to run?": "\nHave you checked to see if you have domain lookup disabled? (no ip domain lookup)\nIt could be that your command is taking so long to come back as it is trying to resolve all of the IP's to hostnames.\n", "What do I need to do in order to enable remote HTTPS management of a SonicWall NSA3500": "\nWilliam,\nIf you have enabled HTTPS on the interface and still have the default allow any firewall rule for the HTTPS management service then remote management should be configured.\nIf you have enabled the SSLVPN you will probably have changed the management port to something else... generally 8443 but you can check this in the System -> Administration menu. you should see the port setting in the HTTPS administration port setting.\nIf its not working then check that you are trying to connect to the correct IP address. you need to connect to the interface IP address.\nAlso check the logs of the firewall after trying to login. If its being denied it should tell you and hopefully give a useful reason why. if you still have problems please port the logs and I will have a look.\n", "cisco - QoS at the edge of branch": "\nThere is no way for receiver to affect scheduling of sender. You should just work on getting QoS configured at sender.\nTheoretically if the frames are correctly classified and your receiver and sender supports 802.1Qbb (essentially CoS aware pause frame) then you could request pausing of BE traffic without causing pausing of EF traffic.  \n", "monitoring - What is the difference between netFlow and sFlow?": "\nNetFlow is a protocol for exporting aggregated IP flow totals. As such it is well suited to IP traffic accounting on Internet routers. With Netflow V9 (AKA IPFIX it can look into Layer 2 traffic as well)\nsFlow is a general purpose network traffic measurement system technology. sFlow is designed to be embedded in any network device and to provide continuous statistics on any  protocol (L2, L3, L4, and up to L7), so that all traffic throughout a network can be accurately characterized and monitored. These statistics are essential for congestion control, troubleshooting, security surveillance, network planning etc. They can also be used for IP accounting purposes.\nNetflow mirrors all traffic, and places a load on the CPU when utilised.\nSFlow is a packet sampling technology where the switch captures every 100th packet (configurable) per interface and sends it off to the collector. sFlow is built into the ASIC, and places minimal load on the CPU. \nNetflow supported by Cisco, Juniper, Alcatel Lucent, Huawei, Enterasys, Nortel, VMWare\nsFlow supported by Alaxala, Alcatel Lucent, Allied Telesis, Arista Networks, Brocade, Cisco, Dell, D-Link, Enterasys, Extreme, Fortinet, Hewlett-Packard, Hitachi, Huawei, IBM, Juniper, LG-Ericsson, Mellanox, MRV, NEC, Netgear, Proxim Wireless, Quanta Computer, Vyatta, ZTE and ZyXEL (see sFlow link)\n", "cisco - How can I disable SIP on IOS 12.x": "\nDepending on which version of 12.x you're on, you should be able to do the following:\nrouter(config)#sip-ua\nrouter(config-sip-ua)#no transport tcp\nrouter(config-sip-ua)#no transport udp\n\nThis stops the router from listening on port 5060.\n", "cisco catalyst - How do you convince management that 3560/3750s are a bad idea in your DC?": "\nFWIW I've had experience with 3750's (3750G, and then later 3750E/3560E) at scale in a TOR setup; initially with L2 port-channels/GLBP (variants of 2x1G and 2x2G and the rare 2x4G for db racks) and then with L3 to the TOR (went with this for 3750E/3560E and 10G to the core). I'm talking thousands of them. We only saw issues with buffers for the most bandwidth intensive services, and at that point we were looking at 10G to the host anyway (and dense pizza boxes with 24-48 SFP+'s).\nWhether or not you're going to be able to prove anything to management is really going to depend on the application and you doing your homework on what the requirements of your design and the application are, and knowing exactly what the specifications are of the application, as well as the expected growth velocity of it. Set up a design review with your management chain as well as the primary owners/customers of the network.\nManagement wants to see data, and if you don't have the resources to fully test the box (come up with a test plan, connect it up to some traffic generation hardware, fully scope it out and stress test it to the design spec, etc) this is going to be hard to do. They're not going to be impressed with anecdotal evidence, and finding this kind of hard data may prove difficult, since I'm sure that folks publishing this kind of thing would violate all kinds of NDA's.\nEveryone else that's posted an answer to this has outlined the 3750 platform's \"problem areas\" pretty nicely: stacking and weird failure modes inherent to it, buffer sizes, etc. There's also this question that outlines the issues with gathering SNMP statistics on output queue drops - the buffers are shared across the ASICs, so any stats you get with this via SNMP are going to be the same for specific port ranges (this could be one sticking point you could bring up with your management chain).\nTo summarize, I'd say that the 3750/3560 would be \"fine\" for most deployments, even at somewhat large scales. Avoid stacking them if you can, but I'd say that it's not too horrible to do this in very small and manageable quantities.\n", "Accidentally Removed Allowed VLANs from Cisco Switch Dot1Q Trunk": "\nYou need to use the following command to add your VLAN 30 to an existing Dot1Q trunk on a Cisco Catalyst switch:\nswitchport trunk allowed vlan add 30\n\nOtherwise IOS just thinks you're trying to overwrite the existing configuration and you are left with an accidentally deleted set of allowed VLANs.\nYou could similarly use \"remove\" in place of \"add\" to remove only one VLAN.  See the entire syntax below.  (It is actually the same syntax in Cisco Nexus OS or IOS, FYI.)\nSW-FOO(config-if)#switchport trunk allowed vlan ?\n  WORD    VLAN IDs of the allowed VLANs when this port is in trunking mode\n  add     add VLANs to the current list\n  all     all VLANs\n  except  all VLANs except the following\n  none    no VLANs\n  remove  remove VLANs from the current list\n\n\nAnother option is to put all of your allowed VLANs into the command, like so:\nswitchport trunk allowed vlan 10,20,30\n\nThis option is more time consuming but also works.\n", "GNS3: Local install vs Workbench": "\nI'll go ahead and provide some more \"in-depth\" instructions on telling GNS3 to use a \"remote hypervisor\" (a dynamips instance listening on another machine).\nYou can even use this setup with Amazon EC2 (or another utility computing provider). A setup with a utility computing provider would also be extremely useful for testing out topologies with a very large number of routers, to see how OSPF may behave at scale, etc. I've documented how to do this at my last job (but this was before GNS3 was so popular) and we used it successfully for numerous scale tests. This would also be ideal for folks that don't want to spend the money on a high-end server but can afford to spend a few dollars for a few hours of \"server time\" for GNS3 labs, without chewing up CPU cycles on their home machines.\nThe following instructions assume your remote hypervisor is running Linux.\nStep One: Set up your Linux box.\njjensen@jjensen-dev:~$ mkdir dynamips\njjensen@jjensen-dev:~$ cd dynamips\njjensen@jjensen-dev:~/dynamips$ mkdir tmp\nStep Two: Set up GNS3. Edit -> IOS images and hypervisors. Click the \"External Hypervisors\" tab. Add in the IP address info for your remote hypervisor (Most of the time you can leave all the fields besides IP address as the default). Once you've filled in the IP of your remote hypervisor, click \"Save\".\n\nOnce you have your remote hypervisor added, go back to the \"IOS images\" tab and add in IOS images. There are two important bits to remember:\nUse the \"Linux format\" directory notation (see screenshot), and make sure that the \"use the hypervisor manager\" checkbox is unchecked so that you can select the remote hypervisor that you just added. When adding the IOS image with the remote hypervisor, make sure that your remote hypervisor is selected.\n\nOnce you have your IOS image added, start up Dynamips on your remote machine.\njjensen@jjensen-dev:~/network_eng/dynamips$ sudo ./dynamips-0.2.8-RC3-community-x86_64.bin -H 7200 &\nYou should now be able to add devices to GNS3 topologies on your Windows machine, and GNS3 will communicate with the remote hypervisor on another machine. You also get the console access via PuTTy and such for free as well. Note that there isn't really a \"configuration limit\" on how you want to add your IOS images and hypervisors. You could even have it so that you have a separate remote hypervisor per IOS image if you wanted. Pretty powerful stuff.\nIf anyone could add additional answers on how to make this work with JunOS/\"virtual\" Olive, I think that would also be pretty useful. :-)\n", "How to test layer 2 connectivity on Cisco Switch?": "\nIf you see MAC address is 'mac address-table' you have L2 connectivity. So nothing wrong in your test methodology.\n", "CISCO Wireless Lan Controller and AP's design question": "\n\nPutting the APs and the controller in the same L2 domain is the simplest solution as you don't have to do anything else for them to find one another.  If you put the APs on a different subnet then you have to either configure DHCP option 43 on the APs subnet or put in a DNS entry for cisco-capwap-controller.DOMAIN-APs-GET-FROM.DHC. Formerly this was cisco-lwapp-controller.\nYou'll need to give the secretary either admin or lobby admin access to the WLC so that they can create the logins.  It doesn't need an additional interface for guest wifi but you can use one and plug it into the DMZ for better isolation.\n\nEdit: Corrected DHCP option number as @generalnetworkerror pointed out my faulty memory. \n", "spanning tree - How do I configure a port as STP \"non-edge\" on Juniper EX switches?": "\nset protocols rstp interface [interface] mode point-to-point\n\nThe JunOS STP interface mode docs and this example about Configuring Faster Convergence and Improving Network Stability with RSTP on EX-series Switches would seem to be of interest.\n", "wireless - Directional Sending and Omnidirectional recieving": "\nI think building this network has two separate problems: Building the desired directional properties from available antennas, and splitting the transmit and receive functionalities.\nDirectional antennas should be straightforward (but not necessarily easy.) Select one (or more) standard antenna designs which fit the \"sector\" properties you want. Cisco has some great information, and there is some directional antenna discussion here on NE. Since you are in a research environment, you could further tune your antenna properties with specially crafted and positioned grounded metal plates (etc) to tune your antennas. I would expect you'll need an accurate way to measure the signal strengths from your antennas.\nThere is also information on beam forming solutions from Cisco.\n", "qos - How to generate traffic for lab scenarios": "\nYou can use iperf2 or iperf3 to help generate some traffic. There are quite a few options included that will allow you to accomplish some nice traffic classification.\nYou might also check out scapy - specifically a packet former utility. Allows you to define values on each field to get really granular with how traffic is being formed and sent.\nIn my lab, I have two virtual machines at opposite ends of a physical network. I use both tools I mentioned to send traffic between the virtual machines, but that traffic goes through my lab topology of Cisco routers/switches/firewalls. This way I can have a reliable flow of traffic that I define ahead of time per the lab scenario.\n", "fiber - What is a reasonable latency for a L2 1G leased line between 2 sites, about 420km apart?": "\nEach piece of equipment you run through will add latency through it. If you leased dark fiber between the two locations you should see something just under 3ms one way. Just under 6ms RTT.\nHow much latency a device will add can vary wildly depending on how efficient it is at processing the packet, how efficient it is at converting to/from light, if any buffering must be done due to over subscription, etc.\nI don't know how your service is delivered but more than likely you're looking at something like this:\n\nCE -> CPE -> PE -> P -> P -> PE -> CPE ->CE\n\nCE = Client Edge\nCPE = Customer Premesis Device\nPE = Provider Edge\nP = Provider Router (Similar to a Core device)\n\nIf each device adds 1ms of latency you've gone from 6ms RTT on dark fiber to 22ms. Each device will probably handle the packet for <1ms but you can see how this adds up.\nMore than likely the \"optimizations\" your SP did was to use MPLS-TE to use a more efficient route. I can't confirm this but there's no special voodoo you can throw at a box to make it all of a sudden decrease latency...at least none that I've found yet...still looking.\nTo sum up, I don't think 15ms is too outrageous. If you need better numbers from a latency perspective then you might want to consider other options.\nNote: These times do not include any optical devices these lines might (more than likely) be going through. Things like multiplexers and amplifiers will add small amounts of latency as well. Over long distances the likelihood of going through a multiplexer increases greatly.\n", "switch - Brocade switches per vlan STP support": "\nIt's important to note that PVST/PVST+ is Cisco proprietary.\nThey do support one instance of STP per VLAN, and it is enabled by default. You can enable/disable STP on the following levels (taken from the NetIron config docs):\n\nGlobally - Affects all VLANs\nIndividual VLAN - Affects all ports within the specified VLAN. When you enable or disable STP within a VLAN, the setting overrides the global setting. Thus, you can enable STP for the ports within a VLAN even when STP is globally disabled, or disable the ports within a port-based VLAN when STP is globally enabled.\nIndividual Port - Affects only the individual port. However, if you change the STP state of the primary port in a LAG group, the change affects all ports in the LAG group.\n\nDepending on your code rev, you can enter config mode for the VLAN and either do:\n[no] spanning-tree\n\nor\n[no] rstp\n[no] spanning-tree 802-1w (used on older versions of code)\n\nI know that newer NetIron gear has PVST/PVST+ compatibility modes which you can turn on at the interface level with:\npvst-mode\n\nBut this also implies that you're going to be running MST, which you said you're not going to do.\n", "Are Brocade configuration commands the same across most or all their products?": "\nBrocade's products come from multiple backgrounds, which is the cause of fragmentation in their command set - ie: their *Iron gear is from their acquisition of Foundry, whereas their fibrechannel products are their core product.\nCisco actually suffers the same problem when you branch out of the core routing/switching arena. Their WAAS products ape IOS, but that's really just a shell on top of the underlying product. The WLCs are off in their own little command structure land. Even the NX-OS gear looks an awful lot like IOS, but it's not definitively identical.\n", "wireless - Is it necessary to use layer 2 switches with microwave point-to-point links?": "\nI'd say \"probably\" ... depending on the size of the radio, the switch may be doing power injection, which will be something you need to consider before going straight to a router.\nIf you're primarily concerned about broadcasts rather than additional equipment, another answer is using VLANs to limit broadcast domains, allowing you to use the provided switch for more than just the radio when combined with the router.\nAt the end of the day a sure answer to this question is going to depend on the radio hardware itself.\n", "fiber - Is it common for rackmountable servers to have fibroptic input and output? or is it cat 5 and you have to convert after?": "\nSFP style input is really only common for 10Gig and beyond applications. You can get 1G SFP PCI cards for your servers but I think this would become very expensive when compared to a top of rack switch solution.\nThis sounds like a small business setup. From that perspective I would say that as long as the servers are < 100M from the switch and the cable doesn't directly go over florescent lights or something else that could create interference then you should be fine. If that's not the case and your servers are aggregated at 1Gb then I would recommend running fiber to a top of rack switch and using standard Ethernet to aggregate the servers.\nOn a final note I rarely see actual fiber optics going into a server. It's typically TWINAX if it's SFP based or CAT-5e or CAT-6.\n", "cisco - DHCP relay problem on interfaces secondary network": "\nCisco routers will use the primary subnet configured on the interface for identifying forwarded DHCP requests. \nThe only other option is the DHCP smart relay feature, which allows a router to use the secondary subnet, but only after multiple DHCP offers for the primary subnet are not seen.\n", "troubleshooting - Recording latency between a controlled startpoint and uncontrolled endpoint": "\nThe latter half of your question seems to indicate you're looking for latency figures that take into account the process of forming application-layer data, in which case \"ping\" will not help much considering there's not much data to be formed in a ping packet.\nNetwork folks usually rely on ping because it's a relatively light and reliable way to produce a certain amount of random data to test reachability and latency for a given path. An application which uses HTTP calls, for instance, will behave differently because HTTP is not the same as ICMP. \nIf you're concerned with general network latency figures, outside of any application-specific context (which is the best way to test), ping works just fine. \n", "Etherchannel connections between Cisco and Nortel switches": "\nLook at this link and scroll about half way down.\nhttp://forums.networkinfrastructure.info/nortel-ethernet-switching/ers-8300-and-lacp-with-hp-blade-servers/\nUPDATE: Fixed - Here's how you get LACP to work with the 8300.\nThe configuration is simple, for a base line.\nConfigure your ports and vlans as you would normally (for multiple vlans enable tagging on the port level)\nconfig ethernet 1/1-1/2,2/1-2/2 perform-tagging enable\nconfig ethernet 1/1-1/2,2/1-2/2 lacp key 10\nconfig ethernet 1/1-1/2,2/1-2/2 lacp aggregate true\nconfig ehternet 1/1-1/2,2/1-2/2 lacp enable\n\nconfig vlan 2 create byport 1\nconfig vlan 2 ports add 1/1-1/2,2/1-2/2 member portmember\n\nConfigure your mlt group\n\nconfig mlt 5 create\nconfig mlt 5 lacp key 10\nconfig mlt 5 lacp enable\n\n", "layer1 - Connecting 2 FCoE Switches together with optical cable": "\nDon't confuse FCoE with a \"standard\" fibre ethernet connection. FCoE, as the name implies, delivers fibrechannel over ethernet rather than over traditional fibrechannel connections, allowing for \"converged\" networking. Fibrechannel is typically used in storage networks, not general computing.\nIf all you're wanting to do is link to cabinets with fibre, you do not need FCoE. You just need two switches with multimode transcievers and then standard multimode cable with appropriate connectors for the transcievers. Typical new gear these days are SFP form factor transcievers and LC ends on cables.\n", "cisco - DSCP trust boundary - Ntwork Enginring Stack Exchang": "\nThe following policy-map would work. Just apply this to the inbound of the WAN interface.\npolicy-map MARKDOWN\n  class class-default\n    set dscp default\n\nInterface Config:\ninterface gig 0/1\n  service-policy input MARKDOWN\n\nJust saw the bit about juniper. The following I believe will work for JunOS.\ninterfaces {\n  so-1/2/3 {\n    unit 0 {\n      rewrite-rules {\n        dscp default;\n      }\n    }\n  }\n}\n\n", "Brocade 'management-vrf' feature": "\nAlways have at least two different ways to get into a core box remotely. Generally this means in-band and out-of-band. The inband would simply allow your management range to SSH into the box via any available port, while the out-of-band would be a different link via console or ethernet into the management card/fxp port/ etc\n", "cabling - Long Rach Ethrnt - Ntwork Enginring Stack Exchang": "\nWow I had to dust off the cobwebs there, it has been a long time since someone mentioned Long Reach Ethernet.  I'm not aware off-hand of any vendors currently selling/supporting LRE equipment for use in the enterprise...\nTo find the Cisco page on Long Reach Ethernet, I had to dig into the \"Wayback Machine\".  (Looks like Cisco long ago took their page down.)\nCisco LRE Archived Page:\n\nWhat is Cisco Long-Reach Ethernet Networking?\nThe Cisco Long-Reach Ethernet (LRE) broadband networking solution is the industry's first end-to-end product line for delivering 5-15\n  Mbps performance over existing Category 1/2/3 wiring.\nWith Ethernet-like performance that reaches up to 5,000 feet, LRE enables\n  simultaneous voice, video and data applications, such as high-speed\n  Internet access, video streaming and IP telephony.\n\nIt could help in your situation, but the 2900's and Workstation bridges that you would need have to be nearly impossible to find anymore.  The last date for support was August 20, 2011.\nI think at this point Cisco makes the assumption that everyone just has to suck it up and roll out the Cat5/6.\nI'd love to know if I'm wrong though and someone is still making this type of equipment!  I've got a few remote offices that are in a similar situation.\n", "vpn - What is the use of a tunnel interface on a cisco router?": "\nTunnel interfaces have many uses, including participating in a larger VPN configuration. A VPN setup usually has many parts, including encryption, authentication, routing, and finally, the tunneling. Tunneling is also used for IPv4/IPv6 coexistence setups, such as encapsulating IPv6 packets in IPv4 packets payloads, creating GRE tunnels, and multicast tunneling. The point is that while tunnels may be part of a VPN setup, they do not necessarily represent the entire VPN configuration, but only the traffic encapsulation between endpoints.\n", "fiber - Difference between LR and ZR 10Gb Optics": "\nZR optics are spec'ed to 80km but they're not part of the 10GE standard; they're rather a \"Cisco special.\"\nIn terms of what actually allows them to transmit light over this distance may be \"protected\" information from Cisco (both the ZR and ER operate on 1550nm SMF), but they've published some of the optical parameters for the ZR XENPAK here.\nEDIT: While I thought that 10GBASE-ZR was Cisco-specific, it's not actually. The wikipedia page for the 10Gig standard states \"multiple manufacturers\" have introduced \"ZR\" optics which are based on the 80km PHY described in the OC192 SONET specs.\n", "ethernet - Difference between LLDP and LLDP-MED": "\nMedia Endpoint Discovery is an enhancement of LLDP, known as LLDP-MED, that provides the following facilities:\n\nAuto-discovery of LAN policies (such as VLAN, Layer 2 Priority and Differentiated services (Diffserv) settings) enabling plug and play networking.\nDevice location discovery to allow creation of location databases and, in the case of Voice over Internet Protocol (VoIP), Enhanced 911 services.\nExtended and automated power management of Power over Ethernet (PoE) end points.\nInventory management, allowing network administrators to track their network devices, and determine their characteristics (manufacturer, software and hardware versions, serial or asset number).\n\nThe LLDP-MED protocol extension was formally approved and published as the standard ANSI/TIA-1057 by the Telecommunications Industry Association (TIA) in April 2006.\n", "ieee 802.11 - How to disable 802.11b wireless clients on my WLAN?": "\nI have come across three different ways you may be able to go about disabling 802.11b, depending on your situation and wireless vendor.  I will start with what should generally be the most preferential choice, but any of them will work.\n\nYour wireless vendor may provide a setting to \"disable 802.11b clients\" or similar.  Generally this will implement the next method automatically for you and may tweak some other settings as well.\nRemove the following data rates (these are the 802.11b data rates); this is generally a WLAN or ESS based setting:\n\n1 Mbps\n2 Mbps\n5.5 Mbps\n11 Mbps\n\nAdjust your base or required (terminology varies by vendor) data rates to remove the above data rates and select one or more of the following (or any other 802.11g data rate):\n\n6 Mbps\n9 Mbps\n12 Mbps\n18 Mbps\n\n\nThe third method allows you to keep the 1/2/5.5/11 Mbps data rates enabled in case you have non-802.11b devices that require them.  This may not be common, but I know that most Nintendo Wii gaming consoles require 1 and/or 2 Mbps to be supported to connect (although after they connect, they will operate at 802.11g speeds).  I have heard third hand that there is also a smartphone that has the same problem, but I do not know make/model or experienced it myself.\n", "cisco 6500 - 10GigE fiber over a distance of 120km?": "\nThe distance of the fibre isn't a good indication of whether you'll be able to run a specific optic/speed across it.\nYou need the path loss (measured in dB), which can vary greatly between links of the same distance (due to number of splices, fibre quality etc.)  Also, the distance of the fibre in the ground is usually about 25-30% longer than the path it travels to allow slack for re-splicing, so you'll really need this info up front.\nI'm not sure that that sort of distance will be possible at 10G with any off-the-shelf optics regardless, without some amplification.  There are however 1GE SFPs that should be able do this (-28dBm RX sensitivity)\n", "cisco - How can I log authentication errors in 3G routers?": "\nMost 3G authentication will be done via PPP using either CHAP or PAP, so I'd start with:\ndebug ppp negotiation\ndebug ppp authentication\n\nand see what you get back.\n", "wan - Better way to dedicate internet link for Skype other than PBR": "\nIn Windows you could use Policy Based QoS to set DSCP matching on the application name (applied through group policy)\nedit: document refers to Server 2008 but the feature seems to available on Windows 7 Desktop as well\n", "ospf - Dynamic Routing Protocol (IGP) over IPSec VPN tunnels to branch offices?": "\nSince you are using all ASA-X firewalls, I suggest you go with EIGRP and drop the GRE part - configure IPSEC VPN on ASA.\nI had about 80+ branch offices connecting to main site with IPSEC VPN (Although tunnels were on routers not on firewalls) EIGRP played really well. EIGRP is much lighter with computations and has better performance than OSPF. Plus EIGRP is lot easier to troubleshoot and configure.\nAs for GRE you don't have that option (because you have ASA firewalls not routers) and if you ask me GRE is not the way to go with IPSEC VPN anyway.\n", "CISCO 4500R+E, Sup7L-E redundancy: RPR or SSO?": "\nSSO is preferred due to shorter switchover if supervisor fails. From Cisco:\n\nWith supervisor engine redundancy enabled, if the active supervisor engine fails or if a manual switchover is performed, the standby supervisor engine becomes the \"new\" active supervisor engine. The standby supervisor engine has been automatically initialized with the startup configuration of the active supervisor engine, shortening the switchover time (30 seconds or longer in RPR mode, depending on the configuration; subsecond in SSO mode).\n\nOperation of RPR:\n\nRPR is supported in Cisco IOS-XE Release 3.1.0SG and later releases. When a standby supervisor engine runs in RPR mode, it starts up in a partially-initialized state and is synchronized with the persistent configuration of the active supervisor engine.\nIn a supervisor engine switchover, traffic is disrupted because in the RPR mode all of the physical ports restart since there is no state maintained between supervisor engines relating to module types and statuses. Upon switchover, when the standby supervisor engine completes its initialization, it will read hardware information directly from the module and become the active supervisor engine.\n\nSo the redundant supervisor is only partially initialized. This means there will be a disruption when the supervisor fails over.\nSSO on the other hand is fully initialized.\n\nSSO is supported in Cisco IOS-XE Release 3.1.0SG and later releases. When a standby supervisor engine runs in SSO mode, the standby supervisor engine starts up in a fully-initialized state and synchronizes with the persistent configuration and the running configuration of the active supervisor engine. It subsequently maintains the state on the protocols listed below, and all changes in hardware and software states for features that support stateful switchover are kept in synchronization. Consequently, it offers zero interruption to Layer 2 sessions in a redundant supervisor engine configuration.\nBecause the standby supervisor engine recognizes the hardware link status of every link, ports that were active before the switchover will remain active, including the uplink ports. However, because uplink ports are physically on the supervisor engine, they will be disconnected if the supervisor engine is removed.\nIf the active supervisor engine fails, the standby supervisor engine become active. This newly active supervisor engine uses existing Layer 2 switching information to continue forwarding traffic. Layer 3 forwarding will be delayed until the routing tables have been repopulated in the newly active supervisor engine.\n\nIt is therefore recommended to run SSO. For full information go to Configuring Supervisor Engine Redundancy Using RPR and SSO on Supervisor Engine 7-E and Supervisor Engine 7L-E\n", "routing - What is the difference between a VRF and GRF? (cisco)": "\nGRF is the global routing and forwarding table. Also known as the default VRF in other vendors. It's simply the regular RIB used when no VRFs are used, or the original VRF when other VRFs are used.\nA VRF is a virtual routing and forwarding table which allows a physical router to run a 'virutal' router with it's own RIB and FIB and routing protocols. \n", "Cisco 2600 series router logging a lot of \"Memory allocation failed\" errors": "\nDo a 'show proc mem sorted' and check for biggest memory users. If that's something that is not related to configuration, it may be bug in the code. If that's something that's related to configuration, you may consider re/deconfigure unnecessary services.\nAs IOS can't defragment memory and you can't reclaim it unless some big allocating process frees memory, I'm afraid that to return to normal operation you need to reboot it. Then I'd start to monitor closely memory allocation in total and for the main processes that are using it. If it grows and router is not doing anything additionally, it's propably bug in the \"growing\" process. 12.3(26) has some memory oriented bugs, but you'll need to audit the config to check if you're affected.\n", "layer1 - How fast can information travel through various media?": "\nSignal travels roughly same speed in copper and fibre, copper being slightly faster. Fibre is determined by refractive index, typically speed being about 0.65c, i.e 200km per 1ms (single direction, not RTT).\nMaximum theoretical throughput is hard to determine, maybedivide wavelengths to Planck length difference and light each up, so absurd amount. But in practice about 128 waves by 100G each in optical fibre.\nFor copper we're now doing 40G commercially, 100G will happen and is 400G the table. Obviously distances are very short.\n", "switch - Building new network and need 200+ wireless devices": "\nA couple of thoughts. I can go into more detail on any of these if you need me to.\n-When it comes to wireless, there are two ways to plan. One is for coverage, the other is for capacity. Based on the number of devices(capacity) and space(coverage) that you describe, I believe that capacity is going to the be the bigger deciding factor. Remember that wireless is like using an old-school hub. Everyone hears everything. That also means that only one client can talk to one AP at a time. This isn't a limitation of a device (Cisco vs. Netgear) this is a limitation of the physical medium (airspace). Since you are programming for mobile devices, which will only support a single stream, you should plan on 1 dual band AP per 50 devices. If you choose to only support 2.4 or 5Ghz (airspace issues with neighbor offices for instance), then plan on 1 AP per 30 devices.\n-The Cisco 887 only has a 100Mb connection. If you keep with your current plan, and do all of your L3 routing on the 887, it will become a bottleneck for anything that routes between your internal networks. Examples include: Local replication for Dropbox, Wireless synching between i-devices and itunes, Copying files from machine A to B, Time machine backups, etc. etc. This bottleneck occurs because anytime data must flow from one network to another (wlan to lan) it will need to be routed, and must go out, and then back in, from the same 100Mb interface. This might not be a big deal, but I wanted to mention it, just-in-case.\n-The Wireless controllers are a good idea. The initial setup takes a little while longer, but from that point on, it becomes super easy to deploy more AP's or WLAN's. I don't know anything about them from personal experience, but I have heard good things about the Meraki AP's. It is an cloud-based controller solution, which Cisco recently bought. EDIT for clarity: I don't know anything about the Meraki solution. I know A LOT about the Cisco Wireless Controllers :-).\n-How are you powering your AP's? Do you plan on using VOIP in the future? Consider both of these when considering whether or not to order a switch with PoE. \n-Also, just noticed, you are planning on putting a firewall in-line after the router. That further complicates your plan to route between subnets there. I would plan on purchasing an L3 switch. That would simplify the deployment considerably. \nHope this helps. Good luck.\n", "cisco - How to apply configuration after replacing Routing Engine(RE) for CISCO7609-S?": "\nYour options are pretty limited, but I see two possible solutions.\n\nIncrease the baud rate for your serial connection. This will allow higher throughput on your serial link.\nTemporarily set up a /30 link between your laptop and the Cat7600 and use a local tftp server to move the file into the startup config. If the RSP has a MGMT interface on the front you can use this. \n\n", "security - How does group-policy inheritance work for a Cisco ASA?": "\n\nif I then remove the dns-server statment from BLAH-VPN will that group then use the value set in DfltGrpPolicy?\n\nYes, the dns-server value it inherits from DfltGrpPolicy takes over as long as BLAH-VPN is still defined\n", "ethernet - Accurate strategy for measuring point-to-point link performance?": "\nIf you're trying to test 1xGE No Drop Rate and measure circuit delay within 8ms, I would use nuttcp to test bandwidth and iperf2 / mtr to test delay.\nI would do the following...\n\nFind two linux desktop PCs, if possible (laptops are sometimes acceptable, but you might run into issues with chipset or bus performance at 1GE speeds).  You can boot into a Performance Sonar toolkit CD, if you don't want a permanent linux install on these boxes\nSelect packet sizes for your test.  Since you need voice support on the circuit, you should test streams with smaller frames, such as 128-byte ethernet frames.  If I was running the test, I would choose 128, 256, 768 and 1514 byte ethernet frames.\nTest nuttcp UDP bandwidth performance of your linux PCs connected back to back before shipping one of them 100 miles away.  You want to ensure that you can measure 1000 Mbps at various packet sizes.  Be sure to account for the Inter-Frame Gap when you calculate expected throughput rates... for instance the best possible throughput you can expect on an untagged gige circuit at a 128-byte average ethernet frame size is 864.9 Mbps.\nUse iperf2 or mtr to test circuit delay...\nPick a test window.  I think it's best to test circuits continuously for at least a day... two days to a week are preferable if you need to get a sense for potential oversubscription within your carrier's network.\nShip one of the PCs off to the remote site, preconfigured for the IP addressing you need on the link.\n\nMisc thoughts\nOther answers have suggested using iperf2 alone; however, it doesn't have CLI options to adjust the UDP packet size.  It also tends to demonstrate flaky performance at high speeds under MS Windows.\nThis Metro Ethernet Forum paper on testing carrier ethernet circuits will help provide a general understanding some of the tradeoffs you take when testing circuits.\n", "cisco - What's the difference between CRS-1 and CRS-3": "\nIn March 2010, Cisco announced the introduction of the CRS-3 family. The switching capacity of this new product-line is increased more than three times as each switch-fabric line card can process 140 Gbit/s instead of 40 Gbit/s as in the old system. According to Cisco, the current users can upgrade to the CRS-3 system step by step and without serious outage as the chassis, interface-cards, management-systems etc. are the same. The main changes are in the switching-fabric and the option to use new interface modules supporting these higher speeds (14 or 20 \u00d7 10 Gb interfaces and 1 \u00d7 100 Gb ethernet interface).\nFor information about migrating from a Cisco CRS-1 to a Cisco CRS-3 chassis, refer to the Cisco CRS-1 Carrier Routing System to Cisco CRS-3 Carrier Routing System Migration Guide at the URL http://www.cisco.com/en/US/products/ps5763/prod_installation_guides_list.html\n", "Does authoritative DHCP server mean no static IP setting?": "\nThis only deals with how the DHCP server responds to a client DHCP REQUEST for a certain IP address that is not provided by the DHCP server configuration.\nIf it isn't part of the DHCP scope on the Mikrotik and the setting is yes, then it responds with a DHCP NACK message, which should prompt the client to do a DHCP DISCOVER.\nIf set to no, then it will just ignore those packets (assuming that there may be another DHCP server to handle the request).\nThis should have no effect on a statically assigned IP address since they do not make a DHCP REQUEST.  However, I always prefer to still do my static IP addresses through static reservations on the DHCP server when possible.\n", "routing - What are the reasons for choosing separate or combined VPN and Internet routers?": "\nThere's a bunch of stuff to consider here, although a lot of it depends on your environment.\nFirst, device flexibility. If there's an emergency update that needs a reboot of the device to take effect, are you ready to take down the combined services to deal with that update? This can become a rabbit's hole of \"what if?\" scenarios but it's something to think about.\nSecondly, performance. Will a single device handle the encryption traffic and the routing? Will it do so for the lifetime of the product? Are you going to end up buying a \"big\" single replacement box because one of the functions needed more horsepower, where a \"medium\" and \"small\" box would do if they were separate?\nRedundancy - this ties in to the flexibility point, do you require redundancy on any of these devices? Is it easier to maintain a single HA pair rather than multiples? Perhaps HA is only required for specific functions.\nRouting - this can be fun if you've got separate devices bringing traffic in to the environment. Are they all aware of each other? Are they all aware of the (possibly) multiple paths available to each other? Simplifying down to less devices can be beneficial here, but if your environment isn't this involved you may never have to worry about it.\nAdditional services - are you running firewalling, traffic inspection, or threat prevention on these remote links? Are you going to need an additional \"protection\" box for every service you break out from the main device?\nThose are some of the primary things we consider. In my opinion there isn't a simple \"always do it this way\" answer for this one.\n", "ethernet - UDP Message Length Field and Pseudo Header": "\nYou're right UDP header is 8 bytes. So I can't really explain your 12+8 scenario. Pseudoheader refers to the header which is considered when calculating checksum, is is combination of IP + UDP + payload, but not all of if, hence pseudo.\n20B is normal size for IPV4 (and TCP). So maybe confusion lies there?\nIf you can put your example online, it might help understanding what the author tries to communicate.\nEDIT the packet you entered is 20+8+13 bytes. If your document claims 20+13, it is missing the UDP header.\n", "brocade - Super Aggregated VLAN vs. Q-in-Q": "\nSame thing, different (older) branding. Normally for 802.1ad there's a C-TAG and an S-TAG. The C-TAG (customer tag) will have almost always have a value of 8100 set in its TPID (tag protocol identifier) field. The S-TAG (service tag - the tag on top) will have a separate set of fields (same as the C-TAG: PCP/DEI/TPID/VID bits) and its TPID should be 0x88a8 by the standard. A lot of vendors will let you set the value for the S-TAG TPID to something arbitrary (Brocade likes to recommend 9100 a lot - probably for compatibility reasons). Some vendors (Brocade also being one of them) will let you also set the C-TAG TPID but I can't think of any useful reason why someone would want to deviate from the norm of 8100. It's more common to want/need to change the S-TAG TPID value.\n", "cisco - Is migrating to VRF or rolling-back an easy proposition?": "\nUsing VRFs is easy but depending on the size of your topology can get messy if you only deploy VRF lite. VRF lite is the use of VRFs without using MPLS. If you don't have MPLS you need to run your IGP (OSPF) in vrf aware mode. So for every switch that you have you need to create an interface in the VRF that is used for peering OSPF with the other switches. So say that you have a topology like:\n               +--------+         +--------+\n               |        |         |        |\n    +---------+|  SW2   +--------+|  SW3   +----------------+\n    |          +--------+         +--------+                |\n    |                                                       |\n    |                                                       |\n+---+---+                                              +----+---+\n|       |                                              |        |\n| SW1   |                                              |  SW4   |\n+-------+                                              +--------+\n\nSo now the basic steps to move over to a VRF is to first create the VRF:\nip vrf Guest\nrd 1:1\n\nThen you need to have a L3 interface between the switches. Are you running L2 links today with SVI or do you have \"real\" L3 interaces? If you are using SVI it would be:\nint vlan 12\nip vrf forwarding Guest\nip add 12.12.12.1 255.255.255.0\n!\nint vlan 23\nip vrf forwarding Guest \nip add 23.23.23.2 255.255.255.0\n\nIf you are moving these IP addresses from the global table then there will be a disruption because when you move it to a VRF all your routing state will be cleared because at that point the VRF is empty.\nThen you need to configure your IGP:\nrouter ospf 1 vrf Guest\nnet 12.12.12.0 0.0.0.255 area 0\nnet 23.23.23.0 0.0.0.255 area 0\n\nOSPF does not support having multiple VRFs under the same process number so you would need to run a new process number.\nAll show commands will use vrf to check the status like:\nshow ip route vrf Guest\nshow ip cef vrf Guest\nping vrf Guest x.x.x.x\n\n", "Jumbo Ethernet Frame Deployment": "\nTerms\nPhysical interface -- a layer-2 port or switchport. Refers to switch uplinks and downlinks in the context of this document. May or may not be performing 802.1q tagging.\nLogical interface -- a layer-3 port or routed port. Refers to server interfaces, router interfaces, switch virtual interfaces and subinterfaces. Anything with an IP address.\nStandard domain -- a set of layer-3-adjacent VLANs which operate at the standard Ethernet payload of 1500 bytes.\nJumbo domain -- a set of layer-3-adjacent VLANs which operate at an Ethernet payload MTU greater than 1500 bytes, usually 9000 bytes.\nNetwork Topology\nJumbo frames are not a mix-and-match technology. Jumbo frames are deployed to a clearly delineated segment of the network which is bounded by a router. This layer-3 boundary is essential to support interoperability with the standard domain. The router provides fragmentation and ICMP responses for Path MTU Discovery that are not provided at the lower levels of the networking stack. All communication within the jumbo domain will enjoy support for larger payload, while all communication between standard and jumbo domains will occur at the standard payload size. Communication between discontiguous jumbo domains also occurs at the standard payload size.\nJumbo VLANs\nJumbo frames are not a mix-and-match technology. This point is worth repeating. A given VLAN belongs to the standard domain or the jumbo domain, never both. This means that all physical interfaces that carry a jumbo VLAN must permit jumbo frames. If a jumbo frame encounters a physical interface that does not permit jumbo frames it will be dropped. Likewise, all logical interfaces on a jumbo VLAN must be configured with the exact same MTU value.\nPhysical Interfaces\nPhysical interfaces can carry any number of standard and jumbo VLANs as long as jumbo frames are permitted on the interface. Also, both types of VLANs may be trunked to a host or router. It is only important that the logical interfaces on the host or router be configured with the proper MTU value for each respective VLAN. In this sense, there exists a disconnect between physical interfaces and logical interfaces. A physical interface must meet or exceed the jumbo MTU, it does not need to be an exact match.\nLogical Interfaces\nJumbo frames are not a mix-and-match technology. There it is again. For all intents and purposes every physical interface in the network can permit jumbo frames whether it carries a standard VLAN, a jumbo VLAN or both. The logical interfaces is where the exact MTU match really matters. This is also where it can get a bit confusing. For instance, configuring a Cisco 6500 SVI for MTU 9000 permits an Ethernet payload of 9000 bytes while configuring an HP NIC team for MTU 9014 permits an Ethernet payload of 9000 bytes. This is because the Cisco value only specifies the payload and the HP value specifies the payload plus Ethernet header. It is important to be aware of these details to get the MTU match exactly right.\nValidation\nIt is useful to be aware of methods for validating that a jumbo VLAN has been properly deployed. Ping tests are sufficient, but one must take care to set the DF bit. Both Cisco and Windows ping utilities offer a method to do this, but once again the method for counting the bytes differs. The length parameter on Cisco includes the ICMP payload, ICMP header and IP header. The length parameter on Windows only specifies the ICMP payload. A length of 9000 on Cisco and a length of 8972 on Windows both produce an Ethernet frame of length 9018 with a payload of 9000 bytes.\nConclusion\nHopefully someone out there will find this diatribe useful. In networking, I think we all know the importance of doing it right the first time. Please feel free to leave comments regarding the accuracy of information, potential improvements and additional references.\nReferences\nhttp://en.wikipedia.org/wiki/Jumbo_frame\n", "cisco - How to throttle speed for a particular computer with high activity?": "\nExpanding upon @javano's answer...\nI would change one thing, instead of policing the email traffic (which will drop traffic exceeding that rate) I would recommend just setting aside a small amount of bandwidth for that traffic.  Therefore, if nobody else is using the link the email can utilize the unused bandwidth\npolicy-map PM-Limit-Emails\n class CM-Match-Critical-Apps\n  bandwidth percent 50\n class CM-Match-Scavenger\n  bandwidth percent 1\n class class-default\n  bandwidth percent 20\n  fair-queue\n\nI didn't get a sense of if the issue was the sending (outbound) or receiving (inbound) of large attachments so, since you are just connected to the internet, there will be the potential that this issue will continue as the ISP is not throttling the traffic (inbound) based on your classifications.  If you have a business class internet service there may be the possibility for them to install a similar policy on their end of your link but you will need to talk with your ISP to determine what, if anything, they will support.\n", "spanning tree - Preventing STP loops in etherchannels configurations": "\nYou should not be using \"on\" for link aggregation as it can lead to problems.  On the side with aggregation statically on, it will use the interfaces in the etherchannel, no matter what the configuration is on the other side.\nWhile storm control (from comments) can be very helpful with some of the problems that result, it does not resolve all of them.  For instance if one of the remote side links is an access port on a different VLAN, all traffic that goes down that port will likely never reach its destination.  Depending on how constant the traffic and the load balancing across the etherchannel, this may result in a complete \"outage\" for some hosts.\nI always recommend the use of LACP over PAgP, so instead of desirable/auto or on, use either active on both sides or active on one and passive on the other.  The reason for this is that LACP is standards based while PAgP is Cisco proprietary.\nOf course this is in part dependent on the hardware platform, so check the appropriate documentation for your platform.\n", "cisco - 1 router, 1 internet connection/IP": "\nUsing a VRF is like using a seperate router. If you have the same WAN IP for both VRF's, then you have to configure it twice in both WAN interfaces. If you however only use one WAN interface, you'll have to divide this interface by trunking (using VLAN's) or subinterfaces. \nex:\ninterface FastEthernet0.5\nencapsulation dot1Q 5\nip address 1.1.1.1 255.255.255.252\n\nNotice we do not use ip vrf forwarding, we are using the default vrf here\ninterface FastEthernet0.10\nip vrf forwarding wanconnection:1\nencapsulation dot1Q 10\nip address 1.1.1.1 255.255.255.252 (<== this can be another IP if you prefer to divide it with 2 different IP's)\n\nThe connection then goes as follows:\n\nyour router (normal vrf) => wan connection => vpn used for dot1Q tag 5\nyour router (wanconnection:1 vrf) => wan connection => vpn used for dot1Q tag 10\n\nif you want to do this without tagging and just have 2 physical interfaces, it's the same implementation:\ninterface FastEthernet0\nip address 1.1.1.1 255.255.255.252\n\ninterface FastEthernet1\nip vrf forwarding wanconnection:1\nip address 1.1.1.1 255.255.255.252 \n\nEvery other interface needed in the specific vrf \"wanconnection:1\" needs to be added in the same way: \nip vrf forwarding wanconnection:1\n\nex:\ninterface FastEthernet4\n ip vrf forwarding wanconnection:1\n ip address 10.0.0.1 255.255.255.0\n\nmaking a vrf: http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/12.2/15.02SG/configuration/guide/vrf.html\nip vrf wanconnection:1\n rd 65000:1\n\nthe rd 100:1 command explained:\nCreates a VRF table by specifying a route distinguisher. Enter either an AS number and an arbitrary number (xxx:y) or an IP address and arbitrary number (A.B.C.D:y).\nfor the routing part:\nip route 0.0.0.0 0.0.0.0 1.1.1.2\nip route vrf wanconnection:1 0.0.0.0 0.0.0.0 1.1.1.2\n\nIf you only have one WAN connection without tagging enabled, you could use inter Vrf routing: http://packetlife.net/blog/2010/mar/29/inter-vrf-routing-vrf-lite/\nex:\nip vrf wanconnection:1\n rd 65000:1\n route-target export 65000:2\n route-target import 65000:99\n\nip vrf wanconnection:2\n rd 65000:2\n route-target export 65000:1\n route-target import 65000:99\n\nip vrf shared:1\n rd 65000:99\n route-target export 65000:99\n route-target import 65000:1\n route-target import 65000:2\n\ninterface FastEthernet0\nip vrf forwarding shared:1\nip address 1.1.1.1 255.255.255.252 \n\ninterface loopback1\nip vrf forwarding shared:1\nip address 2.2.2.2 255.255.255.255\n\n\nip route vrf shared:1 0.0.0.0 0.0.0.0 1.1.1.2\nip route vrf wanconnection:1 0.0.0.0 0.0.0.0 2.2.2.2\nip route vrf wanconnection:2 0.0.0.0 0.0.0.0 2.2.2.2\n\ninterface FastEthernet1\nip vrf forwarding wanconnection:1 \nip address 10.0.0.1 255.255.255.0\ndescription \"LAN interface vrf 1\"\n\ninterface FastEthernet2\nip vrf forwarding wanconnection:2\nip address 10.0.2.1 255.255.255.0\ndescription \"LAN interface vrf 2\"\n\nhere FastEthernet1 will use the default route for vrf wanconnection:1 and FastEthernet2 will use the default route for vrf wanconnection:2 (provided by the \"ip route\" commands).\n", "What factors drive a Cisco IOS upgrade?": "\nIn order of preference/priority, our company tends to upgrade based on these factors:  \n\nVulnerabilities, vulnerabilities, vulnerabilities! \nBugs \nAttaining new features not currently available-- new cards/modules have a \"first supported in\" IOS version which could be higher than what you have running\nMigrating away from retired release trains\nMatching versions on more recently deployed and similar hardware\n\nA device that is very critical to the infrastructure may not be as aggressively upgraded as one that is less critical.  Consideration is given to the role of the device, the redundancy surrounding it, and the impact of the upgrade itself by the downtime incurred or by the possibility of having config feature behavior changes or different defaults when going between major versions.  This is the necessity question that also touches on soft costs such as the time and resources to accomplish the upgrades measured against the weight given to each of the factors such as vulnerabilities.\nBe sure to subscribe to multiple vulnerability announcement sites such as Cisco PSIRT (Product Security Incident Response Team) and the US Cert (Computer Emergency Readiness Team).\nA downgrade might be in order if:  \n\nOrganization has a policy to only run tested/QA'd versions and new equipment came with a more recent release.  \nOrg has a policy against running anything other than GD.\n\n\n\nUse Cisco's Output Interpreter of \"show version\" to look for obvious \nissues/vulnerabities/bugs.    \nLook for GD (General Deployment) releases and avoid DF (Deferred).   \nUse ED (Early Deployment) only when it contains must-have features not available elsewhere.   \nAvoid LD (Limited Deployment) when possible and use GD instead.\n\nThere are certainly arguments for going to an ED or LD version, but the desire, of course, is to get to the most stable version that meets requirements.  Use Cisco's Feature Navigator to help identify potentially different feature-sets (assuming you're licensed to use them).\n", "Can a VLAN bridge be used to replace a bypass switch with an IPS device?": "\nI don't believe this will be possible on one single switch. The reason being is that you are relying on STP to catch a link failure, but to go back to back on a single switch, you would have to suspend normal STP operation by either BPDU filtering or something similar. \n", "cisco - How to - use regex in Nexus to search for this | or that?": "\nYou can do a show run | egrep interface.Vlan|ip.address. It does grab a bit more info, but should provide similar output to what you see in IOS. I think grep might work as well, but I used egrep and got the correct output. \n", "brocade - VRRP and VRRP-Extended": "\nVRRP-E is Brocade only. From Brocade documentation:\n\nVRRP-E is a Brocade protocol that provides the benefits of VRRP\n  without the limitations. VRRP-E is unlike VRRP in the following ways:\n\nThere is no \u201cOwner\u201d router. You do not need to use an IP address configured on one of the Layer 3 Switches as the virtual router ID\n  (VRID), which is the address you are backing up for redundancy. The\n  VRID is independent of the IP interfaces configured in the Layer 3\n  Switches. As a result, the protocol does not have an \u201cOwner\u201d as VRRP\n  does.\nThere is no restriction on which router can be the default master router. In VRRP, the \u201cOwner\u201d (the Layer 3 Switch on which the IP\n  interface that is used for the VRID is configured) must be the default\n  Master.\n\nBrocade Layer 3 Switches configured for VRRP-E can interoperate only\n  with other Brocade Layer 3 Switches.\n\n", "cisco - OSPF LSA Performance Tuning": "\nHonestly if you're concerned with best practices and keeping your LSDBs nice and neat, ready for fast convergence, I would recommend ensuring that your OSPF areas are constructed well. Keep LSAs that don't need to be in an area summarized, and don't let a single area grow too large.\n", "cisco - What factors drive L2 vs L3 in the access layer?": "\nL2 Access is often needed when autonomous wireless access points are deployed across multiple switches, thus allowing users to roam from AP to AP without having to get new addresses.  Current controller based wireless solutions tunnel the user traffic to a central drop-off point, so wireless APs can be connected in any subnet so long as they can communicate with the controller.\nL3 in the access layer works well when there's no need for devices connected to multiple switches to access the same subnet/broadcast domain.  It eliminates the need for loop prevention (STP) and VLAN trunking configuration (such as Cisco VTP or manual VLAN configuration).\nL3 access layers do add their own requirements for protocols and configuration.  Unless you want to do static routing you have to take on configuration of a dynamic routing protocol such as such as OSPF (standard) or EIGRP (Cisco).\nIn L3 access networks with dynamic routing it is also a good idea to summarize or tune advertised routes between layers of the network.  For example, you can advertise only a default route from the Aggregation layer to the Access layer to limit the number of routes a simple access switch must learn and maintain.  Turning off auto summarization on the Access switches can also help prevent a misconfiguration from causing one switch to advertise routes it should not. Auto summarization is disabled by default on many current software revisions, but is worth verifying for your switch and software version.\nFinally, access layer diameter is a factor in choosing L2 or L3.  If you want to daisy-chain one access switch off another (where one switch does not connect directly to aggregation) you may need expanded features to run dynamic routing.  In Cisco switches you need a more advanced IOS license to run EIGRP in non-Stub mode, allowing it to advertise routes it learned from another switch to the rest of the network.\n", "cisco - Default-network and default-gateway": "\nip default-gateway is to be used in L2 devices. \nip default-network would be used in L3 devices, but works slightly different from the usual static default route configured with ip route 0.0.0.0 0.0.0.0 <next_hop>. Let's say you configure ip default-network 172.31.0.0. Then, if the device already knows a route for 172.31.0.0, this route will be flagged as a default route candidate. \nYou need to take into account that ip default-network command is classful. \nFurther details and clarifications are available here\n", "Brocade MLX reapplying modified ACL": "\nIt likely has to do with how the TCAM is programmed (see edit below - Brocade refers to it as CAM). I'd definitely be interested to hear why adding a completely separate ACL (vs just an entry in an ACL) would require you to \"reapply the ACLs\". Do you have a source for that quote? If you don't have an SE assigned to your account, I do have contacts that I can ask and get clarification on this.\nWhile not Brocade, I have had experience with vendor hardware where modifying an ACL \"in place\" would cause certain rules \"further up\" in the ACL to be completely ignored/stop functioning. Until the bug was actually fixed, the only workaround was to delete the ACL itself, and then recreate it with all of the rules before applying it to any interface.\nEdit: Turns out my original thought was correct - from NetIron documentation:\n\nHow the Brocade device processes ACLs\nThe Brocade device processes traffic that ACLs filter in hardware. The Brocade device creates an entry for each ACL in the Content Addressable Memory (CAM) at startup or when the ACL is created. The Brocade device uses these CAM entries to permit or deny packets in the hardware, without sending the packets to the CPU for processing.\n\nAnd then further down on the next page:\n\n\nIf you change the content of an ACL (add, change, or delete entries), you must remove and then reapply the ACL to all the ports that use it. Otherwise, the older version of the ACL remains in the CAM and continues to be used. You can easily re-apply ACLs using the ip rebind-acl num | name | all command. Refer to \u201cApplying ACLs to interfaces\u201d on page 1018.\n\n\n", "Why do I get a timeout when I connect via ssh to a Cisco ASA, even though management and ACLs are configured?": "\nUnfortunately the ASA doesn't show a good explanation in the error message. It's required to create an RSA key on the ASA, either via console or command line in the ASDM, executing the command crypto key generate rsa, for example with highest possible modulus size:\ncrypto key generate rsa modulus 2048\n\nin global configuration mode. The default modulus would be 1024.\nWith the ASDM it can also be done in the configuration menu, device management, identity certificates, add, new:\n\nSince the other requirements were already met, the connection should be successful.\nSince I cannot add images to comments to the question above, here a screenshot about mass bumping comment spam starting with one to this question and answer. That's a screenshot of moderator activity, no action by me.\n\n", "wan optimizer - TCP acceleration over satellite or high latency networks": "\nI used to deploy WAN acceleration devices for a hardware vendor about 6 years ago. Not much has really changed since then except I won't make hardware recommendations because of consolidation and changing product lines.\nAll of these devices use some combination of compression and caching to reduce the overall traffic to be transmitted, TCP pre ack'ing to reduce the effects of bandwidth delay product (this is the TCP window effect that you alluded to above) and ganging of undersized packets to insure that packets traversing the links are as full as possible reducing the effect of overhead. The various vendors will throw in their own patented technologies as well, but they mostly boil down to different flavors of these.\nWhile caching is a major help, just the pre-ack'ing of packets over a satellite link will go a long way to making them usable, so that even if your data isn't cacheable for whatever reason (encrypted, compressed, zipped, always changing drastically, etc) if you have a slow enough RTT the pre-ack'ing will partially eliminate the bandwidth delay product and help you get closer to your nominal bandwidth.\nSince the whole goal is to drive up network efficiency and allow higher utilization of your bandwidth, it's very important that underlying network problems that may pop up with high utilization are fixed before deploying a solution. If you have duplex mismatches or are running on half-duplex connections you'll often find that performance is worse than before you deployed wan optimization devices. Often I would find that customers didn't realize that they had some links that had auto-negotiated down to the lowest common denominator of 10 Mbps half duplex.\nMany of these devices also offer Forward Error Correction (which your modems probably offer as well) which you can use to overcome some of the effect of packet loss on your links. This is important since the packet stuffing means that more than one LAN packet could be lost for each WAN packet that gets lost and because of the pre-ack'ing those packets have already been acknowledged to the servers. Make sure that you know which devices in your path are performing FEC so that you don't create more overhead than necessary since this will of course reduce your effective throughput.\nSpeaking from experience, I saw customers without significant caching able to do 'acceptable' (mostly one way) video conferencing over a double satellite hope whose latency ranged from 900 ms to 2 seconds and might have 15-25% packet loss for extended periods. I wouldn't choose to use the resulting flow, but if that's what you have it'l work.\n", "Can Juniper EX series switches terminate a q-in-q interface?": "\nUnfortunately EX switches cannot terminate double-tagged vlans. You would need a bigger box like the MX or M series with IQ/IQ2 module if sticking with Juniper.\nThe best you could do with the EX is strip off the outer-tag and push those inner frames to another EX. \n", "PIM-SM multicast and HSRP/VRRP": "\nPIM messages are not sourced from HSRP VIP's so the RPF check fails since the HSRP VIP is your RPF neighbor.  There are two ways around this though.\n\nSet up a dynamic routing protocol between your router and the other sides routers so HSRP is not needed.\n\nConfigure static mroutes to the other sides actual interface IP's such as:\nip mroute 0.0.0.0 0.0.0.0 1.1.1.1\n\n\n", "switch - DHCP assign IP address based on MAC address with Cisco CE 500 platform?": "\n\nIs it possible to allot IP address based on MAC address on CISCO CE 500\n\nNo you need a real Cisco IOS switch for DHCP server functionality with Maunal Bindings; the Catalyst Express series switches do not run IOS\n", "routing - Circular BGP propagation": "\nYou're kind of thinking about it the wrong way, but I'll try to explain.\nWhen you purchase bandwidth from an ISP, this is called transit (colloquially in the industry). Assuming you've got yourself some PI space (1.0.0.0/8, for example), you're paying your ISP to get your bits from your network to other networks. So say your AS is 6500, and your ISP is 3356. Bits from any other ASN will also need to transit AS3356 to get to you. Let's say that there's another ASN (6501) that buys transit from a different ASN (7224). AS3356 and AS7224 are peers. Now, in order for bits to get from AS6501 to AS6500, the path goes like this:\nAS6501 -> AS7224 -> AS3356 -> AS6500\n\nNow if you set up peering (also a colloquial industry term**) with AS6501, this eliminates the need to get bits from you to AS6501 via transit and vice versa, thus reducing your cost, AS6501's operator's cost, and also usually results in reduced loss/latency between your networks. Everybody wins! Now the path looks like this:\nAS6501 -> AS6500\n\nYour original scenario wouldn't work in the real world, because the assumption for AS6501 would be for it to incur a cost to get your bits across it to you from the ISP(s). AS6501 wouldn't be getting benefit by hauling your bits across it to your ISP so you don't have to pay your ISP. What's more likely is AS6501 would charge you to do this, at which point, you might as well just pay your ISP(s) anyway.\n** The term peering is overloaded. It can be both used to describe a BGP session (e or i variety), as well as the colloquial/political sense, which means you and another network connect to one another and directly exchange traffic (via BGP) for mutual benefit - think opposite of transit. If you're running BGP with your ISP (transit), you're still technically peering with your ISP, because it's an eBGP peering. To help avoid confusion, it's better to use peering to refer to the act of exchanging traffic with another network at no cost (note that this isn't always the case) and BGP session to refer to the actual technical term for exchanging prefixes via BGP (iBGP or eBGP) with another router, whether a cost is involved or not.\n", "troubleshooting - What is the meaning of the CRC counter on a cisco device?": "\nThe counter is increasing because your frames are being corrupted.\nCRC is a polynomial function on the frame which returns a 4B number in Ethernet. It will catch all single bit errors and a good percentage of double bit errors. It is thus meant to ensure that the frame was not corrupted in transit. If your CRC error counter is increasing it means that when your hardware ran the polynomial function on the frame, the result was a 4B number which differed from the 4B number found on the frame itself.\nEthernet frame CRC (FCS) is usually understood to be on OSI layer 2, many people claim it is layer 1 on Ethernet, but that is incorrect (only preamble, SFD and IFG are layer 1 on Ethernet).\nI recommend a book called Computer Networks - A systems approach on this and many other subjects. It discusses CRC in-depth around page 92 through 102.\nAs Daniel pointed out, frames can get corrupted due to several reasons such as: duplex mismatch, faulty cabling and broken hardware. However, some level of CRC errors should be expected and the standard allows up-to 10-12 bit-error-rate on Ethernet (1 bit out of 1012 can flip) and it's acceptable according to the standard. \nIn copper the signal travels by transferring state between electrons (electrons themselves are not traveling very much) and in fiber the signal travels by the photons reflecting off the walls of the fiber. There is a non-zero chance that the photon will simply change due to heat on the walls or the state of the electrons will flip itself.  So even in perfect situations some errors will always happen.  It should be known that a bit is not a single photon or single state change of an electron; today you need many photons or electron state changes to express a single bit, so a single incorrect 'state' will not yield an error as a bit is the average state of many of these.\n", "cisco - POE, POE+, UPOE - Ntwork Enginring Stack Exchang": "\nLike many standards, the initial standard is never sufficient to the developing technology.  Once people have the \"ability\" to do something, they will often find new (and previously unexpected) ways of using that ability.  802.11 wireless is a prime example as no one originally expected it to develop into a \"wired replacement\" that we are heading towards today in many cases.\n802.3af was largely implemented to power VoIP phones and early access points.  The list of devices that started using it grew quickly, and as it grew and the technology changed,  it was found that 802.3af didn't deliver enough power for everything people wanted.  For instance, it could power a video camera, but maybe not a PTZ video camera.  Or it could power that single radio access point, but not a 802.11n (more complex and power hungry) dual radio access point.  Basic VoIP phones were fine, but high definition screen with video capability VoIP phones didn't have the power needed.\nIt was also found to be somewhat inefficient in it's power delivery.  Short of vendor proprietary extensions, a PoE port always delivered 15.4W of power to the device, even if the device didn't need that much.\nSo, another standard was developed to meet these needs, 802.3at.  This provides up to 30W of power and allows devices to negotiate their power needs.  If you only need 3W of power, it can do so and doesn't need to deliver 30W.  Interoperation with 802.3af devices is accomplished by delivering 15.4W to any device that doesn't negotiate for more or less.\nCisco came up with the 60W for exactly the reason I gave to start out (they were also one of the first to deliver inline power, and higher than 15.4W of power through proprietary protocols).  If the \"ability\" is there,  then people will come up with ways to use it.  Their thought process is \"why limit what we can do within the power budget?  Let's just provide more power.\"\nThis is both good and bad.  Good because we will see new abilities by PoE devices or entirely new PoE devices that were not previously realized.  Bad because there are other concerns to keep in mind.\nFor instance, most people don't consider heat in their cable plant when thinking about PoE (for instance look here or here for examples).  The more power you run through a cable, the more heat that it generates and needs to be dissipated.  This may reduce how far you can run cables depending on the category of your cables.  Others have raised concerns because data cabling is often \"bundled\" with up to hundreds of data cables being tightly bound together and this can result in higher temperatures in the center of the bundles.\nCisco claims that UPoE is better than 802.3at at heat dissipation, but I have yet to find a non-Cisco document (or non-Cisco sponsored) that bears this out.\nAnother concern is that the more power you need to deliver to end devices through PoE, the more power the switch needs to draw.  How big would the power supplies on a Cisco 4500 have to be to provide up to 60W on its potential 384 UPoE ports (in addition to the power needs of the switch itself)?  UPSes to provide reliable power to these pieces of network equipment would then have to be upsized as well.\nIf it shapes up that the industry find use for 60W, then the IEEE will draft another ammendment/standard.  \n", "cisco - Writing text to the log": "\nYou can use the send log command:\nswitch#send log Halfway through the script!\n\ngives my on a Catalyst 3750 with IOS 12.2\nMay 31 16:36:18: %SYS-2-LOGMSG: Message from 1(name): Halfway through the script!\n\nand with IOS 15.0:\nMay 31 16:38:08: %SYS-7-USERLOG_DEBUG: Message from tty1(user id: name): Halfway through the script!\n\n", "ieee 802.11 - Is it feasible to install two enterprise WIFI access points without training?": "\nYes, it is feasible to install them yourself. I would not consider it reasonable to pay someone else $1000 to install two wireless access points. There is a learning curve but with a little time and effort you can learn enough to install these yourself. \nHave a read:\nAironet 2600 Getting Started Guide\nAironet 2600 Deployment Guide\nConfiguration Example\n", "cisco - OSPF LSA Rfrsh Tim - Ntwork Enginring Stack Exchang": "\nYou cannot change the LSRefreshTime because it's hard-coded as an \"architectural constant\" in the OSPF RFC.\n", "redundancy - Dual Circuit Health": "\nGenerally you'll want to be using BFD to ensure your forwarding plane is working. If not, you can run IP SLA, to at least two external IPs and fail over if you can't get to both\n", "ipv4 - Finding the IP of a MAC Address": "\nThere are a couple of options.\nIf you are doing DHCP snooping, you should be able to find the IP address in the binding database with the following command:\nshow ip dhcp snooping binding 00:00:00:00:00:00\n\nIf you don't have DHCP snooping, the Cisco device is on the same subnet (or supports multip SVIs so you can add an interface on the subnet), you are on a newer IOS (12.2ish or better) with access to TCL, and the device will respond to a ping, then you can use a TCL script.  You can find many examples on the internet, one of which can be found here.  Once it is able to ping the device (on the same subnet), it should be in the ARP table of the Cisco device.\nGenerally, it would be quicker/easier to check on the L3 device for the ARP entry or the DHCP server then the second option.\nOld answer (prior to question change):\nStrictly answering your question, no there is no way to derive an IP address of a device from the MAC address table entry.\nThe MAC address table is strictly speaking a L2 set of information, tying devices to an interface.  At L2, there is no awareness of an IP address (as the L3 and above information is irrelevant to L2 and could just as easily be another protocol).\nYou would need access to the L3 device for the remote network segment where you could look up the entry in the ARP table.\n", "Brocad chassis and CDP - Ntwork Enginring Stack Exchang": "\nAs far as I know, you can only tell Brocade to intercept (i.e. be able to understand) CDP or not (i.e. forward them along).  If you have CDP off, then they will be forwarded on and won't show up in a show fdp neighbor output.\nIf you are mixing vendors, I would recommend that you look at having them all run LLDP if possible.\n", "cisco - CDP not available to be enabled on ME3400 port": "\nCDP is not allowed on ports running in UNI mode. If you use:\nshow port-type\n\nYou should see which mode the port is running in. You need to use ENI or NNI to support CDP on the interface.\n", "ethernet - Do faster segments of a network mean faster flow rate or lower latency?": "\nNeither, really. Replacing a copper link with a fiber link might lower latency a tiny bit (assuming an uncongested link), but what you really get when you replace a \"core\" link with a higher bandwidth link is less possible congestion. In your example scenerio, it doesn't matter, because there is only one device on each end. In a live network, though, moving from 1g to 10g core links will ease congestion problems within the core of the network.\nNow, as a side affect, you may get lower latency and better traffic flow, but that is purely due to easing congestion so the routers/switches aren't overloaded and dropping/queueing traffic.\n", "cisco - Output Drops on Serial interface: Better queueing or Output queue size?": "\nYou're right, you wouldn't really see the burstiness easily on SNMP. 1GE can send 1.48Mpps, so it takes very very little time to congest the the 45Mbps, which can handle less than 75kpps.  \nIf your ingress is 1GE and egress is 45Mbps, then obviously the congestion point of 45Mbps will need to drop packets. This is normal and expected. If you increase buffers you'll introduce more delay.\n1GE takes 0.45ms to send 40 1500B IP frames, which is right now the amount of burst you can handle. However dequeueing them on the 45Mbps already takes 10ms.\nIf you don't have any acute problem, I would probably not do anything about it. But if some traffic is more eligible for dropping than other, then you should replace FIFO with class-based queueing. Say maybe you want to prioritize so that more ftp is dropped and less voip.\nThen it'll also make more sense to add more buffering on the ftp traffic, as it's not really sensitive to delay.\nIf you want to try your luck with deeper buffers, something like this should suffice:\npolicy-map WAN-OUT\n class class-default\n    fair-queue\n    queue-limit 200 packets\n!\ninterface Serial1/0\n  service-policy output WAN-OUT\n\nThis would cause 50ms buffers on the Serial1 and would allow you to handle up-to 2.25ms burst from single Gige interface.\n", "Is it possible to remotely influence BGP localpref?": "\nIt is unlikely (but not impossible) for the communities you tag on your routes to propagate past your upstream. Most providers will strip the communities out before readvertising routes up/downstream.\nIf you want to influence multiple remote ASes in this manner, you would need to use AS_PATH prepending. Prepend 2-3 times to your backup/passive provider, and then most/all traffic will flow down your active path until it fails. Then traffic should shift to your passive path once the failed route gets withdrawn.\n", "IPv4 Address Space Planning Best Practices": "\nBeing in a semi-small company, we broke down our private network somewhat liberally as so:\n/24 per Vlan\n/16 per location\nVlans are spread out, skipping 10 /24s per. Vlan number matches the third octet. Locations are sequential, starting 10 /16s in.\ni.e.\n\n10.10.1.0/24 - Location A, Management Vlan 1\n10.10.11.0/24 - Location A, Wireless Vlan 11\n10.11.11.0/24 - Location B, Wireless Vlan 11\n10.11.81.0/24 - Location B, SAN Vlan 81\n10.11.101.0/24 - Location B, Wired Office Vlan 101\n\nVlan examples:\n\n1 - management\n2 - management for wireless\n11 - wireless access\n21 - guests\n31 - mobile devices\n41 - factory equipment\n51 - SAN\n61 - VoIP\n71 - Wired access\n\nAnd so on.\nThe benefits we saw with this are:\n\nEasy to refer to an entire location via /16. We use this quite often for VPN ACLs.\nEasy to group device types together for web filtering.\nAny Vlan within the next 10 /24s belongs to the same type as the previous root. \n\nSo for example, factory equipment... Vlan 31, for certain vendors who have 24/7 remote access, we gave them their own Vlan, 32 or 33 or 34, up to 40. Their VPN access limits them to the equipment that they support without getting granular on IPs/ACEs. If the manufacturing team needs to drop more equipment in, we don't have to update the VPN ACLs. This also includes access ACLs/ACEs between Vlans.\nAnother example: SAN Vlans, we use two of them at minimum for redundancy. So they are always 81 and 82.\nLast example: Wireless management is broken out to its own Vlan, 2. We do this because we have enough APs to need a WLAN controller but no budget for controllers. This Vlan uses tftp and dhcp options to auto configure and boot the APs from a central config repo and we don't want other equipment that can auto boot to pull the wireless configs.\n\n\nThis setup gives us an easy way to look at an IP and know the location and type of equipment it belongs to. This means less ACLs/ACEs in configuration files for us, especially on limited VPN users. We also have breathing room for expansion in the event we run out of IPs in a Vlan or because we need to further segregate traffic. And since we're a small company, we haven't broken into three digit location numbering yet. Plenty of growth room.\n", "cisco - CEF operations on L3 switch vs router": "\nNAT can of course use CEF. This is from Cisco's own guide over here: http://www.cisco.com/en/US/tech/tk648/tk361/technologies_q_and_a_item09186a00800e523b.shtml\nQ. What kind of routing performance can be expected when using Cisco IOS NAT?\n\n    A. Cisco IOS NAT supports Cisco Express Forwarding switching, fast switching, and process switching. For 12.4T release and later, fast-switching path is no longer supported. For Cat6k platform, the switching order is Netflow (HW switching path), CEF, process path.\n\n    Performance depends on several factors:\n\n        The type of application and its type of traffic\n\n        Whether IP addresses are embedded\n\n        Exchange and inspection of multiple messages\n\n        Source port required\n\n        The number of translations\n\n        Other applications running at the time\n\n        The type of hardware and processor\n\nBigger platforms running IOS-XR, where the FIB gets ditributed to the line cards, also support carrier grade NAT, so it's usefulness is not limited to the LAN alone.\nAlso a lot of Cisco's L3 switches simply do not do NAT at all\n", "cisco - RIP routing is broken between two routers": "\n\nthey are assigned by default to 172.16.0.0 in both cases, and it does not work\n\nI modified your ascii art a litte to reduce scrolling... It sounds like you're saying that you can't reach reach N1 from N2...\nBroken RIPv1 topology\n=====================\n\nN1 ---- (172.16.1.1/24) R1 (172.16.3.1/30) ----- (172.16.3.2/30) R2 ----- (172.16.2.1/24) N2\n\nClassful routing protocol overview\nRIPv1 is a classful routing protocol... as such, it doesn't associate netmasks with routes when they are advertised.  Classful routing protocols do a couple non-intuitive things...\n\nThey only advertise routes out interfaces where the masks match (this is your problem)\nThey automatically summarize at major network boundaries (see bonus material, below)\n\nInterface netmasks\nTo make your topology work, your masks will have to match on all RIPv1 interfaces, unless you use a classless routing protocol (such as RIPv2, EIGRP, OSPF, or ISIS).  If you need to use RIPv1, then reconfigure your topology such that all interfaces have matching masks, like this...\nFunctional RIPv1 topology\n=========================\n\nN1 ---- (172.16.1.1/24) R1 (172.16.3.1/24) ----- (172.16.3.2/24) R2 ----- (172.16.2.1/24) N2\n\nBonus material: RIPv1 Auto-summarization Example\nSince this also tends to trip people up, I am including an example of RIPv1 auto-summarization dynamics.\nWhen I mention major network boundaries below, I'm talking about the classic definitions for Class A, Class B, and Class C IPv4 networks...\n\nClass A (8-bit netmasks): 1.0.0.0/8 - 127.0.0.0/8\nClass B (16-bit netmasks): 128.0.0.0/16 - 191.255.0.0/16\nClass C (24-bit netmasks): 192.168.0.0/24 - 223.255.255.0/24\n\nMoving on to the RIPv1 auto-summarization example...  I will use matching /24 interface netmasks for simplicity.\nLo0:\n192.168.1.0/24\nLo1:\n1.1.2.0/24\n+----+                  +----+                     +----+\n| R1 +------------------+ R2 +---------------------+ R3 |\n+----+                  +----+                     +----+\n          1.1.1.0/24              172.16.1.0/24\n\nrouter rip               router rip                 router rip\n version 1                version 1                  version 1\n network 192.168.1.0      network 1.0.0.0            network 172.16.0.0\n network 1.0.0.0          network 172.16.0.0\n\nThe routing table on R3 contains:\nC     172.16.1.0/24\nR     1.0.0.0/8        <--- 1.1.1.0/24 and 1.1.2.0/24 are \"hidden\" by the \n                            classful summary at R2\n\nR     192.168.1.0/24   <--- 192.168.1.0/24 passes transparently through R2\n                            since it's a Class C network itself and is not \n                            summarized at R2\n\nR1 and R2 are connected by subnets of the 1.0.0.0/8 major network, so 1.1.1.0/24 and 1.1.2.0/24 are advertised between R1 and R2; however, the link between R2 and R3 is not in 1.0.0.0/8, therefore R2 performs automatic summarization of subnets of 1.0.0.0/8 and subnets of 172.16.0.0/16.\nWhen subnets of a major network are summarized, they get hidden by the summarized route...  This happens at R2 when 1.1.1.0/24 and 1.1.2.0/24 are summarized to 1.0.0.0/8.  Cisco routers cannot disable auto-summarization under RIP version 1 (but they can for RIPv2).\n", "cisco - Embedded routers vs. software routers in the datacentre": "\nTo name a few things: development, maintenance testing and support of software and hardware and of course: marketing and profit. Also, these vendors use dedicated ASICs so packet forwarding (amongst other things) are done in hardware instead of software. Basically, you buy a box which is optimized for one task: routing, which means all code and hardware has been tested for that. \nSoftware routers are often ok, especially if you don't have a large budget or just need to build a lab setup. However, if you run into problems there's a chance you're either on your own figuring out if it's the routing software, your hardware, the kernel or something else. I'm not saying this is a bad thing (some of these projects have many active users), it's just something to consider.\nA full BGP feed is almost 450K IPv4 prefixes by now by the way, and nearly 13K IPv6. If I'd be building a software router, I'd do some research on which NICs to use and how to optimize them and put a lot more than 2G of RAM in the box.\n", "AAA/TACACS+ password on Cisco switch always fails at second password prompt": "\nI would do a debug on your TACACS+ server while you are trying this.\nI'll assume that you only want to use TACACS authentication and only fall-back to local logins if it can't access the server?\nTry using this:\naaa authentication login default group tacacs+ line\n aaa authentication enable default group tacacs+ enable\nAlso see this site: It has some good examples and explanations\nhttp://my.safaribooksonline.com/book/networking/cisco-ios/0596527225/tacacsplus/i13896_heada_4_2#X2ludGVybmFsX0h0bWxWaWV3P3htbGlkPTA1OTY1MjcyMjUlMkZpNTAzNjNfX2hlYWRhX180XzEmcXVlcnk9\nMy guess is that since you have the \"local\" keyword in:\naaa authentication login default group tacacs+ local line\nThe TACACS+ authentication returns a fail, so the router tries doing local authentication. I guess you should provide us with the line vty sanitized configuration.\nIf you have\nline vty 0 15\n  login local\nThen it would do a username/password authentication otherwise its doing password\n", "ipv4 - /31 Point-to-point bitmasks": "\nWe have used /31s in our core (Brocade, Juniper, Cisco) for over three years with no issues whatsoever.\nThis is a production ISP network, and hence its appropriate to use them in a production environment as long as your kit supports it, and you've tested it\n", "cisco - ISR routers - difference between routed and switched ports": "\nI would use ESW card in router if I had small office that needs to have 5 users connected. Then I would have router and switch in same device instead of buying a separate 2960 or such.\nThe only benefit I see with using EHWIC card would be if you need to use LAN features like port security, private VLAN, DHCP snooping etc. However in the first case you mentioned you would use the router as pure router and leave switching features for a real switch.\nSo it boils down to if you want to have routing/switching in one device or multiple. The only real use case I see for it is small office that doesn't need 24-p switch. You would only need to manage one device as well.\n", "cisco - converting AP from CAPWAP to autonomous": "\nBy putting the AP into manual boot mode. You can upload a new image to the AP similar a regular router.\ndebug capwap con cli  \nconf t  \nboot manual  \nreload\n\nYou should see the ap: prompt.\nIf you issue a set command you'll see a few variables that you can change.\nset IP_ADDR 192.168.0.2  \nset NETMASK 255.255.255.0  \nset DEFAULT_ROUTER 192.168.0.1  \ntftp_init  \nether_init  \nflash_init  \ntar -xtract tftp://<TFTP_svr>/<Path_to_tar> flash:  \nset BOOT flash:/<image_directory>/<image_name>  \nset MANUAL_BOOT no  \nset  \nboot\n\n", "wireless - Stopping Cisco Prime/NCS from resizing maps": "\nYou could try disabling the Next Generation Maps in Monitor > Site Maps Properties to see if this makes a difference.  It did on my map test.  There are performance reasons for not doing this.\n\nYou might also be able to manually resize the image.  Go into Edit Floor, then on the bottom-left, you'll see your 200x800 map.  Use the CTRL-click to drag the blue edges to your desired size.\n\n", "tcpdump (-i any) with vlan - Ntwork Enginring Stack Exchang": "\nI think tshark can cope with cooked capture today, I rarely if ever use tcpdump anymore.\nBack when tshark couldn't cope with this (when I was capturing ERSPAN) I wrote script which can pop N bytes out of each frame, quite useful also if you're tunneling over something which is not recognized.\n", "cisco - BGP \"no synchronization\" command not showing up in running-config": "\nIn most modern versions of IOS (since 12.2(8)T - thanks @ytti) BGP synchronization is disabled by default (and shown in the running config as such, ie no synchronization shows up in show run when you turn on BGP). As to which IOS version they decided to make it a \"hidden default\", I'm not entirely too sure, but you should be able to do:\nshow running-config all\n\nor\nshow running-config full\n\nTo get the router to show the entirety of the running config, including the defaults which are normally hidden. Look for no synchronization in there.\n", "upgrade RAM on a Cisco ASA 5520": "\nAssuming it's a real 5520 and not a fake that's actually a converted 5510 (yep, a bunch of those were floating around - you'll know it by the fact it's only got a single RAM slot) you'll want PC3200 with CAS latency (CL) of 3 running at 400MT/s, unbuffered, ECC.\nNot sure if the ASAs are also picky about the chip arrangement too, so if you want to play it super safe, make sure the RAM you buy has the memory spread across 8 chips.\n", "cisco - Why we get high fluctuation on bandwidth measurement Cacti graph?": "\nTo extend ytti's comment.\nYour poll interval seems really small, every 10 seconds if I'm reading right. There's a few reasons you could get that result.\nEquipment side:\n\nBad choice of counters, if you're using 32-bit counters they could be rolling over every ~3.4 seconds if you're running a 10g interface at line rate\nCounter updating, many larger devices only update counters two or three times a minute, and they can never be relied on to be in sync. Every 30 seconds is as low as I'd bother polling, and even then I'd always want at least two points before triggering any alert or taking action\nThere can be a gotcha as packets sent for CPU processing (netflow perhaps) may be counted straight away vs those not going to RE being batched (have seen this on Juniper MX)\n\nPoller side:\n\nIs the poller polling accurately at the interval, and if not is it injecting its result with the actual polling time (eg, x bits in y.z seconds) so a sensible rate can be calculated\nWhat happens when counters reset, or SNMP GET's aren't responded to, different tools respond to these in different ways\n\n", "Why does ipv6 specify 128 bit address, when there are only 48 bits in MAC addresses?": "\nMAC addresses only need to be unique in a local broadcast domain, not globally, so re-use of MAC addresses in different networks usually isn't a problem. \nThe internet isn't one global broadcast domain and thus needs to be divided into many blocks of addresses assigned to different ISP's and each ISP divides his blocks into smaller blocks for different customers/services. To allow each of these smaller blocks to contain many MAC addresses you need to have the IP-space much bigger than the MAC address space.\n", "cisco - What happens when 2 computers transmits at the same time to a 3rd one in a full duplex switch?": "\nThe switch will fully load the incoming frames of data, from the two sending systems, into its buffer(s). I'm not sure how it determines which frame would be first in the queue for subsequent forwarding; but it's probably based on initial receive time of the beginning of the frame. Then the switch works through the transmit buffer queue sending the frames out one-by-one onto the destination port/segment.\nThere's no issue with frames \"running into each other.\" The real issue is can the ultimate port/segment accept the frames fast enough. (And, of course, can the switch process its buffer/queues fast enough.)\n", "switch - Cisco IOS built-in SSH client default version": "\nssh version 2 for IOS 12.1(19)E and later\nSSH from one switch to another... for reasons I can't explain, Cisco calls SSHv2 SSH-1.99...\nSRV1#debug ip ssh client\nSSH Client debugging is on\nSRV1#ssh 10.19.1.2\n\nPassword:\nJun  4 13:45:28.747 CDT: SSH1: sent protocol version id SSH-1.99-Cisco-1.25   <-----\nJun  4 13:45:28.787 CDT: SSH CLIENT0: protocol version id is - SSH-1.99-Cisco-1.25\nJun  4 13:45:28.787 CDT: SSH CLIENT0: sent protocol version id SSH-1.99-Cisco-1.25\n\nAlso from linux when connecting to IOS...\n[mpenning@something ~]$ ssh -v dst1\nOpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: Applying options for *\ndebug1: Connecting to dst1 [10.19.1.1] port 22.\ndebug1: Connection established.\ndebug1: identity file /home/mpenning/.ssh/identity type -1\ndebug1: identity file /home/mpenning/.ssh/id_rsa type 1\ndebug1: identity file /home/mpenning/.ssh/id_dsa type -1\ndebug1: Remote protocol version 1.99, remote software version Cisco-1.25     <-------\ndebug1: no match: Cisco-1.25\ndebug1: Enabling compatibility mode for protocol 2.0                         <--------\ndebug1: Local version string SSH-2.0-OpenSSH_5.3\n\n", "bgp - How can I check to see if I am receiving MED's?": "\nRemoving previous answer as I misunderstood the question, and my previous answer was actually incorrect - MED is exchanged between peer ASN's but is not propagated beyond that (meaning it won't transit an AS to propagate to another AS). However it's still an optional attribute, so it's not required of an implementation to pass on the MED between eBGP/iBGP speakers. MED is typically only evaluated in the best path selection process if there are multiple paths coming from the same AS (relevant in your scenario).\nIf you've got the same provider at both locations it's likely that they'd set a MED on all of the prefixes rather than a subset, and if you don't see that in your output, it's likely that they're not sending you MED's. However it's also a possibility that they're only setting MEDs on aggregates that the provider actually owns rather than peer/customer prefixes. This doesn't mean that you can't set the MED yourself as part of your inbound policy for your iBGP routers to pay attention to however. Also consider sending MEDs to your provider to force them to do cold-potato routing towards you.\nEdit: to also include @MikePennington's good and relevant info and depending on your design, your IGP will also solve this problem for you without the need to worry about setting MEDs or LP values.\nTo answer your question, you could create a route-map with a match clause that matches a given MED value, and then do show ip bgp routes route-map [route-map-name]. For this I'd recommend something like:\nroute-map ONLY-MED deny 10\n    match metric 0\nroute-map ONLY-MED permit 20\n\n# show ip bgp routes route-map ONLY-MED\n\nThis should show you all the prefixes that don't have a MED of 0 set.\n", "cisco asa - Firewall Replication": "\nWe have a similar setup but with two sets of 8.2(5) and we have used an in-house script to detect config changes to the primary pair, change the necessary details to make it connectable in the second DC and push the config to the second firewall pair and finally reboot.\nThis only works for us because the second FW pair is completely passive whilst a failover isn't active.\nAll the script basically does is pull the active config, run a regex to replace the management details with those of the second pair, a regex to replace the SNMP, hostname etc. Once done it TFTP's the config to the second pair and initiates a reboot.\n", "idf - Ethernet termination density per rack and space planning": "\nI would consider this too much for one rack.  You always want to leave yourself at least some space for the future.  I have seldom been in situations where less space is used in a rack over time, rather quite often the opposite (you end up needing more).\nFigure it this way: \n\nTypical 48 port switch = 1U\nTypical 48 port patch panel = 2U\nTypical full rack = 42U\n\nFor 600 terminations, you will need about 39U worth of switches and patch panels, which doesn't leave much room, especially for things like UPSes or any other equipment.  \nIf you decide you want any horizontal cable management, there isn't room unless integrated into the patch panels and then depending on brand/model, these may be 3U.\nIf you go with a chassis based switch solution (now or the future), this also wouldn't work as usually these are not as space efficient (while line cards take up only 1U, their power supplies will take up additional space).\nIf you need to add more cabling in the future, again you wouldn't have space.\nGo for the second rack and give yourself some space.\nEdit: Adding this to comment on some of the other answers.  I left the actual rack layouts out of my answer originally as they are an issue for much discussion as there is no \"correct\" way to do it.  While several good ideas are proposed, a rack design/layout has to address the concerns of your environment and what will provide your organization a reliable and manageable solution.\nWhile there are some things that should be done for any proper installation (racks should be properly grounded, if you use two post racks a ladder rack or other means of securing/stabilizing the top should be installed, etc), many of them come down to personal preference.\nFor instance, some cabling companies will tell you that you should not put patch panels on the lower 1/3-1/2 of the rack, as it is harder to terminate and prone to more errors.  Some will say you shouldn't do any sort of patch panel/switch/patch panel layout as getting access to the back of the patch panels (for additional cabling or repairs) can be restricted.\nIn earthquake prone areas, some people will tell you that you should mount your equipment in the bottom half of the rack (with heaviest items - UPSes - at the bottom) as this provides a more stable rack.  The more weight at the top of the rack, the more the rack has a tendency to sway.\nUltimately, you should put thought into any rack design.  Think through the tasks that you will be doing most often, the tasks that are prone to mistakes/errors or can affect other connections, the amount of space you have, your budget and any other considerations the job/site may have.\n", "cisco - Website filtering via IOS": "\nA poor man's filter can be implemented by using NBAR to match the URL you want to block and then drop the traffic that matches.\nFor instance if you wanted to block google you could use the following\nclass-map match-any BlockGoogle\n    match protocol http url *.google.*\n\npolicy-map BlockGoogle\n   class BlockGoogle\n       drop\n\ninterface gig 0/1\n    description WAN Interface\n    ip address 4.2.2.1 255.255.255.252\n    service-policy output BlockGoogle\n\nBecause this is a match-any class map you can just add more URLs to match in the class.\nNote: Matching based on URL will need to be done in the 1921, not the L2/3 switch.\n", "ipv4 - How do the Application, Presentation and Session layers of the OSI model map to TCP/IP's Application Layer and vice versa?": "\nYes. Both of the OSI and TCP/IP models are pretty old at this stage, and the TCP/IP model was created more specifically to \"operate\" with the IP protocol suite (the TCP/IP model slightly predates the OSI model). The OSI model was created by the ISO (International organization) and TCP/IP model was created by the U.S. and is maintained by the IETF. Even if TCP/IP didn't turn out to be the predominant protocol suite used on the Internet as we know it, with things like Moore's law and increasingly complex applications/protocols that can span multiple layers, the OSI model is becoming somewhat obsolete.\nThe reason why layers 7, 6 and 5 are all crammed into the Application layer in the TCP/IP model is that the folks that created the TCP/IP model believed that those responsibilities should be handled by the application itself, rather than within neatly laid out abstraction layers (thus helping to ease potential confusion that your question calls out).\n", "Blocking IPv6 RA advertisements on Juniper EX series switch": "\nThe support for this feature looks a bit spotty depending on which version of Junos you're running.  You could try this:\nterm block-ra {\n    from {\n        icmp-type router-advertisement;\n    }\n    then {\n        discard;\n    }\n}\n\n", "standardisation - What functionality does 802.3bd-2011 actually add to 802.3 Ethernet?": "\nThis is used to support FCoE as FC cannot handle dropped packets.\nReference \n", "cisco - Does 2504 WLC support LAG?": "\nYes, the 2504 supports LAG in v7.4.  Your first guide refers to v7.0.116.0 and the second guide written in 5/2013 implies v7.4.  Enabling LAG requires a reboot of the WLC and has limitations similar to the 5500.\n\nWhen LAG is enabled on a WLC, the WLC forwards data frames on the same port on which they were received. The WLC relies on the neighbor switch to load-balance traffic across the EtherChannel. The WLC does not perform any EtherChannel load-balancing on its own.\n\nLimitations/Restrictions, same as 5500 but note 5508 doesn't have ap-manager inf's:\n\n\nLAG requires the EtherChannel to be configured for 'mode on' on both\n  the controller and the Catalyst switch. \nThe load-balancing method configured on the Catalyst switch must be a\n  load-balancing method that terminates all IP datagram fragments on a\n  single controller port. Not following this recommendation may result\n  in problems with access point association. \nThe recommended load-balancing method for Catalyst switches is src-dst-ip (enter the\n  port-channel load-balance src-dst-ip command). \nWith LAG, all of the controller ports need to connect to the same neighbor switch. If the neighbor switch goes down, the controller\n  loses connectivity.  With multiple AP-manager interfaces, you can\n  connect your ports to different neighbor devices. If one of the\n  neighbor switches goes down, the controller still has connectivity.\n  However, using multiple AP-manager interfaces presents certain\n  challenges when port redundancy is a concern. \nPort mirroring is not supported when link aggregation (LAG) is enabled on the controller.\n\n\n", "cisco - Why have all my lab routers set their OSPF priority to 0?": "\nOn frame-relay point-to-point interfaces, your OSPF priority is set to zero automatically. Also you have no DR election on a p2p links\n", "cisco - Locate a host on Network": "\nTake a look at Layer2 traceroute (for cisco).. Cdp should be running btw...\nRouter# traceroute mac 0000.0201.0601 0000.0201.0201\nSource 0000.0201.0601 found on con6[WS-C2950G-24-EI] (2.2.6.6)\ncon6 (2.2.6.6) :Fa0/1 => Fa0/3\ncon5                 (2.2.5.5        )  :    Fa0/3 => Gi0/1\ncon1                 (2.2.1.1        )  :    Gi0/1 => Gi0/2\ncon2                 (2.2.2.2        )  :    Gi0/2 => Fa0/1\nDestination 0000.0201.0201 found on con2[WS-C3550-24] (2.2.2.2)\nLayer 2 trace completed\nRouter# \nRouter# traceroute mac 0001.0000.0204 0001.0000.0304 detail \nSource 0001.0000.0204 found on VAYU[WS-C6509] (2.1.1.10)\n1 VAYU / WS-C6509 / 2.1.1.10 :\n                Gi6/1 [full, 1000M] => Po100 [auto, auto]\n2 PANI / WS-C6509 / 2.1.1.12 :\n                Po100 [auto, auto] => Po110 [auto, auto]\n3 BUMI / WS-C6509 / 2.1.1.13 :\n                Po110 [auto, auto] => Po120 [auto, auto]\n4 AGNI / WS-C6509 / 2.1.1.11 :\n                Po120 [auto, auto] => Gi8/12 [full, 1000M] Destination 0001.0000.0304 \nfound on AGNI[WS-C6509] (2.1.1.11) Layer 2 trace completed.\nRouter# \n\n", "How to find a duplicate router-id ospf in the network?": "\nIf you have access to config repositories, the best way to do this is to search through them all to find duplicate entries. Assuming you're on a *NIX host, you could do something like:\n$ cat * | grep 'router-id' | awk {'print $2'} | sort | uniq -c\n\nYou want to look for anything that has a '2' in the first column. You can then find the offender and grep for the IP to find the routers that it's configured on. This would likely be the simplest way. You're already on the right track with a Perl script to poll the devices via SNMP to get at the router-id IP addresses, but I will say that SNMP code can be a little \"hairier\" than just simply using Net::SSH::Expect or Net::Appliance::Session to just log into the devices and dump the running configs to filehandles (at which point you can use the technique above).\nAssuming you're running Cisco, there's also a fairly comprehensive troubleshooting guide that covers this topic if you're interested.\n", "cisco - Setting up DHCP server on the router or on the switch?": "\nSince DHCP Discovery broadcasts initially and to avoid the need for ip-helper addresses, the L3 switch where your users or servers connect is generally the better spot for DHCP.  You didn't mention multiple VLANs, and with the size equipment you have, I assumed just one, so you just need DHCP configured for that VLAN.\nYou could put the DHCP scope on your router if it's L2 adjacent to the users.  If it isn't, then you need ip-helper config in your L3 switch VLAN to get the DHCP broadcasts sent unicast to the router (DHCP server).\nEdit: With your update on topology and VLANs, I would still lean toward the L3 switch for the location of your DHCP scopes.  With the router failing, no DHCP discovery or renewal could take place which could impact your internal-only traffic.\nIdeally, you have multiple switches or DHCP servers so you can have distinct scopes on them -- not overlapping, each serving half of the addresses.  On a 172.16.1.0/24 subnet, and skipping the first 4 addresses, one server could scope 172.16.1.4-127/24 and the other server 172.16.1.128-254/24.  [172.16.1.1 reserved for your gateway addr with .2 and .3 reserved if you were running HSRP]\n", "switching - 802.3x ethernet flow-control on user ports?": "\nMost often Cisco devices can only receive PAUSE frames. They can't send them.\nIf you are running storage over your network I can understand why you would be looking at implementing it and some server/storage vendors even recommend you to do so.\nNote however that PAUSE frames is a very blunt tool as it can pause all traffic meaning you can't differentiate between packets. That means your high priority packets will be treated the same as low priority packets. If you run a separate storage network then it's no issue and you can safely enable it.\nThere is a standard 802.1Qbb that enables to send PAUSE frames per class so not all the traffic gets paused.\nThis article describes how 802.3x works and the implications of running it like adding delay to RTT for TCP packets and such.\n", "ipv6 - Configure External Interface for DHCPv6 client on Cisco IOS": "\nWell firstly you need to globally enable on your router  \nipv6 unicast-routing\nipv6 cef\n\nI believe you should also have the following on your WAN interface:\nipv6 address dhcp\nipv6 enable\nipv6 nd autoconfig default-route\nipv6 dhcp client pd comcast-ipv6-prefix\n\nWhen you're starting out, stay clear of any access-lists or traffic-filters (ipv6 CBAC) until you get your connection working. Otherwise you'll just end up shooting yourself in the foot. Unless, of course, you've done this a million times and you know exactly what works every time.\n", "BGP expanded community-list regex": "\nYou don't need to do it so complex way as there is no implied $, so this should suffice:\nip community-list expanded ANY-COMMUNITIES deny ^0:.*_\nip community-list expanded ANY-COMMUNITIES deny ^65000:.*_\nip community-list expanded ANY-COMMUNITIES permit .*\n\nBut this probably is not even doing what you want to do, are you really interested in the order? I don't think BGP enforces any particular ordering in communities, RFC1997 just allows manipulation without specifying order. And Cisco seems to order communities in numerical order in presentation (neighbor sends me community 1:42 3:42, I add 2:42 and communities shown are '1:42 2:42 3:42' instead of what you maybe expect '1:42 3:42 2:42'.\nThat is, your denying of community 65000 in the beginning probably does not work. If you explain your application, maybe better solution can be found.\nWhen it comes to communities in different platform, what @Teun implied is that they are quite different. Juniper had brilliant idea to use ASN as atom in their as-path regexp, normally atom is character (or byte, if you don't support UTF8). Juniper solution is clearly superior solution, if you think about character classes, say you want to match private ASN in JunOS, simple as [64512-65534]. If atom is normal character, like in IOS and Quagga, it's much more awkward.\n", "cisco - What is the meaning of RSSI?": "\nRSSI is a Radio-Frequency (RF) term and stands for Received Signal Strength Indicator. It is a measure of the power level that a RF device, such as WiFi or 3G client, is  receiving from the radio infrastructure at a given location and time. For instance, the power level a laptop is detecting from a nearby AP. \nUsually, the higher the RSSI the better the quality and speed of the communication through the radio segment. \n", "cisco - Migrating from PIX/VPN 3000 to ASA": "\nRegarding question 1 on mobile device licensing\nPer your comment below, I did a couple tests on our ASA5525-X which has Essentials/Mobile licenses. I was indeed able to limit access using Dynamic Access Policies. I setup a test policy allowing only iOS devices on iPad2,7 models to connect in a new policy. Then I setup the default policy to terminate sessions. This worked and allowed my Verizon iPad Mini to connect but not my iPhone. Here is the license breakdown:\nSession Type: AnyConnect\n\nUsername     : <user>                 Index        : 40\nAssigned IP  : 10.10.121.1            Public IP    : 70.194.2.165\nProtocol     : AnyConnect-Parent SSL-Tunnel DTLS-Tunnel\nLicense      : AnyConnect Essentials, AnyConnect for Mobile\nEncryption   : AnyConnect-Parent: (1)none  SSL-Tunnel: (1)RC4  DTLS-Tunnel: (1)AES128\nHashing      : AnyConnect-Parent: (1)none  SSL-Tunnel: (1)SHA1  DTLS-Tunnel: (1)SHA1\nBytes Tx     : 3200                   Bytes Rx     : 940\nGroup Policy : anyconnect-split-policy\nTunnel Group : anyconnect-split-group\nLogin Time   : 11:46:24 EDT Fri Jun 7 2013\nDuration     : 0h:01m:52s\nInactivity   : 0h:00m:00s\nNAC Result   : Unknown\nVLAN Mapping : N/A                    VLAN         : none\n\nNote: When configuring these settings, if you don't have the \"Apply\" button highlight afterwards, you will need to do something in ASDM that will activate the button and allow you to click it. None of the DAP settings for AnyConnect specifics would apply automatically nor trigger the Apply button so I could apply the settings. I had to go modify another setting, click apply, modify the setting back, click apply. This was using ASDM 7.1 on a 9.1.2 ASA5525-X.\nRegarding question 2 on the licensing:\nThere are no client-side licensing options that I am aware of. The only license not necessarily tied to the ASA directly is the AnyConnect Premium which may be pulled off of a \"server\" ASA with a pool of session licenses for multiple \"client\" ASAs. In the end, they're applied to an ASA still.\nSource:http://www.cisco.com/en/US/docs/security/asa/asa91/license/license_management/license.html\n", "cisco - Setting the same gateway address at a DR site as our main site": "\nfrom the sounds of it, you should be able to do it without much of an issue. This is simply because of the NATing that you have going on.\nA bit of a warning, if the servers are all have static IPs and default gateways, changing the IP of the firewall (current gateway), may make it harder to reach the servers, as they won't know how to get to 192.168.53.0/24 without the default gateway.\nOne way to mitigate this, is to create a static route on one server that points to 192.168.10.10 for traffic going to 192.168.53.0/24.\nAnother way would be to create a new NAT rule on the ASA for an individual host on the main site. Then on the ASA at the DR site, NAT this again to be on the same subnet as the servers.\nSay, host 192.168.10.50 is NAT'd to 192.168.54.254, then pushed over the VPN. The DR ASA then NATs this again to change the source to 192.168.10.254. When the servers at the DR see this source IP, they'll know how to respond since it's in the same subnet.\n", "ipv4 - Does SCTP work over the Internet?": "\nSCTP generally works and no special support is needed, as you implied it is just payload to IP packets.\nCertainly someone is blocking specific IP protocols (considering how many FW guys think ICMP should be blocked), but that would be exception rather than rule, generally speaking all IP protocols work just fine.\nQuick test on nlnog ring with hping3 -c 1 -n  194.100.40.53 -0 --ipproto 132 from about 210 boxes resulted 59 packets delivered, so only 59/210 worked in real-life test.\nI've never heard of actual transit provider filtering IP protocols, so it's the enterprise FW protecting the LAN which usually is the culprit. As long as you control the ends of the Internet connection you should be fine.\n", "cisco - Difference between MSC-A, MSC-B and FP-40": "\nMSC-B draws a little more power than MSC-A, but they are similar in functionality.\nThe FP40 doesn't have as much buffering as the MSC cards, and it doesn't have the top-end PPS switching speed that the MSC cards do.\n", "cisco - How does one specify certain IPs or MAC addresses for NBAR policy enforcement?": "\nYou could create a second match condition in the class-map matching all source IP networks you want to block (with an ACL). Any requests to youtube.com from a source IP not matched by this ACL will not be dropped.\n", "load balance between two ISP bgp links": "\nYou didn't mention vendor, but if Cisco IOS, you can use:\nrouter bgp 43792\n  bgp bestpath as-path multipath-relax\n  address-family ipv4\n    maximum-paths 2\n  !\n!\n\nmultipath-relax is needed as normally you'll only multipath with same as-path routes.\nI'm personally strongly against carrying default routes via dynamic routing-protocols, there simply isn't any need, as long as you operate platform which supports recursive static routes.\nConsider your operator router gets disconnect from their core, then you still receive the default route and your traffic is blackholed until you manually intervene. However if they'd send you some candidate route, perhaps their own PA block or maybe few PA blocks crucial to you, you could add static default routes towards these networks, if edge box is disconnected from core, the aggregate network is gone, and you can converge without manual intervention.\n", "wireless - Where to properly put the DHCP server?": "\nWe handle them on the same server. If the server is not in the same VLAN/Network as the clients, you can use dhcp relay on the layer3 device (normally the gateway) of said network.\nFor example, if you have wireless going to vlan 10, wired vlan 15, and your server is on vlan 20; you'll configure the dhcp relay agent on vlans 10 and 15 interfaces to point to the server's IP address on vlan 20.\nIn cisco terms, the dhcp relay agent is enabled by the ip helper-address $serverIP address.\nNOTE: ip helper-address is more than a dhcp relay agent. It can be used for other protocols as well. Info here: http://www.ciscopress.com/articles/article.asp?p=330807&seqNum=9\n", "switch - Is a router always necessary to link two subnets?": "\nYou need a Layer-3 capable device to route between VLANs. This can be a L3-capable switch though, it doesn't have to be a separate router.\n", "routing - Isolating Juniper Management Plane": "\nThis can easily turn into a debate, sure you could do management in different logical-system, but what are the perceived gains? You're still going to need to protect the main instance just the same.\nIn my opinion you gain nothing but you add complexity, which means added risk of downtime.\nIt would be different matter on SUP2T or Nexus7k with CMP, where you truly have separate out-of-band interface available.\nMy recommendation would be to optimize for least complexity, do on-band ssh management via normal main instance and have RS232 (alas, necessary evil) as back-up out-of-band.\nIf you go through this route, it'll work, there will be some inconveniences like copying software, but you can cope with it, with 'set cli logical-system MGMT'\nYou need two solution, one for normal day-to-day work, and another for OOB, when system or network is broken. OOB is easy, you need RS232, as RS232 is only solution you can use, to try to reboot box when junos is not running or unresponsive (set system debugger-on-break).\nFor your main day-to-day work, it's more debatable, you have three options:\n\nuse on-band (same routes as production INET)\nuse routing-instance (you'll get routing separation, but use same copy of RPD, but I guess you're using FXP0, which is not supported here)\nuse logical-system, another copy of RPD is ran just for MGMT\n\nYou mentioned need to have symmetric route. I assume from this, that you want to use FXP0 for MGMT and you have another competing route for return traffic,  which you need, as NMS server network is used for something else than just NMS, which is bit worrying.\nIn my opinion FXP0 is simply not needed, as it's not OOB (like CMP is) you cannot even protect FXP0 port via FW filter, as it's not HW interface.  \nBut if we assume that you want to keep using FXP0 then you indeed pretty-much MUST put it in logical-system, even if you didn't have competing route for NMS, you'd still need to put FXP0 in logical-system, otherwise you expose your NMS network to attacks from the on-band, which you cannot protect, as you cannot put HW FW filter in the FXP0 interface.\n", "cisco - Traffic Policing - Ntwork Enginring Stack Exchang": "\nI would use vlan-based policing which works better on these switches. This is an example matching a speed value of 48Mb\nmls qos\n!\ninterface GigabitEthernet1/0/2\n switchport access vlan 500\n switchport mode access\n mls qos vlan-based\n!\nclass-map match-all CUSTOMER_1\n match input-interface  GigabitEthernet1/0/2\n!\npolicy-map VLAN500_POLICE\n class CUSTOMER_1\n  police 48000000 18000000 exceed-action drop\n!\npolicy-map VLAN500_PARENT\n class class-default\n  set dscp default\n  service-policy VLAN500_POLICE\n!\ninterface Vlan500\n service-policy input VLAN500_PARENT\n\nUnder the parent policy you have to 'set' something in order for it to work. This could be anything so in this example I'm simply setting the dscp to 0\n"}